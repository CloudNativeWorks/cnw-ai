<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page plugin-docs plugin-id-default docs-doc-id-operations/workload-scheduling" data-has-hydrated=false><script>(function(){try{window.__cfbm=Object.freeze({"score":1,"verified":false,"category":"","bucket":"automated"});window.sessionStorage.setItem('__cfbm', JSON.stringify(window.__cfbm));}catch(e){}})();</script><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Workload scheduling | ClickHouse Docs</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://clickhouse.com/docs/img/docs_social_share.png><meta data-rh=true name=twitter:image content=https://clickhouse.com/docs/img/docs_social_share.png><meta data-rh=true property=og:url content=https://clickhouse.com/docs/operations/workload-scheduling><meta data-rh=true property=og:locale content=en><meta data-rh=true property=og:locale:alternate content=jp><meta data-rh=true property=og:locale:alternate content=zh><meta data-rh=true property=og:locale:alternate content=ru><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=Accept-Language content="en-US,en;q=0.9"><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Workload scheduling | ClickHouse Docs"><meta data-rh=true name=description content="Documentation for Workload Scheduling"><meta data-rh=true property=og:description content="Documentation for Workload Scheduling"><link data-rh=true rel=icon href=/docs/img/docs_favicon.ico><link data-rh=true rel=canonical href=https://clickhouse.com/docs/operations/workload-scheduling><link data-rh=true rel=alternate href=https://clickhouse.com/docs/operations/workload-scheduling hreflang=en><link data-rh=true rel=alternate href=https://clickhouse.com/docs/jp/operations/workload-scheduling hreflang=jp><link data-rh=true rel=alternate href=https://clickhouse.com/docs/zh/operations/workload-scheduling hreflang=zh><link data-rh=true rel=alternate href=https://clickhouse.com/docs/ru/operations/workload-scheduling hreflang=ru><link data-rh=true rel=alternate href=https://clickhouse.com/docs/operations/workload-scheduling hreflang=x-default><link data-rh=true rel=preconnect href=https://5H9UG7CX5W-dsn.algolia.net crossorigin=anonymous><link rel=alternate type=application/rss+xml href=/docs/knowledgebase/rss.xml title="ClickHouse Knowledge Base Feed RSS Feed"><link rel=alternate type=application/atom+xml href=/docs/knowledgebase/atom.xml title="ClickHouse Knowledge Base Feed Atom Feed"><link rel=alternate type=application/json href=/docs/knowledgebase/feed.json title="ClickHouse Knowledge Base Feed JSON Feed"><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-WTNTDT7W")</script><link rel=search type=application/opensearchdescription+xml title="ClickHouse Docs" href=/docs/opensearch.xml><link href=https://widget.kapa.ai rel=preconnect><link href=https://www.gstatic.com rel=preconnect crossorigin=use-credentials><link href=https://www.googletagmanager.com rel=preconnect><script src=/docs/js/kapa_config.js></script><script src=/docs/js/kapa_widget.js async defer></script><link rel=stylesheet href=/docs/assets/css/styles.eafcc97c.css><script src=/docs/assets/js/runtime~main.047e91c7.js defer></script><script src=/docs/assets/js/main.a75c5b65.js defer></script><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WTNTDT7W" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_hXE4 navbar-header"><div class="navbar__inner navbarInner_AsTO"><div class=navbarLogo_UJMW><a href=https://clickhouse.com/ target=_blank rel="noopener noreferrer" class=navbar__brand><div class=navbar__logo><img src=/docs/img/ch_logo_docs.svg alt=ClickHouse class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docs/img/ch_logo_docs_dark.svg alt=ClickHouse class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><nav class="ch-nav-v2 ch-nav-v2-desktop-item"><div><ul><li><div class="ch-nav-v2-item "><a href="" class="ch-nav-v2-link  has-children  undefined "><span>Products</span><span class=chevron><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right mobile-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron down desktop-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></span></a><div class="ch-nav-v2-item__children "><div class=""><ul class="ch-nav-v2-sub-nav-products ch-nav-v2-list"><li><a href=https://clickhouse.com/cloud class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=23 height=17 viewBox="0 0 23 17"><path fill=currentColor d="M14.5.25a8.25 8.25 0 0 1 .252 16.496l-.252.004H6.25a6 6 0 1 1 .601-11.97l.268.031.03-.06A8.25 8.25 0 0 1 14.248.254zm0 1.5A6.75 6.75 0 0 0 7.75 8.5a.75.75 0 0 1-1.5 0q.002-.951.206-1.841l.101-.399-.307-.01a4.5 4.5 0 0 0-.212 8.995l.212.005h8.25a6.75 6.75 0 1 0 0-13.5"/></svg></div><span>ClickHouse Cloud<div class=nav-with-icon__description>Best way to use ClickHouse.<br>Available on AWS, GCP, and Azure.</div></span></a><li><a href=https://clickhouse.com/cloud/bring-your-own-cloud class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 fill=none viewBox="0 0 24 24"><path stroke=currentColor stroke-width=1.5 d="M2.106 11.782A5.24 5.24 0 0 1 6.742 8.99c.438 0 .875.053 1.301.159m-.552 2.837a7.49 7.49 0 1 1 7.49 7.49h-8.24a5.24 5.24 0 0 1-4.188-2.088"/><path fill=currentColor d="M12.76 13.8h-12v1.4h12z"/><path fill=currentColor fill-rule=evenodd d="m15.26 14.5-2.5 2.5v-5z" clip-rule=evenodd /></svg></div><span>BYOC (Bring Your Own Cloud)<div class=nav-with-icon__description>The fully managed ClickHouse Cloud service,<br>Can be deployed in your AWS account.</div></span></a><li><a href=https://clickhouse.com/clickhouse class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=16 height=17 viewBox="0 0 16 17"><path fill=currentColor d="M14.564 9.25c.75 0 1.324.615 1.39 1.36l.006.14v4.5c0 .758-.53 1.418-1.258 1.493l-.138.007H1.646c-.751 0-1.325-.615-1.39-1.36l-.006-.14v-4.5c0-.758.53-1.418 1.257-1.493l.139-.007zm-.104 1.5H1.75v4.5h12.71zm.104-10.5c.75 0 1.324.615 1.39 1.36l.006.14v4.5c0 .758-.53 1.418-1.258 1.493l-.138.007H1.646C.895 7.75.32 7.135.256 6.39L.25 6.25v-4.5C.25.992.78.332 1.507.257L1.646.25zm-.104 1.5H1.75v4.5h12.71z"/></svg></div><span>ClickHouse<div class=nav-with-icon__description>Set up a database with open-source ClickHouse.<br>ClickHouse</div></span></a><li class=ch-nav-v2-mobile-item><a href=https://clickhouse.com/integrations class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=21 height=21 viewBox="0 0 21 21"><path fill=currentColor d="m20.754 14.577.006.1v3.221a2.86 2.86 0 0 1-2.655 2.855l-.207.007-3.208.002c-.35.002-.704-.222-.756-.642l-.007-.109a1 1 0 0 1 .007-.102l.008-.047c.056-.28.05-.568-.018-.845l-.048-.164a1.86 1.86 0 0 0-1.311-1.203 1.895 1.895 0 0 0-2.327 2.213.75.75 0 0 1-.636.892l-.1.006h-3.22a2.86 2.86 0 0 1-2.856-2.693l-.005-.169-.001-2.426-.194-.018a3.4 3.4 0 0 1-2.13-1.127l-.133-.161a3.4 3.4 0 0 1-.608-2.918A3.36 3.36 0 0 1 3.19 8.73l.229-.022V6.283c0-.69.25-1.355.698-1.873l.14-.151a2.86 2.86 0 0 1 1.818-.83l.207-.008 2.425-.001.019-.194a3.4 3.4 0 0 1 1.127-2.13l.161-.133a3.4 3.4 0 0 1 2.919-.608 3.365 3.365 0 0 1 2.518 2.835l.021.23h2.426c.69 0 1.355.25 1.873.698l.151.14c.488.489.782 1.135.83 1.818l.008.207V9.49c.003.35-.22.704-.64.756l-.11.007a1 1 0 0 1-.102-.007l-.047-.009a1.95 1.95 0 0 0-.845.019l-.164.048a1.86 1.86 0 0 0-1.203 1.311 1.895 1.895 0 0 0 2.087 2.348l.192-.031.099-.005.046.003.108.016.068.02.112.048.064.038.073.056.047.043a.74.74 0 0 1 .188.327l.02.1Zm-9.82-12.43a1.89 1.89 0 0 0-.696 1.876.75.75 0 0 1-.635.891l-.1.007H6.282a1.36 1.36 0 0 0-1.354 1.208l-.008.154-.001 3.178.002.03c.003.35-.221.704-.641.756l-.11.007a1 1 0 0 1-.102-.007l-.046-.009a1.96 1.96 0 0 0-.845.019l-.164.048a1.86 1.86 0 0 0-1.204 1.311 1.895 1.895 0 0 0 2.214 2.327.75.75 0 0 1 .891.635l.007.1v3.221c0 .708.54 1.29 1.23 1.355l.132.006 2.424.001.019-.194a3.4 3.4 0 0 1 1.127-2.13l.161-.134a3.4 3.4 0 0 1 2.918-.607 3.36 3.36 0 0 1 2.519 2.835l.021.229h2.426c.31 0 .609-.105.849-.296l.114-.102c.22-.22.356-.505.39-.81l.009-.154-.001-2.426-.193-.018a3.4 3.4 0 0 1-2.13-1.127l-.134-.161a3.4 3.4 0 0 1-.607-2.918 3.36 3.36 0 0 1 2.835-2.519l.229-.022.001-2.433-.008-.145a1.36 1.36 0 0 0-.288-.695l-.102-.114a1.36 1.36 0 0 0-.81-.39l-.154-.01h-3.221a.75.75 0 0 1-.735-.898 1.94 1.94 0 0 0-.065-1.009 1.87 1.87 0 0 0-1.312-1.204 1.9 1.9 0 0 0-1.631.339Z"/></svg></div><span>Discover more than 100 integrations.</span></a></ul><a href=https://clickhouse.com/integrations style=padding-left:60px class="LinkWithArrow_gmJP ch-nav-v2-desktop-item ch-nav-v2-link-with-arrow">Discover more than 100 integrations.<!-- --> <span class=LinkWithArrow__Arrow_QCtL><span class=LinkWithArrow__ArrowGhost_fSw7><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span><span class=LinkWithArrow__ArrowVisible_ZvLF><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span></span></a></div></div></div><li><div class="ch-nav-v2-item "><a href="" class="ch-nav-v2-link  has-children  undefined "><span>Use cases</span><span class=chevron><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right mobile-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron down desktop-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></span></a><div class="ch-nav-v2-item__children "><div class=""><ul class="ch-nav-v2-sub-nav-use-cases ch-nav-v2-list"><li><a href=https://clickhouse.com/use-cases/real-time-analytics class="ch-nav-v2-link  ">Real-time analytics</a><li><a href=https://clickhouse.com/use-cases/machine-learning-and-data-science class="ch-nav-v2-link  ">Machine Learning & Generative AI</a><li><a href=https://clickhouse.com/use-cases/data-warehousing class="ch-nav-v2-link  ">Business Intelligence</a><li><a href=https://clickhouse.com/use-cases/observability class="ch-nav-v2-link  ">Logs, Events, Traces</a><li class=ch-nav-v2-mobile-item><a href=https://clickhouse.com/use-cases class="ch-nav-v2-link  ">All use cases</a></ul><a href=https://clickhouse.com/use-cases class="LinkWithArrow_gmJP ch-nav-v2-desktop-item ch-nav-v2-link-with-arrow">All use cases<!-- --> <span class=LinkWithArrow__Arrow_QCtL><span class=LinkWithArrow__ArrowGhost_fSw7><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span><span class=LinkWithArrow__ArrowVisible_ZvLF><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span></span></a></div></div></div><li><div class="ch-nav-v2-item "><a href=https://clickhouse.com/docs class="ch-nav-v2-link    undefined "><span>Documentation</span></a></div><li><div class="ch-nav-v2-item "><a href="" class="ch-nav-v2-link  has-children  undefined "><span>Resources</span><span class=chevron><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right mobile-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron down desktop-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></span></a><div class="ch-nav-v2-item__children "><div class=""><ul class="ch-nav-v2-sub-nav-resources ch-nav-v2-list"><li><a href=https://clickhouse.com/user-stories class="ch-nav-v2-link  ">User stories</a><li><a href=https://clickhouse.com/blog class="ch-nav-v2-link  ">Blog</a><li><a href=https://clickhouse.com/company/events class="ch-nav-v2-link  ">Events</a><li><a href=https://clickhouse.com/learn class="ch-nav-v2-link  ">Learning and certification</a><li><a href="" class="ch-nav-v2-link w-full items-center justify-between  "><span>Comparison</span><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right text-neutral-500"><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></a><ul class="ch-nav-v2-sub-nav ch-nav-v2-list "><li><a href=https://clickhouse.com/comparison/bigquery class="ch-nav-v2-link block w-full ">BigQuery</a><li><a href=https://clickhouse.com/comparison/postgresql class="ch-nav-v2-link block w-full ">PostgreSQL</a><li><a href=https://clickhouse.com/comparison/redshift class="ch-nav-v2-link block w-full ">Redshift</a><li><a href=https://clickhouse.com/comparison/rockset class="ch-nav-v2-link block w-full ">Rockset</a><li><a href=https://clickhouse.com/comparison/snowflake class="ch-nav-v2-link block w-full ">Snowflake</a></ul><li><a href=https://clickhouse.com/videos class="ch-nav-v2-link block w-full ">Video</a><li><a href=https://clickhouse.com/demos class="ch-nav-v2-link block w-full ">Demo</a></ul></div></div></div><li><div class="ch-nav-v2-item "><a href=/pricing class="ch-nav-v2-link    undefined "><span>Pricing</span></a></div><li><div class="ch-nav-v2-item "><a href="/company/contact?loc=nav" class="ch-nav-v2-link    undefined "><span>Contact</span></a></div></ul></div></nav><div class=navRight_Xotf><a href="https://github.com/ClickHouse/ClickHouse?utm_source=clickhouse&utm_medium=website&utm_campaign=website-nav" target=_blank class=githubStars_xKU0><div class=githubStarsContainer_fzg6><svg width=16 height=16 viewBox="0 0 16 16" fill=none xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd clip-rule=evenodd d="M8 1.75C4.27062 1.75 1.25 4.77062 1.25 8.5C1.25 11.4869 3.18219 14.0097 5.86531 14.9041C6.20281 14.9631 6.32937 14.7606 6.32937 14.5834C6.32937 14.4231 6.32094 13.8916 6.32094 13.3263C4.625 13.6384 4.18625 12.9128 4.05125 12.5331C3.97531 12.3391 3.64625 11.74 3.35938 11.5797C3.12312 11.4531 2.78562 11.1409 3.35094 11.1325C3.8825 11.1241 4.26219 11.6219 4.38875 11.8244C4.99625 12.8453 5.96656 12.5584 6.35469 12.3813C6.41375 11.9425 6.59094 11.6472 6.785 11.4784C5.28312 11.3097 3.71375 10.7275 3.71375 8.14563C3.71375 7.41156 3.97531 6.80406 4.40563 6.33156C4.33812 6.16281 4.10187 5.47094 4.47312 4.54281C4.47312 4.54281 5.03844 4.36563 6.32937 5.23469C6.86937 5.08281 7.44313 5.00687 8.01688 5.00687C8.59063 5.00687 9.16438 5.08281 9.70438 5.23469C10.9953 4.35719 11.5606 4.54281 11.5606 4.54281C11.9319 5.47094 11.6956 6.16281 11.6281 6.33156C12.0584 6.80406 12.32 7.40312 12.32 8.14563C12.32 10.7359 10.7422 11.3097 9.24031 11.4784C9.485 11.6894 9.69594 12.0944 9.69594 12.7272C9.69594 13.63 9.6875 14.3556 9.6875 14.5834C9.6875 14.7606 9.81406 14.9716 10.1516 14.9041C12.8178 14.0097 14.75 11.4784 14.75 8.5C14.75 4.77062 11.7294 1.75 8 1.75Z" fill=currentColor /></svg><span class=githubText_pqqB>46.0k</span></div></a><div class=mobileSearchBar_lGd9><a href=/docs/search class="DocSearch DocSearch-Button" aria-label=Search><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys><kbd class=DocSearch-Button-Key>Ctrl</kbd><kbd class=DocSearch-Button-Key>K</kbd></span></a></div><div class=signUp_pDjn><a href="https://console.clickhouse.cloud/signIn?loc=docs-nav-signIn-cta" class="sign-in navbar__link ch-menu signIn_n8kr">Sign in</a><a href="https://console.clickhouse.cloud/signUp?loc=docs-nav-signUp-cta" class=click-button-anchor><button class="click-button primary-btn">Get started</button></a></div><svg class=docsNavBurger_SkeB width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></div></div><div class="secondary-nav--items secondaryMenu_SZAs"><div class=dropdownCategoriesContainer_DwBX><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/introduction-clickhouse>Get started</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/cloud/overview>Cloud</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/updating-data>Manage data</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/guides/manage-and-deploy-index>Server admin</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/sql-reference>Reference</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/integrations>Integrations</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/use-cases/observability/clickstack/overview>ClickStack</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/chdb>chDB</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/about>About</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class=docsNavDropdownContainer_cADf><a class=docsNavDropdownToolbarTopLevelLink_lJY0 href=/docs/knowledgebase><span>Knowledge Base</span></a></div></div><div class="secondaryMenuRight_dXHH secondary-nav--items-right"><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_DSK9><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/operations/workload-scheduling target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en>English</a><li><a href=/docs/jp/operations/workload-scheduling target=_self rel="noopener noreferrer" class=dropdown__link lang=jp>日本語</a><li><a href=/docs/zh/operations/workload-scheduling target=_self rel="noopener noreferrer" class=dropdown__link lang=zh>中文</a><li><a href=/docs/ru/operations/workload-scheduling target=_self rel="noopener noreferrer" class=dropdown__link lang=ru>Русский</a></ul></div><button class="colorModeButton_EOjh navbar-color-toggle"><svg xmlns=http://www.w3.org/2000/svg fill=none width=31 height=31 viewBox="0 0 24 24" stroke-width=1.5 stroke=currentColor class="w-6 h-6" stroke-linecap=round stroke-linejoin=round><path stroke-linecap=round stroke-linejoin=round d="M18.3945 13.0269C18.7245 12.8719 19.0765 13.1969 18.9845 13.5499C18.6705 14.7519 18.0535 15.8959 17.1035 16.8459C14.2825 19.6669 9.76953 19.7259 7.02153 16.9779C4.27353 14.2299 4.33353 9.71589 7.15453 6.89489C8.10453 5.94489 9.24753 5.32789 10.4505 5.01389C10.8035 4.92189 11.1275 5.27389 10.9735 5.60389C9.97153 7.74289 10.3005 10.3049 11.9975 12.0019C13.6935 13.6999 16.2555 14.0289 18.3945 13.0269V13.0269Z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_hXE4 navbar-header"><div class="navbar__inner navbarInner_AsTO"><div class=navbarLogo_UJMW><a href=https://clickhouse.com/ target=_blank rel="noopener noreferrer" class=navbar__brand><div class=navbar__logo><img src=/docs/img/ch_logo_docs.svg alt=ClickHouse class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docs/img/ch_logo_docs_dark.svg alt=ClickHouse class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><nav class="ch-nav-v2 ch-nav-v2-desktop-item"><div><ul><li><div class="ch-nav-v2-item "><a href="" class="ch-nav-v2-link  has-children  undefined "><span>Products</span><span class=chevron><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right mobile-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron down desktop-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></span></a><div class="ch-nav-v2-item__children "><div class=""><ul class="ch-nav-v2-sub-nav-products ch-nav-v2-list"><li><a href=https://clickhouse.com/cloud class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=23 height=17 viewBox="0 0 23 17"><path fill=currentColor d="M14.5.25a8.25 8.25 0 0 1 .252 16.496l-.252.004H6.25a6 6 0 1 1 .601-11.97l.268.031.03-.06A8.25 8.25 0 0 1 14.248.254zm0 1.5A6.75 6.75 0 0 0 7.75 8.5a.75.75 0 0 1-1.5 0q.002-.951.206-1.841l.101-.399-.307-.01a4.5 4.5 0 0 0-.212 8.995l.212.005h8.25a6.75 6.75 0 1 0 0-13.5"/></svg></div><span>ClickHouse Cloud<div class=nav-with-icon__description>Best way to use ClickHouse.<br>Available on AWS, GCP, and Azure.</div></span></a><li><a href=https://clickhouse.com/cloud/bring-your-own-cloud class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 fill=none viewBox="0 0 24 24"><path stroke=currentColor stroke-width=1.5 d="M2.106 11.782A5.24 5.24 0 0 1 6.742 8.99c.438 0 .875.053 1.301.159m-.552 2.837a7.49 7.49 0 1 1 7.49 7.49h-8.24a5.24 5.24 0 0 1-4.188-2.088"/><path fill=currentColor d="M12.76 13.8h-12v1.4h12z"/><path fill=currentColor fill-rule=evenodd d="m15.26 14.5-2.5 2.5v-5z" clip-rule=evenodd /></svg></div><span>BYOC (Bring Your Own Cloud)<div class=nav-with-icon__description>The fully managed ClickHouse Cloud service,<br>Can be deployed in your AWS account.</div></span></a><li><a href=https://clickhouse.com/clickhouse class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=16 height=17 viewBox="0 0 16 17"><path fill=currentColor d="M14.564 9.25c.75 0 1.324.615 1.39 1.36l.006.14v4.5c0 .758-.53 1.418-1.258 1.493l-.138.007H1.646c-.751 0-1.325-.615-1.39-1.36l-.006-.14v-4.5c0-.758.53-1.418 1.257-1.493l.139-.007zm-.104 1.5H1.75v4.5h12.71zm.104-10.5c.75 0 1.324.615 1.39 1.36l.006.14v4.5c0 .758-.53 1.418-1.258 1.493l-.138.007H1.646C.895 7.75.32 7.135.256 6.39L.25 6.25v-4.5C.25.992.78.332 1.507.257L1.646.25zm-.104 1.5H1.75v4.5h12.71z"/></svg></div><span>ClickHouse<div class=nav-with-icon__description>Set up a database with open-source ClickHouse.<br>ClickHouse</div></span></a><li class=ch-nav-v2-mobile-item><a href=https://clickhouse.com/integrations class="ch-nav-v2-link nav-with-icon "><div class=icon><svg xmlns=http://www.w3.org/2000/svg width=21 height=21 viewBox="0 0 21 21"><path fill=currentColor d="m20.754 14.577.006.1v3.221a2.86 2.86 0 0 1-2.655 2.855l-.207.007-3.208.002c-.35.002-.704-.222-.756-.642l-.007-.109a1 1 0 0 1 .007-.102l.008-.047c.056-.28.05-.568-.018-.845l-.048-.164a1.86 1.86 0 0 0-1.311-1.203 1.895 1.895 0 0 0-2.327 2.213.75.75 0 0 1-.636.892l-.1.006h-3.22a2.86 2.86 0 0 1-2.856-2.693l-.005-.169-.001-2.426-.194-.018a3.4 3.4 0 0 1-2.13-1.127l-.133-.161a3.4 3.4 0 0 1-.608-2.918A3.36 3.36 0 0 1 3.19 8.73l.229-.022V6.283c0-.69.25-1.355.698-1.873l.14-.151a2.86 2.86 0 0 1 1.818-.83l.207-.008 2.425-.001.019-.194a3.4 3.4 0 0 1 1.127-2.13l.161-.133a3.4 3.4 0 0 1 2.919-.608 3.365 3.365 0 0 1 2.518 2.835l.021.23h2.426c.69 0 1.355.25 1.873.698l.151.14c.488.489.782 1.135.83 1.818l.008.207V9.49c.003.35-.22.704-.64.756l-.11.007a1 1 0 0 1-.102-.007l-.047-.009a1.95 1.95 0 0 0-.845.019l-.164.048a1.86 1.86 0 0 0-1.203 1.311 1.895 1.895 0 0 0 2.087 2.348l.192-.031.099-.005.046.003.108.016.068.02.112.048.064.038.073.056.047.043a.74.74 0 0 1 .188.327l.02.1Zm-9.82-12.43a1.89 1.89 0 0 0-.696 1.876.75.75 0 0 1-.635.891l-.1.007H6.282a1.36 1.36 0 0 0-1.354 1.208l-.008.154-.001 3.178.002.03c.003.35-.221.704-.641.756l-.11.007a1 1 0 0 1-.102-.007l-.046-.009a1.96 1.96 0 0 0-.845.019l-.164.048a1.86 1.86 0 0 0-1.204 1.311 1.895 1.895 0 0 0 2.214 2.327.75.75 0 0 1 .891.635l.007.1v3.221c0 .708.54 1.29 1.23 1.355l.132.006 2.424.001.019-.194a3.4 3.4 0 0 1 1.127-2.13l.161-.134a3.4 3.4 0 0 1 2.918-.607 3.36 3.36 0 0 1 2.519 2.835l.021.229h2.426c.31 0 .609-.105.849-.296l.114-.102c.22-.22.356-.505.39-.81l.009-.154-.001-2.426-.193-.018a3.4 3.4 0 0 1-2.13-1.127l-.134-.161a3.4 3.4 0 0 1-.607-2.918 3.36 3.36 0 0 1 2.835-2.519l.229-.022.001-2.433-.008-.145a1.36 1.36 0 0 0-.288-.695l-.102-.114a1.36 1.36 0 0 0-.81-.39l-.154-.01h-3.221a.75.75 0 0 1-.735-.898 1.94 1.94 0 0 0-.065-1.009 1.87 1.87 0 0 0-1.312-1.204 1.9 1.9 0 0 0-1.631.339Z"/></svg></div><span>Discover more than 100 integrations.</span></a></ul><a href=https://clickhouse.com/integrations style=padding-left:60px class="LinkWithArrow_gmJP ch-nav-v2-desktop-item ch-nav-v2-link-with-arrow">Discover more than 100 integrations.<!-- --> <span class=LinkWithArrow__Arrow_QCtL><span class=LinkWithArrow__ArrowGhost_fSw7><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span><span class=LinkWithArrow__ArrowVisible_ZvLF><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span></span></a></div></div></div><li><div class="ch-nav-v2-item "><a href="" class="ch-nav-v2-link  has-children  undefined "><span>Use cases</span><span class=chevron><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right mobile-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron down desktop-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></span></a><div class="ch-nav-v2-item__children "><div class=""><ul class="ch-nav-v2-sub-nav-use-cases ch-nav-v2-list"><li><a href=https://clickhouse.com/use-cases/real-time-analytics class="ch-nav-v2-link  ">Real-time analytics</a><li><a href=https://clickhouse.com/use-cases/machine-learning-and-data-science class="ch-nav-v2-link  ">Machine Learning & Generative AI</a><li><a href=https://clickhouse.com/use-cases/data-warehousing class="ch-nav-v2-link  ">Business Intelligence</a><li><a href=https://clickhouse.com/use-cases/observability class="ch-nav-v2-link  ">Logs, Events, Traces</a><li class=ch-nav-v2-mobile-item><a href=https://clickhouse.com/use-cases class="ch-nav-v2-link  ">All use cases</a></ul><a href=https://clickhouse.com/use-cases class="LinkWithArrow_gmJP ch-nav-v2-desktop-item ch-nav-v2-link-with-arrow">All use cases<!-- --> <span class=LinkWithArrow__Arrow_QCtL><span class=LinkWithArrow__ArrowGhost_fSw7><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span><span class=LinkWithArrow__ArrowVisible_ZvLF><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16" class=LinkWithArrow__ArrowSvg_EHFy><path fill=currentColor fill-rule=nonzero d="m8.613.21.094.083 7 7c.029.028.055.059.08.09l-.08-.09a1.008 1.008 0 0 1 .292.675L16 8v.033l-.004.052L16 8a1.008 1.008 0 0 1-.22.625l-.073.082-7 7a1 1 0 0 1-1.497-1.32l.083-.094L12.585 9H1a1 1 0 0 1-.117-1.993L1 7h11.585L7.293 1.707A1 1 0 0 1 7.21.387l.083-.094A1 1 0 0 1 8.613.21Z"/></svg></span></span></a></div></div></div><li><div class="ch-nav-v2-item "><a href=https://clickhouse.com/docs class="ch-nav-v2-link    undefined "><span>Documentation</span></a></div><li><div class="ch-nav-v2-item "><a href="" class="ch-nav-v2-link  has-children  undefined "><span>Resources</span><span class=chevron><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right mobile-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron down desktop-chevron "><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></span></a><div class="ch-nav-v2-item__children "><div class=""><ul class="ch-nav-v2-sub-nav-resources ch-nav-v2-list"><li><a href=https://clickhouse.com/user-stories class="ch-nav-v2-link  ">User stories</a><li><a href=https://clickhouse.com/blog class="ch-nav-v2-link  ">Blog</a><li><a href=https://clickhouse.com/company/events class="ch-nav-v2-link  ">Events</a><li><a href=https://clickhouse.com/learn class="ch-nav-v2-link  ">Learning and certification</a><li><a href="" class="ch-nav-v2-link w-full items-center justify-between  "><span>Comparison</span><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 fill=none viewBox="0 0 6 10" class="ch-nav-v2-chevron right text-neutral-500"><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="m1 9 4-4-4-4"/></svg></a><ul class="ch-nav-v2-sub-nav ch-nav-v2-list "><li><a href=https://clickhouse.com/comparison/bigquery class="ch-nav-v2-link block w-full ">BigQuery</a><li><a href=https://clickhouse.com/comparison/postgresql class="ch-nav-v2-link block w-full ">PostgreSQL</a><li><a href=https://clickhouse.com/comparison/redshift class="ch-nav-v2-link block w-full ">Redshift</a><li><a href=https://clickhouse.com/comparison/rockset class="ch-nav-v2-link block w-full ">Rockset</a><li><a href=https://clickhouse.com/comparison/snowflake class="ch-nav-v2-link block w-full ">Snowflake</a></ul><li><a href=https://clickhouse.com/videos class="ch-nav-v2-link block w-full ">Video</a><li><a href=https://clickhouse.com/demos class="ch-nav-v2-link block w-full ">Demo</a></ul></div></div></div><li><div class="ch-nav-v2-item "><a href=/pricing class="ch-nav-v2-link    undefined "><span>Pricing</span></a></div><li><div class="ch-nav-v2-item "><a href="/company/contact?loc=nav" class="ch-nav-v2-link    undefined "><span>Contact</span></a></div></ul></div></nav><div class=navRight_Xotf><a href="https://github.com/ClickHouse/ClickHouse?utm_source=clickhouse&utm_medium=website&utm_campaign=website-nav" target=_blank class=githubStars_xKU0><div class=githubStarsContainer_fzg6><svg width=16 height=16 viewBox="0 0 16 16" fill=none xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd clip-rule=evenodd d="M8 1.75C4.27062 1.75 1.25 4.77062 1.25 8.5C1.25 11.4869 3.18219 14.0097 5.86531 14.9041C6.20281 14.9631 6.32937 14.7606 6.32937 14.5834C6.32937 14.4231 6.32094 13.8916 6.32094 13.3263C4.625 13.6384 4.18625 12.9128 4.05125 12.5331C3.97531 12.3391 3.64625 11.74 3.35938 11.5797C3.12312 11.4531 2.78562 11.1409 3.35094 11.1325C3.8825 11.1241 4.26219 11.6219 4.38875 11.8244C4.99625 12.8453 5.96656 12.5584 6.35469 12.3813C6.41375 11.9425 6.59094 11.6472 6.785 11.4784C5.28312 11.3097 3.71375 10.7275 3.71375 8.14563C3.71375 7.41156 3.97531 6.80406 4.40563 6.33156C4.33812 6.16281 4.10187 5.47094 4.47312 4.54281C4.47312 4.54281 5.03844 4.36563 6.32937 5.23469C6.86937 5.08281 7.44313 5.00687 8.01688 5.00687C8.59063 5.00687 9.16438 5.08281 9.70438 5.23469C10.9953 4.35719 11.5606 4.54281 11.5606 4.54281C11.9319 5.47094 11.6956 6.16281 11.6281 6.33156C12.0584 6.80406 12.32 7.40312 12.32 8.14563C12.32 10.7359 10.7422 11.3097 9.24031 11.4784C9.485 11.6894 9.69594 12.0944 9.69594 12.7272C9.69594 13.63 9.6875 14.3556 9.6875 14.5834C9.6875 14.7606 9.81406 14.9716 10.1516 14.9041C12.8178 14.0097 14.75 11.4784 14.75 8.5C14.75 4.77062 11.7294 1.75 8 1.75Z" fill=currentColor /></svg><span class=githubText_pqqB>46.0k</span></div></a><div class=mobileSearchBar_lGd9><a href=/docs/search class="DocSearch DocSearch-Button" aria-label=Search><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys><kbd class=DocSearch-Button-Key>Ctrl</kbd><kbd class=DocSearch-Button-Key>K</kbd></span></a></div><div class=signUp_pDjn><a href="https://console.clickhouse.cloud/signIn?loc=docs-nav-signIn-cta" class="sign-in navbar__link ch-menu signIn_n8kr">Sign in</a><a href="https://console.clickhouse.cloud/signUp?loc=docs-nav-signUp-cta" class=click-button-anchor><button class="click-button primary-btn">Get started</button></a></div><svg class=docsNavBurger_SkeB width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></div></div><div class="secondary-nav--items secondaryMenu_SZAs"><div class=dropdownCategoriesContainer_DwBX><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/introduction-clickhouse>Get started</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/cloud/overview>Cloud</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/updating-data>Manage data</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 docsNavSelected_x6p7" href=/docs/guides/manage-and-deploy-index>Server admin</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/sql-reference>Reference</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/integrations>Integrations</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/use-cases/observability/clickstack/overview>ClickStack</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/chdb>chDB</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class="docsNavDropdownContainer_cADf hasDropdown_sqVj"><span class=docsNavDropdownToolbarLink_WLn0><a class="docsNavDropdownToolbarTopLevelLink_lJY0 " href=/docs/about>About</a> <span style=margin-left:8px><svg xmlns=http://www.w3.org/2000/svg width=6 height=10 viewBox="0 0 6 10" style=width:6px;height:10px;fill:none;color:#6B7280;transform:rotate(90deg)><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M1 9L5 5 1 1"/></svg></span></span></div><div class=docsNavDropdownContainer_cADf><a class=docsNavDropdownToolbarTopLevelLink_lJY0 href=/docs/knowledgebase><span>Knowledge Base</span></a></div></div><div class="secondaryMenuRight_dXHH secondary-nav--items-right"><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_DSK9><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/operations/workload-scheduling target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en>English</a><li><a href=/docs/jp/operations/workload-scheduling target=_self rel="noopener noreferrer" class=dropdown__link lang=jp>日本語</a><li><a href=/docs/zh/operations/workload-scheduling target=_self rel="noopener noreferrer" class=dropdown__link lang=zh>中文</a><li><a href=/docs/ru/operations/workload-scheduling target=_self rel="noopener noreferrer" class=dropdown__link lang=ru>Русский</a></ul></div><button class="colorModeButton_EOjh navbar-color-toggle"><svg xmlns=http://www.w3.org/2000/svg fill=none width=31 height=31 viewBox="0 0 24 24" stroke-width=1.5 stroke=currentColor class="w-6 h-6" stroke-linecap=round stroke-linejoin=round><path stroke-linecap=round stroke-linejoin=round d="M18.3945 13.0269C18.7245 12.8719 19.0765 13.1969 18.9845 13.5499C18.6705 14.7519 18.0535 15.8959 17.1035 16.8459C14.2825 19.6669 9.76953 19.7259 7.02153 16.9779C4.27353 14.2299 4.33353 9.71589 7.15453 6.89489C8.10453 5.94489 9.24753 5.32789 10.4505 5.01389C10.8035 4.92189 11.1275 5.27389 10.9735 5.60389C9.97153 7.74289 10.3005 10.3049 11.9975 12.0019C13.6935 13.6999 16.2555 14.0289 18.3945 13.0269V13.0269Z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0 docsWrapper_bSxm"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docPage_F0g8><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_ktZT><div class=sidebarSearchContainer_qwgL><a href=/docs/search class="DocSearch DocSearch-Button" aria-label=Search><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys><kbd class=DocSearch-Button-Key>Ctrl</kbd><kbd class=DocSearch-Button-Key>K</kbd></span></a></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_qCLW" style=padding-top:1.75rem;margin-bottom:3.5rem;overflow-y:auto><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--active" href=/docs/guides/manage-and-deploy-index>Manage and deploy</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--sublist" aria-expanded=false tabindex=0 href=/docs/deployment-guides/index>Deployment and scaling</a><button aria-label="Toggle the collapsible sidebar category 'Deployment and scaling'" type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded=false tabindex=0 href=/docs/clickhouse-operator/overview>ClickHouse Operator</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/separation-storage-compute>Separation of storage and compute</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/sre/keeper/clickhouse-keeper>Configuring ClickHouse Keeper</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/sre/network-ports>Network ports</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/sre/scaling-clusters>Rebalancing shards</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/faq/operations/multi-region-replication>Does ClickHouse support multi-region replication?</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/faq/operations/production>Which ClickHouse version to use in production?</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/cluster-discovery>Cluster discovery</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/monitoring>Monitoring</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/opentelemetry>Tracing ClickHouse with OpenTelemetry</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/quotas>Quotas</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/ssl-zookeeper>Secured Communication with Zookeeper</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/startup-scripts>Startup scripts</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/storing-data>External disks for storing data</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/allocation-profiling>Allocation profiling</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded=false tabindex=0 href=/docs/operations/backup/overview>Backup/Restore</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--sublist" aria-expanded=false tabindex=0 href=/docs/operations/allocation-profiling>Allocation profiling</a><button aria-label="Toggle the collapsible sidebar category 'Allocation profiling'" type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/caches>Caches</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/operations/workload-scheduling>Workload scheduling</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/update>Self-managed Upgrade</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/troubleshooting>Troubleshooting</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/tips>OSS usage recommendations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/sql-reference/distributed-ddl>Distributed DDL</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class=menu__link href=/docs/operations/settings>Settings</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/overview>Settings Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/server-configuration-parameters/settings>Server Settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/settings>Session Settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/merge-tree-settings>MergeTree tables settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/formats>Format Settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/composable-protocols>Composable protocols</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/constraints-on-settings>Constraints on settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/memory-overcommit>Memory overcommit</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/permissions-for-queries>Permissions for queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/query-complexity>Restrictions on query complexity</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/server-overload>Server overload</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/query-level>Query-level Session Settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/settings-profiles>Settings profiles</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/settings-users>User Settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/named-collections>Named collections</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/configuration-files>Configuration Files</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/settings/tcp-connection-limits>TCP connection limits</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--sublist" aria-expanded=false href=/docs/operations/system-tables>System tables</a><button aria-label="Toggle the collapsible sidebar category 'System tables'" type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class=menu__link href=/docs/security-and-authentication>Security and authentication</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--sublist" aria-expanded=false tabindex=0 href=/docs/guides/sre/tls>TLS</a><button aria-label="Toggle the collapsible sidebar category 'TLS'" type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/access-rights>Users and roles</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class="menu__link menu__link--sublist" aria-expanded=false tabindex=0 href=/docs/operations/external-authenticators>External authenticators</a><button aria-label="Toggle the collapsible sidebar category 'External authenticators'" type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link=true><a class=menu__link href=/docs/operations/utilities>Tools and utilities</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/backupview>clickhouse_backupview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/clickhouse-benchmark>clickhouse-benchmark</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/clickhouse-compressor>clickhouse-compressor</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/clickhouse-disks>clickhouse-disks</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/clickhouse-format>clickhouse-format</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/clickhouse-keeper-client>clickhouse-keeper-client</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/clickhouse-local>clickhouse-local</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/clickhouse-obfuscator>clickhouse-obfuscator</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/odbc-bridge>clickhouse-odbc-bridge</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/operations/utilities/static-files-disk-uploader>clickhouse-static-files-disk-uploader</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/getting-started/playground>ClickHouse playground</a></ul></ul></nav></div></div></aside><main class=docMainContainer_Vlkt><div class="container padding-bottom--lg main-content-wrapper docItemWrapper_GJ0o"><div class=row style=flex-wrap:nowrap><div class="col docItemCol_PW1h"><div class=docItemContainer_F8S3><article><div class=docHeaderContainer_yf04><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumb navigation"><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/docs/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_xK9p><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/guides/manage-and-deploy-index><span itemprop=name>Manage and deploy</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Workload scheduling</span><meta itemprop=position content=2></ul></nav><a href=https://github.com/ClickHouse/ClickHouse/tree/master/docs/en/operations/workload-scheduling.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="theme-doc-markdown markdown"><header><h1>Workload scheduling</h1></header><p>When ClickHouse execute multiple queries simultaneously, they may be using shared resources (e.g. disks and CPU cores). Scheduling constraints and policies can be applied to regulate how resources are utilized and shared between different workloads. For all resources a common scheduling hierarchy can be configured. Hierarchy root represents shared resources, while leafs are specific workloads, holding requests that exceed resource capacity.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Currently <a href=#disk_config>remote disk IO</a> and <a href=#cpu_scheduling>CPU</a> can be scheduled using described method. For flexible memory limits see <a href=/docs/operations/settings/memory-overcommit>Memory overcommit</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=disk_config>Disk configuration<a href=#disk_config class=hash-link aria-label="Direct link to Disk configuration" title="Direct link to Disk configuration">​</a></h2>
<p>To enable IO workload scheduling for a specific disk, you have to create read and write resources for WRITE and READ access:</p>
<div class=wrapper_EBtA style=height:75.4px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE resource_name (WRITE DISK disk_name, READ DISK disk_name)
-- or
CREATE RESOURCE read_resource_name (WRITE DISK write_disk_name)
CREATE RESOURCE write_resource_name (READ DISK read_disk_name)
</code></pre></div><div class=activity_PoTP></div></div>
<p>Resource could be used for any number of disks for READ or WRITE or both for READ and WRITE. There is a syntax allowing to use a resource for all the disks:</p>
<div class=wrapper_EBtA style=height:18.85px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE all_io (READ ANY DISK, WRITE ANY DISK);
</code></pre></div><div class=activity_PoTP></div></div>
<p>An alternative way to express which disks are used by a resource is server's <code>storage_configuration</code>:</p>
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Workload scheduling using clickhouse configuration is deprecated. SQL syntax should be used instead.</div></div>
<p>To enable IO scheduling for a specific disk, you have to specify <code>read_resource</code> and/or <code>write_resource</code> in storage configuration. It says ClickHouse what resource should be used for every read and write requests with given disk. Read and write resource can refer to the same resource name, which is useful for local SSDs or HDDs. Multiple different disks also can refer to the same resource, which is useful for remote disks: if you want to be able to allow fair division of network bandwidth between e.g. "production" and "development" workloads.</p>
<p>Example:</p>
<div class=wrapper_EBtA style=height:452.40000000000003px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-xml><code class=language-xml>&lt;clickhouse>
    &lt;storage_configuration>
        ...
        &lt;disks>
            &lt;s3>
                &lt;type>s3&lt;/type>
                &lt;endpoint>https://clickhouse-public-datasets.s3.amazonaws.com/my-bucket/root-path/&lt;/endpoint>
                &lt;access_key_id>your_access_key_id&lt;/access_key_id>
                &lt;secret_access_key>your_secret_access_key&lt;/secret_access_key>
                &lt;read_resource>network_read&lt;/read_resource>
                &lt;write_resource>network_write&lt;/write_resource>
            &lt;/s3>
        &lt;/disks>
        &lt;policies>
            &lt;s3_main>
                &lt;volumes>
                    &lt;main>
                        &lt;disk>s3&lt;/disk>
                    &lt;/main>
                &lt;/volumes>
            &lt;/s3_main>
        &lt;/policies>
    &lt;/storage_configuration>
&lt;/clickhouse>
</code></pre></div><div class=activity_PoTP></div></div>
<p>Note that server configuration options have priority over SQL way to define resources.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=workload_markup>Workload markup<a href=#workload_markup class=hash-link aria-label="Direct link to Workload markup" title="Direct link to Workload markup">​</a></h2>
<p>Queries can be marked with setting <code>workload</code> to distinguish different workloads. If <code>workload</code> is not set, than value "default" is used. Note that you are able to specify the other value using settings profiles. Setting constraints can be used to make <code>workload</code> constant if you want all queries from the user to be marked with fixed value of <code>workload</code> setting.</p>
<p>It is possible to assign a <code>workload</code> setting for background activities. Merges and mutations are using <code>merge_workload</code> and <code>mutation_workload</code> server settings correspondingly. These values can also be overridden for specific tables using <code>merge_workload</code> and <code>mutation_workload</code> merge tree settings</p>
<p>Let's consider an example of a system with two different workloads: "production" and "development".</p>
<div class=wrapper_EBtA style=height:37.7px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>SELECT count() FROM my_table WHERE value = 42 SETTINGS workload = 'production'
SELECT count() FROM my_table WHERE value = 13 SETTINGS workload = 'development'
</code></pre></div><div class=activity_PoTP></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=hierarchy>Resource scheduling hierarchy<a href=#hierarchy class=hash-link aria-label="Direct link to Resource scheduling hierarchy" title="Direct link to Resource scheduling hierarchy">​</a></h2>
<p>From the standpoint of scheduling subsystem a resource represents a hierarchy of scheduling nodes.</p>
<!-- -->
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Workload scheduling using clickhouse configuration is deprecated. SQL syntax should be used instead. SQL syntax creates all necessary scheduling nodes automatically and the following scheduling node description should be considered as lower level implementation details, accessible through <a href=/docs/operations/system-tables/scheduler>system.scheduler</a> table.</div></div>
<p><strong>Possible node types:</strong></p>
<ul class=custom-ul>
<li class=custom-li><code>inflight_limit</code> (constraint) - blocks if either number of concurrent in-flight requests exceeds <code>max_requests</code>, or their total cost exceeds <code>max_cost</code>; must have a single child.</li>
<li class=custom-li><code>bandwidth_limit</code> (constraint) - blocks if current bandwidth exceeds <code>max_speed</code> (0 means unlimited) or burst exceeds <code>max_burst</code> (by default equals <code>max_speed</code>); must have a single child.</li>
<li class=custom-li><code>fair</code> (policy) - selects the next request to serve from one of its children nodes according to max-min fairness; children nodes can specify <code>weight</code> (default is 1).</li>
<li class=custom-li><code>priority</code> (policy) - selects the next request to serve from one of its children nodes according to static priorities (lower value means higher priority); children nodes can specify <code>priority</code> (default is 0).</li>
<li class=custom-li><code>fifo</code> (queue) - leaf of the hierarchy capable of holding requests that exceed resource capacity.</li>
</ul>
<p>To be able to use the full capacity of the underlying resource, you should use <code>inflight_limit</code>. Note that a low number of <code>max_requests</code> or <code>max_cost</code> could lead to not full resource utilization, while too high numbers could lead to empty queues inside the scheduler, which in turn will result in policies being ignored (unfairness or ignoring of priorities) in the subtree. On the other hand, if you want to protect resources from too high utilization, you should use <code>bandwidth_limit</code>. It throttles when the amount of resource consumed in <code>duration</code> seconds exceeds <code>max_burst + max_speed * duration</code> bytes. Two <code>bandwidth_limit</code> nodes on the same resource could be used to limit peak bandwidth during short intervals and average bandwidth for longer ones.</p>
<p>The following example shows how to define IO scheduling hierarchies shown in the picture:</p>
<div class=wrapper_EBtA style=height:678.6px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-xml><code class=language-xml>&lt;clickhouse>
    &lt;resources>
        &lt;network_read>
            &lt;node path="/">
                &lt;type>inflight_limit&lt;/type>
                &lt;max_requests>100&lt;/max_requests>
            &lt;/node>
            &lt;node path="/fair">
                &lt;type>fair&lt;/type>
            &lt;/node>
            &lt;node path="/fair/prod">
                &lt;type>fifo&lt;/type>
                &lt;weight>3&lt;/weight>
            &lt;/node>
            &lt;node path="/fair/dev">
                &lt;type>fifo&lt;/type>
            &lt;/node>
        &lt;/network_read>
        &lt;network_write>
            &lt;node path="/">
                &lt;type>inflight_limit&lt;/type>
                &lt;max_requests>100&lt;/max_requests>
            &lt;/node>
            &lt;node path="/fair">
                &lt;type>fair&lt;/type>
            &lt;/node>
            &lt;node path="/fair/prod">
                &lt;type>fifo&lt;/type>
                &lt;weight>3&lt;/weight>
            &lt;/node>
            &lt;node path="/fair/dev">
                &lt;type>fifo&lt;/type>
            &lt;/node>
        &lt;/network_write>
    &lt;/resources>
&lt;/clickhouse>
</code></pre></div><div class=activity_PoTP></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=workload_classifiers>Workload classifiers<a href=#workload_classifiers class=hash-link aria-label="Direct link to Workload classifiers" title="Direct link to Workload classifiers">​</a></h2>
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Workload scheduling using clickhouse configuration is deprecated. SQL syntax should be used instead. Classifiers are created automatically when using SQL syntax.</div></div>
<p>Workload classifiers are used to define mapping from <code>workload</code> specified by a query into leaf-queues that should be used for specific resources. At the moment, workload classification is simple: only static mapping is available.</p>
<p>Example:</p>
<div class=wrapper_EBtA style=height:301.6px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-xml><code class=language-xml>&lt;clickhouse>
    &lt;workload_classifiers>
        &lt;production>
            &lt;network_read>/fair/prod&lt;/network_read>
            &lt;network_write>/fair/prod&lt;/network_write>
        &lt;/production>
        &lt;development>
            &lt;network_read>/fair/dev&lt;/network_read>
            &lt;network_write>/fair/dev&lt;/network_write>
        &lt;/development>
        &lt;default>
            &lt;network_read>/fair/dev&lt;/network_read>
            &lt;network_write>/fair/dev&lt;/network_write>
        &lt;/default>
    &lt;/workload_classifiers>
&lt;/clickhouse>
</code></pre></div><div class=activity_PoTP></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=workloads>Workload hierarchy<a href=#workloads class=hash-link aria-label="Direct link to Workload hierarchy" title="Direct link to Workload hierarchy">​</a></h2>
<p>ClickHouse provides convenient SQL syntax to define scheduling hierarchy. All resources that were created with <code>CREATE RESOURCE</code> share the same structure of the hierarchy, but could differ in some aspects. Every workload created with <code>CREATE WORKLOAD</code> maintains a few automatically created scheduling nodes for every resource. A child workload can be created inside another parent workload. Here is the example that defines exactly the same hierarchy as XML configuration above:</p>
<div class=wrapper_EBtA style=height:94.25px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE network_write (WRITE DISK s3)
CREATE RESOURCE network_read (READ DISK s3)
CREATE WORKLOAD all SETTINGS max_io_requests = 100
CREATE WORKLOAD development IN all
CREATE WORKLOAD production IN all SETTINGS weight = 3
</code></pre></div><div class=activity_PoTP></div></div>
<p>The name of a leaf workload without children could be used in query settings <code>SETTINGS workload = 'name'</code>.</p>
<p>To customize workload the following settings could be used:</p>
<ul class=custom-ul>
<li class=custom-li><code>priority</code> - sibling workloads are served according to static priority values (lower value means higher priority).</li>
<li class=custom-li><code>weight</code> - sibling workloads having the same static priority share resources according to weights.</li>
<li class=custom-li><code>max_io_requests</code> - the limit on the number of concurrent IO requests in this workload.</li>
<li class=custom-li><code>max_bytes_inflight</code> - the limit on the total inflight bytes for concurrent requests in this workload.</li>
<li class=custom-li><code>max_bytes_per_second</code> - the limit on byte read or write rate of this workload.</li>
<li class=custom-li><code>max_burst_bytes</code> - the maximum number of bytes that could be processed by the workload without being throttled (for every resource independently).</li>
<li class=custom-li><code>max_concurrent_threads</code> - the limit on the number of threads for queries in this workload.</li>
<li class=custom-li><code>max_concurrent_threads_ratio_to_cores</code> - the same as <code>max_concurrent_threads</code>, but normalized to the number of available CPU cores.</li>
<li class=custom-li><code>max_cpus</code> - the limit on the number of CPU cores to serve queries in this workload.</li>
<li class=custom-li><code>max_cpu_share</code> - the same as <code>max_cpus</code>, but normalized to the number of available CPU cores.</li>
<li class=custom-li><code>max_burst_cpu_seconds</code> - the maximum number of CPU seconds that could be consumed by the workload without being throttled due to <code>max_cpus</code>.</li>
</ul>
<p>All limits specified through workload settings are independent for every resource. For example workload with <code>max_bytes_per_second = 10485760</code> will have 10 MB/s bandwidth limit for every read and write resource independently. If common limit for reading and writing is required, consider using the same resource for READ and WRITE access.</p>
<p>There is no way to specify different hierarchies of workloads for different resources. But there is a way to specify different workload setting value for a specific resource:</p>
<div class=wrapper_EBtA style=height:18.85px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE OR REPLACE WORKLOAD all SETTINGS max_io_requests = 100, max_bytes_per_second = 1000000 FOR network_read, max_bytes_per_second = 2000000 FOR network_write
</code></pre></div><div class=activity_PoTP></div></div>
<p>Also note that workload or resource could not be dropped if it is referenced from another workload. To update a definition of a workload use <code>CREATE OR REPLACE WORKLOAD</code> query.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Workload settings are translated into a proper set of scheduling nodes. For lower-level details, see the description of the scheduling node <a href=#hierarchy>types and options</a>.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=cpu_scheduling>CPU scheduling<a href=#cpu_scheduling class=hash-link aria-label="Direct link to CPU scheduling" title="Direct link to CPU scheduling">​</a></h2>
<p>To enable CPU scheduling for workloads create CPU resource and set a limit for the number of concurrent threads:</p>
<div class=wrapper_EBtA style=height:37.7px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE cpu (MASTER THREAD, WORKER THREAD)
CREATE WORKLOAD all SETTINGS max_concurrent_threads = 100
</code></pre></div><div class=activity_PoTP></div></div>
<p>When ClickHouse server executes many concurrent queries with <a href=/docs/operations/settings/settings#max_threads>multiple threads</a> and all CPU slots are in use the overload state is reached. In the overload state every released CPU slot is rescheduled to proper workload according to scheduling policies. For queries sharing the same workload, slots are allocated using round robin. For queries in separate workloads, slots are allocated according to weights, priorities, and limits specified for workloads.</p>
<p>CPU time is consumed by threads when they are not blocked and work on CPU-intensive tasks. For scheduling purpose, two kinds of threads are distinguished:</p>
<ul class=custom-ul>
<li class=custom-li>Master thread — the first thread that starts working on a query or background activity like a merge or a mutation.</li>
<li class=custom-li>Worker thread — the additional threads that master can spawn to work on CPU-intensive tasks.</li>
</ul>
<p>It may be desirable to use separate resources for master and worker threads to achieve better responsiveness. A high number of worker threads can easily monopolize CPU resource when high <code>max_threads</code> query setting values are used. Then incoming queries should block and wait a CPU slot for its master thread to start execution. To avoid this the following configuration could be used:</p>
<div class=wrapper_EBtA style=height:56.550000000000004px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE worker_cpu (WORKER THREAD)
CREATE RESOURCE master_cpu (MASTER THREAD)
CREATE WORKLOAD all SETTINGS max_concurrent_threads = 100 FOR worker_cpu, max_concurrent_threads = 1000 FOR master_cpu
</code></pre></div><div class=activity_PoTP></div></div>
<p>It will create separate limits on master and worker threads. Even if all 100 worker CPU slots are busy, new queries will not be blocked until there are available master CPU slots. They will start execution with one thread. Later if worker CPU slots became available, such queries could upscale and spawn their worker threads. On the other hand, such an approach does not bind the total number of slots to the number of CPU processors, and running too many concurrent threads will affect performance.</p>
<p>Limiting the concurrency of master threads will not limit the number of concurrent queries. CPU slots could be released in the middle of the query execution and reacquired by other threads. For example, 4 concurrent queries with 2 concurrent master thread limit could all be executed in parallel. In this case, every query will receive 50% of a CPU processor. A separate logic should be used to limit the number of concurrent queries and it is not currently supported for workloads.</p>
<p>Separate thread concurrency limits could be used for workloads:</p>
<div class=wrapper_EBtA style=height:113.10000000000001px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE cpu (MASTER THREAD, WORKER THREAD)
CREATE WORKLOAD all
CREATE WORKLOAD admin IN all SETTINGS max_concurrent_threads = 10
CREATE WORKLOAD production IN all SETTINGS max_concurrent_threads = 100
CREATE WORKLOAD analytics IN production SETTINGS max_concurrent_threads = 60, weight = 9
CREATE WORKLOAD ingestion IN production
</code></pre></div><div class=activity_PoTP></div></div>
<p>This configuration example provides independent CPU slot pools for admin and production. The production pool is shared between analytics and ingestion. Furthermore, if the production pool is overloaded, 9 of 10 released slots will be rescheduled to analytical queries if necessary. The ingestion queries would only receive 1 of 10 slots during overload periods. This might improve the latency of user-facing queries. Analytics has its own limit of 60 concurrent thread, always leaving at least 40 threads to support ingestion. When there is no overload, ingestion could use all 100 threads.</p>
<p>To exclude a query from CPU scheduling set a query setting <a href=/docs/operations/settings/settings#use_concurrency_control>use_concurrency_control</a> to 0.</p>
<p>CPU scheduling is not supported for merges and mutations yet.</p>
<p>To provide fair allocations for workload it is necessary to perform preemption and down-scaling during query execution. Preemption is enabled with <code>cpu_slot_preemption</code> server setting. If it is enabled, every threads renews its CPU slot periodically (according to <code>cpu_slot_quantum_ns</code> server setting). Such a renewal can block execution if CPU is overloaded. When execution is blocked for prolonged time (see <code>cpu_slot_preemption_timeout_ms</code> server setting), then query scales down and the number of concurrently running threads decreases dynamically. Note that CPU time fairness is guaranteed between workloads, but between queries inside the same workload it might be violated in some corner cases.</p>
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Slot scheduling provides a way to control <a href=/docs/operations/settings/settings#max_threads>query concurrency</a> but does not guarantee fair CPU time allocation unless server setting <code>cpu_slot_preemption</code> is set to <code>true</code>, otherwise fairness is provided based on number of CPU slot allocations among competing workloads. It does not imply equal amount of CPU seconds because without preemption CPU slot may be held indefinitely. A thread acquires a slot at the beginning and release when work is done.</div></div>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Declaring CPU resource disables effect of <a href=/docs/operations/server-configuration-parameters/settings#concurrent_threads_soft_limit_num><code>concurrent_threads_soft_limit_num</code></a> and <a href=/docs/operations/server-configuration-parameters/settings#concurrent_threads_soft_limit_ratio_to_cores><code>concurrent_threads_soft_limit_ratio_to_cores</code></a> settings. Instead, workload setting <code>max_concurrent_threads</code> is used to limit the number of CPUs allocated for a specific workload. To achieve the previous behavior create only WORKER THREAD resource, set <code>max_concurrent_threads</code> for the workload <code>all</code> to the same value as <code>concurrent_threads_soft_limit_num</code> and use <code>workload = "all"</code> query setting. This configuration corresponds to <a href=/docs/operations/server-configuration-parameters/settings#concurrent_threads_scheduler><code>concurrent_threads_scheduler</code></a> setting set "fair_round_robin" value.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=threads_vs_cpus>Threads vs. CPUs<a href=#threads_vs_cpus class=hash-link aria-label="Direct link to Threads vs. CPUs" title="Direct link to Threads vs. CPUs">​</a></h2>
<p>There are two way to control CPU consumption of a workload:</p>
<ul class=custom-ul>
<li class=custom-li>Thread number limit: <code>max_concurrent_threads</code> and <code>max_concurrent_threads_ratio_to_cores</code></li>
<li class=custom-li>CPU throttling: <code>max_cpus</code>, <code>max_cpu_share</code> and <code>max_burst_cpu_seconds</code></li>
</ul>
<p>The first allows one to dynamically control how many threads are spawned for a query, depending on the current server load. It effectively lowers what <code>max_threads</code> query setting dictates. The second throttles CPU consumption of the workload using token bucket algorithm. It does not affect thread number directly, but throttles the total CPU consumption of all threads in the workload.</p>
<p>Token bucket throttling with <code>max_cpus</code> and <code>max_burst_cpu_seconds</code> means the following. During any interval of <code>delta</code> seconds the total CPU consumption by all queries in workload is not allowed to be greater than <code>max_cpus * delta + max_burst_cpu_seconds</code> CPU seconds. It limits average consumption by <code>max_cpus</code> in long-term, but this limit might be exceeded in short-term. For example, given <code>max_burst_cpu_seconds = 60</code> and <code>max_cpus=0.001</code>, one is allowed to run either 1 thread for 60 seconds or 2 threads for 30 seconds or 60 threads for 1 seconds without being throttled. Default value for <code>max_burst_cpu_seconds</code> is 1 second. Lower values may lead to under-utilization of allowed <code>max_cpus</code> cores given many concurrent threads.</p>
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>CPU throttling settings are active only if <code>cpu_slot_preemption</code> server setting is enabled and ignored otherwise.</div></div>
<p>While holding a CPU slot a thread could be in one of there main states:</p>
<ul class=custom-ul>
<li class=custom-li><strong>Running:</strong> Effectively consuming CPU resource. Time spent in this state in accounted by the CPU throttling.</li>
<li class=custom-li><strong>Ready:</strong> Waiting for a CPU to became available. Not accounted by CPU throttling.</li>
<li class=custom-li><strong>Blocked:</strong> Doing IO operations or other blocking syscalls (e.g. waiting on a mutex). Not accounted by CPU throttling.</li>
</ul>
<p>Let's consider an example of configuration that combines both CPU throttling and thread number limits:</p>
<div class=wrapper_EBtA style=height:131.95000000000002px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE cpu (MASTER THREAD, WORKER THREAD)
CREATE WORKLOAD all SETTINGS max_concurrent_threads_ratio_to_cores = 2
CREATE WORKLOAD admin IN all SETTINGS max_concurrent_threads = 2, priority = -1
CREATE WORKLOAD production IN all SETTINGS weight = 4
CREATE WORKLOAD analytics IN production SETTINGS max_cpu_share = 0.7, weight = 3
CREATE WORKLOAD ingestion IN production
CREATE WORKLOAD development IN all SETTINGS max_cpu_share = 0.3
</code></pre></div><div class=activity_PoTP></div></div>
<p>Here we limit the total number of threads for all queries to be x2 of the available CPUs. Admin workload is limited to exactly two threads at most, regardless of the number of available CPUs. Admin has priority -1 (less than default 0) and it gets any CPU slot first if required. When the admin does not run queries, CPU resources are divided among production and development workloads. Guaranteed shares of CPU time are based on weights (4 to 1): At least 80% goes to production (if required), and at least 20% goes to development (if required). While weights form guarantees, CPU throttling forms limits: production is not limited and can consume 100%, while development has a limit of 30%, which is applied even if there are no queries from other workloads. Production workload is not a leaf, so its resources are split among analytics and ingestion according to weights (3 to 1). It means that analytics has a guarantee of at least 0.8 * 0.75 = 60%, and based on <code>max_cpu_share</code>, it has a limit of 70% of total CPU resources. While ingestion is left with a guarantee of at least 0.8 * 0.25 = 20%, it has no upper limit.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>If you want to maximize CPU utilization on your ClickHouse server, avoid using <code>max_cpus</code> and <code>max_cpu_share</code> for the root workload <code>all</code>. Instead, set a higher value for <code>max_concurrent_threads</code>. For example, on a system with 8 CPUs, set <code>max_concurrent_threads = 16</code>. This allows 8 threads to run CPU tasks while 8 other threads can handle I/O operations. Additional threads will create CPU pressure, ensuring scheduling rules are enforced. In contrast, setting <code>max_cpus = 8</code> will never create CPU pressure because the server cannot exceed the 8 available CPUs.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=query_scheduling>Query slot scheduling<a href=#query_scheduling class=hash-link aria-label="Direct link to Query slot scheduling" title="Direct link to Query slot scheduling">​</a></h2>
<p>To enable query slot scheduling for workloads create QUERY resource and set a limit for the number of concurrent queries or queries per second:</p>
<div class=wrapper_EBtA style=height:37.7px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-sql><code class=language-sql>CREATE RESOURCE query (QUERY)
CREATE WORKLOAD all SETTINGS max_concurrent_queries = 100, max_queries_per_second = 10, max_burst_queries = 20
</code></pre></div><div class=activity_PoTP></div></div>
<p>Workload setting <code>max_concurrent_queries</code> limits the number of concurrent queries that could run simultaneously for a given workload. This is analog of query <a href=/docs/operations/settings/settings#max_concurrent_queries_for_all_users><code>max_concurrent_queries_for_all_users</code></a> and server <a href=/docs/operations/server-configuration-parameters/settings#max_concurrent_queries>max_concurrent_queries</a> settings. Async insert queries and some specific queries like KILL are not counted towards the limit.</p>
<p>Workload settings <code>max_queries_per_second</code> and <code>max_burst_queries</code> limit number of queries for the workload with a token bucket throttler. It guarantees that during any time interval <code>T</code> no more than <code>max_queries_per_second * T + max_burst_queries</code> new queries will start execution.</p>
<p>Workload setting <code>max_waiting_queries</code> limits number of waiting queries for the workload. When the limit is reached, the server returns an error <code>SERVER_OVERLOADED</code>.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Blocked queries will wait indefinitely and not appear in <code>SHOW PROCESSLIST</code> until all constraints are satisfied.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=workload_entity_storage>Workloads and resources storage<a href=#workload_entity_storage class=hash-link aria-label="Direct link to Workloads and resources storage" title="Direct link to Workloads and resources storage">​</a></h2>
<p>Definitions of all workloads and resources in the form of <code>CREATE WORKLOAD</code> and <code>CREATE RESOURCE</code> queries are stored persistently either on disk at <code>workload_path</code> or in ZooKeeper at <code>workload_zookeeper_path</code>. ZooKeeper storage is recommended to achieve consistency between nodes. Alternatively <code>ON CLUSTER</code> clause could be used along with disk storage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=config_based_workloads>Configuration-based workloads and resources<a href=#config_based_workloads class=hash-link aria-label="Direct link to Configuration-based workloads and resources" title="Direct link to Configuration-based workloads and resources">​</a></h2>
<p>In addition to SQL-based definitions, workloads and resources can be predefined in the server configuration file. This is useful in cloud environments where some limitations are dictated by infrastructure, while other limits could be changed by customers. Configuration-based entities have priority over SQL-defined ones and cannot be modified or deleted using SQL commands.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=config_based_workloads_format>Configuration format<a href=#config_based_workloads_format class=hash-link aria-label="Direct link to Configuration format" title="Direct link to Configuration format">​</a></h3>
<div class=wrapper_EBtA style=height:150.8px><div style=position:absolute;left:-9999px;top:-9999px;opacity:0;pointer-events:none;width:1px;height:1px;overflow:hidden><pre class=language-xml><code class=language-xml>&lt;clickhouse>
    &lt;resources_and_workloads>
        CREATE RESOURCE s3disk_read (READ DISK s3);
        CREATE RESOURCE s3disk_write (WRITE DISK s3);
        CREATE WORKLOAD all SETTINGS max_io_requests = 500 FOR s3disk_read, max_io_requests = 1000 FOR s3disk_write, max_bytes_per_second = 1342177280 FOR s3disk_read, max_bytes_per_second = 3355443200 FOR s3disk_write;
        CREATE WORKLOAD production IN all SETTINGS weight = 3;
    &lt;/resources_and_workloads>
&lt;/clickhouse>
</code></pre></div><div class=activity_PoTP></div></div>
<p>The configuration uses the same SQL syntax as <code>CREATE WORKLOAD</code> and <code>CREATE RESOURCE</code> statements. All queries must be valid.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=config_based_workloads_usage_recommendations>Usage recommendations<a href=#config_based_workloads_usage_recommendations class=hash-link aria-label="Direct link to Usage recommendations" title="Direct link to Usage recommendations">​</a></h3>
<p>For cloud environments, a typical setup might include:</p>
<ol class=custom-ol>
<li class=custom-li>Define root workload and network IO resources in configuration to set infrastructure limits</li>
<li class=custom-li>Set <code>throw_on_unknown_workload</code> to enforce these limits</li>
<li class=custom-li>Create a <code>CREATE WORKLOAD default IN all</code> to automatically apply limits to all queries (since the default value for <code>workload</code> query setting is 'default')</li>
<li class=custom-li>Allow users to create additional workloads within the configured hierarchy</li>
</ol>
<p>This ensures that all background activities and queries respect the infrastructure limitations while still allowing flexibility for user-specific scheduling policies.</p>
<p>Another use case is different configuration for different nodes in a heterogeneous cluster.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=strict_resource_access>Strict resource access<a href=#strict_resource_access class=hash-link aria-label="Direct link to Strict resource access" title="Direct link to Strict resource access">​</a></h2>
<p>To enforce all queries to follow resource scheduling policies there is a server setting <code>throw_on_unknown_workload</code>. If it is set to <code>true</code> then every query is required to use valid <code>workload</code> query setting, otherwise <code>RESOURCE_ACCESS_DENIED</code> exception is thrown. If it is set to <code>false</code> then such a query does not use resource scheduler, i.e. it will get unlimited access to any <code>RESOURCE</code>. Query setting 'use_concurrency_control = 0' allows query to avoid CPU scheduler and get unlimited access to CPU. To enforce CPU scheduling create a setting constraint to keep 'use_concurrency_control' read-only constant value.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div><div class="alert-content admonitionContent_vXIg"><div class=admonitionHeading_TMsN>Note</div><p>Do not set <code>throw_on_unknown_workload</code> to <code>true</code> unless <code>CREATE WORKLOAD default</code> is executed. It could lead to server startup issues if a query without explicit setting <code>workload</code> is executed during startup.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=see-also>See also<a href=#see-also class=hash-link aria-label="Direct link to See also" title="Direct link to See also">​</a></h2>
<ul class=custom-ul>
<li class=custom-li><a href=/docs/operations/system-tables/scheduler>system.scheduler</a></li>
<li class=custom-li><a href=/docs/operations/system-tables/workloads>system.workloads</a></li>
<li class=custom-li><a href=/docs/operations/system-tables/resources>system.resources</a></li>
<li class=custom-li><a href=/docs/operations/settings/merge-tree-settings#merge_workload>merge_workload</a> merge tree setting</li>
<li class=custom-li><a href=/docs/operations/server-configuration-parameters/settings#merge_workload>merge_workload</a> global server setting</li>
<li class=custom-li><a href=/docs/operations/settings/merge-tree-settings#mutation_workload>mutation_workload</a> merge tree setting</li>
<li class=custom-li><a href=/docs/operations/server-configuration-parameters/settings#mutation_workload>mutation_workload</a> global server setting</li>
<li class=custom-li><a href=/docs/operations/server-configuration-parameters/settings#workload_path>workload_path</a> global server setting</li>
<li class=custom-li><a href=/docs/operations/server-configuration-parameters/settings#workload_zookeeper_path>workload_zookeeper_path</a> global server setting</li>
<li class=custom-li><a href=/docs/operations/server-configuration-parameters/settings#cpu_slot_preemption>cpu_slot_preemption</a> global server setting</li>
<li class=custom-li><a href=/docs/operations/server-configuration-parameters/settings#cpu_slot_quantum_ns>cpu_slot_quantum_ns</a> global server setting</li>
<li class=custom-li><a href=/docs/operations/server-configuration-parameters/settings#cpu_slot_preemption_timeout_ms>cpu_slot_preemption_timeout_ms</a> global server setting</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href=/docs/operations/caches><svg width=24 height=25 viewBox="0 0 24 25" fill=none xmlns=http://www.w3.org/2000/svg><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill=currentColor /></svg><div class=paginationNavContent__3xr><div class=pagination-nav__sublabel>Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">Caches</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href=/docs/operations/update><div class=paginationNavContent__3xr><div class=pagination-nav__sublabel>Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">Self-managed Upgrade</div></div><svg width=24 height=25 viewBox="0 0 24 25" fill=none xmlns=http://www.w3.org/2000/svg><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill=currentColor /></svg></a></nav></div></div><div class="tocSidebar_cg0C col col--3"><div class="docTOCContainer_yhWY theme-doc-toc-desktop-container"><div class="tableOfContents_bqdL thin-scrollbar docTOC_QrVz theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#disk_config class="table-of-contents__link toc-highlight">Disk configuration</a><li><a href=#workload_markup class="table-of-contents__link toc-highlight">Workload markup</a><li><a href=#hierarchy class="table-of-contents__link toc-highlight">Resource scheduling hierarchy</a><li><a href=#workload_classifiers class="table-of-contents__link toc-highlight">Workload classifiers</a><li><a href=#workloads class="table-of-contents__link toc-highlight">Workload hierarchy</a><li><a href=#cpu_scheduling class="table-of-contents__link toc-highlight">CPU scheduling</a><li><a href=#threads_vs_cpus class="table-of-contents__link toc-highlight">Threads vs. CPUs</a><li><a href=#query_scheduling class="table-of-contents__link toc-highlight">Query slot scheduling</a><li><a href=#workload_entity_storage class="table-of-contents__link toc-highlight">Workloads and resources storage</a><li><a href=#config_based_workloads class="table-of-contents__link toc-highlight">Configuration-based workloads and resources</a><ul><li><a href=#config_based_workloads_format class="table-of-contents__link toc-highlight">Configuration format</a><li><a href=#config_based_workloads_usage_recommendations class="table-of-contents__link toc-highlight">Usage recommendations</a></ul><li><a href=#strict_resource_access class="table-of-contents__link toc-highlight">Strict resource access</a><li><a href=#see-also class="table-of-contents__link toc-highlight">See also</a></ul></div><div><div class=displayFeedback_Qo8B><div class="sc-1q78udp-0 gXLeMB"><div type=button aria-haspopup=dialog aria-expanded=false aria-controls=radix-:Rlalj5lb6h: data-state=closed class="sc-1dii14g-0 buBXLQ"><div><p class="sc-6r74pj-0 iPDoKp">Was this page helpful?</div><div class="mt-[6px] flex"><div class="Button_OQ45 dark_oAth"><svg width=12 height=12 viewBox="0 0 16 16" fill=none xmlns=http://www.w3.org/2000/svg role=img aria-label=thumbs-up style=display:block;margin:auto><g clip-path=url(#clip0_110_3987)><path d="M2 6.5H5V13H2C1.86739 13 1.74021 12.9473 1.64645 12.8536C1.55268 12.7598 1.5 12.6326 1.5 12.5V7C1.5 6.86739 1.55268 6.74021 1.64645 6.64645C1.74021 6.55268 1.86739 6.5 2 6.5Z" stroke=#B3B6BD stroke-linecap=round stroke-linejoin=round /><path d="M5 6.5L7.5 1.5C8.03043 1.5 8.53914 1.71071 8.91421 2.08579C9.28929 2.46086 9.5 2.96957 9.5 3.5V5H13.5C13.6419 5.00004 13.7821 5.03026 13.9113 5.08865C14.0406 5.14704 14.156 5.23227 14.2498 5.33867C14.3436 5.44507 14.4137 5.57021 14.4555 5.70579C14.4972 5.84136 14.5096 5.98426 14.4919 6.125L13.7419 12.125C13.7114 12.3666 13.5939 12.5888 13.4113 12.7499C13.2286 12.911 12.9935 12.9999 12.75 13H5" stroke=#B3B6BD stroke-linecap=round stroke-linejoin=round /></g><defs><clipPath id=clip0_110_3987><rect width=16 height=16 fill=white /></clipPath></defs></svg></div><div class="Button_OQ45 dark_oAth"><svg width=12 height=12 viewBox="0 0 16 16" fill=none xmlns=http://www.w3.org/2000/svg role=img aria-label=thumbs-down style=display:block;margin:auto><g clip-path=url(#clip0_110_3992)><path d="M2 3H5V9.5H2C1.86739 9.5 1.74021 9.44732 1.64645 9.35355C1.55268 9.25979 1.5 9.13261 1.5 9L1.5 3.5C1.5 3.36739 1.55268 3.24021 1.64645 3.14645C1.74021 3.05268 1.86739 3 2 3Z" stroke=#B3B6BD stroke-linecap=round stroke-linejoin=round /><path d="M5 9.5L7.5 14.5C8.03043 14.5 8.53914 14.2893 8.91421 13.9142C9.28929 13.5391 9.5 13.0304 9.5 12.5V11H13.5C13.6419 11 13.7821 10.9697 13.9113 10.9114C14.0406 10.853 14.156 10.7677 14.2498 10.6613C14.3436 10.5549 14.4137 10.4298 14.4555 10.2942C14.4972 10.1586 14.5096 10.0157 14.4919 9.875L13.7419 3.875C13.7114 3.63339 13.5939 3.41119 13.4113 3.25009C13.2286 3.08899 12.9935 3.00007 12.75 3L5 3" stroke=#B3B6BD stroke-linecap=round stroke-linejoin=round /></g><defs><clipPath id=clip0_110_3992><rect width=16 height=16 fill=white /></clipPath></defs></svg></div></div></div></div></div></div></div></div></div></div></main></div></div><footer class="footer footer_uuN5"><div class="container_gZiR container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>© 2016–2025 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class=footer__links><a href=https://clickhouse.com/legal/trademark-policy target=_blank rel="noopener noreferrer" class=footer__link-item>Trademark</a><span class=footer__link-separator>·</span><a href=https://clickhouse.com/legal/privacy-policy target=_blank rel="noopener noreferrer" class=footer__link-item>Privacy</a><span class=footer__link-separator>·</span><a href=https://trust.clickhouse.com/ target=_blank rel="noopener noreferrer" class=footer__link-item>Security</a><span class=footer__link-separator>·</span><a href=https://clickhouse.com/legal/agreements/terms-of-service target=_blank rel="noopener noreferrer" class=footer__link-item>Terms of Service</a></div></div></div></div></footer><img referrerpolicy=no-referrer-when-downgrade src="https://static.scarf.sh/a.png?x-pxid=e6377503-591b-4886-9398-e69c7fee0b91" alt="" height=0 width=0 style=height:0;width:0><div role=region aria-label="Notifications (F8)" tabindex=-1 style=pointer-events:none><ol tabindex=-1 class="sc-tmc8vl-6 bZUFYN"></ol></div></div><footer class="footer footer_uuN5"><div class="container_gZiR container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>© 2016–2025 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class=footer__links><a href=https://clickhouse.com/legal/trademark-policy target=_blank rel="noopener noreferrer" class=footer__link-item>Trademark</a><span class=footer__link-separator>·</span><a href=https://clickhouse.com/legal/privacy-policy target=_blank rel="noopener noreferrer" class=footer__link-item>Privacy</a><span class=footer__link-separator>·</span><a href=https://trust.clickhouse.com/ target=_blank rel="noopener noreferrer" class=footer__link-item>Security</a><span class=footer__link-separator>·</span><a href=https://clickhouse.com/legal/agreements/terms-of-service target=_blank rel="noopener noreferrer" class=footer__link-item>Terms of Service</a></div></div></div></div></footer><img referrerpolicy=no-referrer-when-downgrade src="https://static.scarf.sh/a.png?x-pxid=e6377503-591b-4886-9398-e69c7fee0b91" alt="" height=0 width=0 style=height:0;width:0></div>