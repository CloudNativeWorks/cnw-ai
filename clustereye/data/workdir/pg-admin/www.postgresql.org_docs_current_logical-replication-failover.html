<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 18: 29.3. Logical Replication Failover</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/18/logical-replication-failover.html" />
  <meta property="og:type" content="article" />

  <meta property="article:published_time" content="2026-02-12T14:31:41" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="29.3. Logical Replication Failover" />
  <meta property="og:description" content="29.3.&amp;nbsp;Logical Replication Failover # To allow subscriber nodes to continue replicating data from the publisher node even when the publisher …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />
  <link href="/media/css/fontawesome.css?77152761" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?77152761">

  <script src="/media/js/theme.js?77152761"></script>

  


  <link rel="canonical" href="https://www.postgresql.org/docs/current/logical-replication-failover.html" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <input type="checkbox" id="navbar-toggler" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <label for="navbar-toggler" id="navbar-toggler-label" class="navbar-toggler" tabindex="0"><span class="navbar-toggler-icon"></span></label>
            <div class="navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 16, 2026: <a href="/about/news/out-of-cycle-release-scheduled-for-february-26-2026-3241/">
  Out-of-cycle release scheduled for February 26, 2026
</a>
</div>
      </div>
    </div>
    
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/18/index.html">PostgreSQL 18</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/logical-replication-failover.html" title="PostgreSQL 18 - 29.3. Logical Replication Failover" class="docs-version-selected">Current</a>
                          (<a href="/docs/18/logical-replication-failover.html" title="PostgreSQL 18 - 29.3. Logical Replication Failover" class="docs-version-selected">18</a>)
                        
                      
                         / 
                        
                          <a href="/docs/17/logical-replication-failover.html" title="PostgreSQL 17 - 29.3. Logical Replication Failover" >17</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/logical-replication-failover.html" title="PostgreSQL devel - 29.3. Logical Replication Failover"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/18/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
            </div>
          </div>

          <div id="docContent">
            <div class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">29.3.&nbsp;Logical Replication Failover</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="logical-replication-subscription.html" title="29.2.&nbsp;Subscription">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="logical-replication.html" title="Chapter&nbsp;29.&nbsp;Logical Replication">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;29.&nbsp;Logical Replication</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 18.2 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="logical-replication-row-filter.html" title="29.4.&nbsp;Row Filters">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="LOGICAL-REPLICATION-FAILOVER">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">29.3.&nbsp;Logical Replication Failover <a href="#LOGICAL-REPLICATION-FAILOVER" class="id_link">#</a></h2>
      </div>
    </div>
  </div>
  <p>To allow subscriber nodes to continue replicating data from the publisher node even when the publisher node goes down, there must be a physical standby corresponding to the publisher node. The logical slots on the primary server corresponding to the subscriptions can be synchronized to the standby server by specifying <code class="literal">failover = true</code> when creating subscriptions. See <a class="xref" href="logicaldecoding-explanation.html#LOGICALDECODING-REPLICATION-SLOTS-SYNCHRONIZATION" title="47.2.3.&nbsp;Replication Slot Synchronization">Section&nbsp;47.2.3</a> for details. Enabling the <a class="link" href="sql-createsubscription.html#SQL-CREATESUBSCRIPTION-PARAMS-WITH-FAILOVER"><code class="literal">failover</code></a> parameter ensures a seamless transition of those subscriptions after the standby is promoted. They can continue subscribing to publications on the new primary server.</p>
  <p>Because the slot synchronization logic copies asynchronously, it is necessary to confirm that replication slots have been synced to the standby server before the failover happens. To ensure a successful failover, the standby server must be ahead of the subscriber. This can be achieved by configuring <a class="link" href="runtime-config-replication.html#GUC-SYNCHRONIZED-STANDBY-SLOTS"><code class="varname">synchronized_standby_slots</code></a>.</p>
  <p>To confirm that the standby server is indeed ready for failover for a given subscriber, follow these steps to verify that all the logical replication slots required by that subscriber have been synchronized to the standby server:</p>
  <div class="procedure">
    <ol class="procedure" type="1">
      <li class="step">
        <p>On the subscriber node, use the following SQL to identify which replication slots should be synced to the standby that we plan to promote. This query will return the relevant replication slots associated with the failover-enabled subscriptions.</p>
        <pre class="programlisting">
/* sub # */ SELECT
               array_agg(quote_literal(s.subslotname)) AS slots
           FROM  pg_subscription s
           WHERE s.subfailover AND
                 s.subslotname IS NOT NULL;
 slots
-------
 {'sub1','sub2','sub3'}
(1 row)
</pre>
      </li>
      <li class="step">
        <p>On the subscriber node, use the following SQL to identify which table synchronization slots should be synced to the standby that we plan to promote. This query needs to be run on each database that includes the failover-enabled subscription(s). Note that the table sync slot should be synced to the standby server only if the table copy is finished (See <a class="xref" href="catalog-pg-subscription-rel.html" title="52.55.&nbsp;pg_subscription_rel">Section&nbsp;52.55</a>). We don't need to ensure that the table sync slots are synced in other scenarios as they will either be dropped or re-created on the new primary server in those cases.</p>
        <pre class="programlisting">
/* sub # */ SELECT
               array_agg(quote_literal(slot_name)) AS slots
           FROM
           (
               SELECT CONCAT('pg_', srsubid, '_sync_', srrelid, '_', ctl.system_identifier) AS slot_name
               FROM pg_control_system() ctl, pg_subscription_rel r, pg_subscription s
               WHERE r.srsubstate = 'f' AND s.oid = r.srsubid AND s.subfailover
           );
 slots
-------
 {'pg_16394_sync_16385_7394666715149055164'}
(1 row)
</pre>
      </li>
      <li class="step">
        <p>Check that the logical replication slots identified above exist on the standby server and are ready for failover.</p>
        <pre class="programlisting">
/* standby # */ SELECT slot_name, (synced AND NOT temporary AND invalidation_reason IS NULL) AS failover_ready
               FROM pg_replication_slots
               WHERE slot_name IN
                   ('sub1','sub2','sub3', 'pg_16394_sync_16385_7394666715149055164');
  slot_name                                 | failover_ready
--------------------------------------------+----------------
  sub1                                      | t
  sub2                                      | t
  sub3                                      | t
  pg_16394_sync_16385_7394666715149055164   | t
(4 rows)
</pre>
      </li>
    </ol>
  </div>
  <p>If all the slots are present on the standby server and the result (<code class="literal">failover_ready</code>) of the above SQL query is true, then existing subscriptions can continue subscribing to publications on the new primary server.</p>
  <p>The first two steps in the above procedure are meant for a <span class="productname">PostgreSQL</span> subscriber. It is recommended to run these steps on each subscriber node, that will be served by the designated standby after failover, to obtain the complete list of replication slots. This list can then be verified in Step 3 to ensure failover readiness. Non-<span class="productname">PostgreSQL</span> subscribers, on the other hand, may use their own methods to identify the replication slots used by their respective subscriptions.</p>
  <p>In some cases, such as during a planned failover, it is necessary to confirm that all subscribers, whether <span class="productname">PostgreSQL</span> or non-<span class="productname">PostgreSQL</span>, will be able to continue replication after failover to a given standby server. In such cases, use the following SQL, instead of performing the first two steps above, to identify which replication slots on the primary need to be synced to the standby that is intended for promotion. This query returns the relevant replication slots associated with all the failover-enabled subscriptions.</p>
  <pre class="programlisting">
/* primary # */ SELECT array_agg(quote_literal(r.slot_name)) AS slots
               FROM pg_replication_slots r
               WHERE r.failover AND NOT r.temporary;
 slots
-------
 {'sub1','sub2','sub3', 'pg_16394_sync_16385_7394666715149055164'}
(1 row)
</pre>
</div>
<div class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="logical-replication-subscription.html" title="29.2.&nbsp;Subscription">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="logical-replication.html" title="Chapter&nbsp;29.&nbsp;Logical Replication">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="logical-replication-row-filter.html" title="29.4.&nbsp;Row Filters">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">29.2.&nbsp;Subscription&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 18.2 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;29.4.&nbsp;Row Filters</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/18/logical-replication-failover.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> <!-- pgContentWrap -->
      </div>
    </div>

    <!-- Footer -->
    <footer id="footer">
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2026 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/main.js?77152761"></script>

  </body>
</html>
