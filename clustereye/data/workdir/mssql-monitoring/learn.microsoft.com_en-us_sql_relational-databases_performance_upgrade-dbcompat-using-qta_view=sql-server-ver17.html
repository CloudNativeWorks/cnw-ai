 <!DOCTYPE html>
		<html
			class="layout layout-holy-grail   show-table-of-contents conceptual show-breadcrumb default-focus"
			lang="en-us"
			dir="ltr"
			data-authenticated="false"
			data-auth-status-determined="false"
			data-target="docs"
			x-ms-format-detection="none"
		>
			
		<head>
			<title>Upgrade Databases Using Query Tuning Assistant - SQL Server | Microsoft Learn</title>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1.0" />
			<meta name="color-scheme" content="light dark" />

			<meta name="description" content="Learn how the Query Tuning Assistant guides you through the recommended workflow to keep performance stability during upgrades to newer SQL Server versions." />
			<link rel="canonical" href="https://learn.microsoft.com/en-us/sql/relational-databases/performance/upgrade-dbcompat-using-qta?view=sql-server-ver17" /> 

			<!-- Non-customizable open graph and sharing-related metadata -->
			<meta name="twitter:card" content="summary_large_image" />
			<meta name="twitter:site" content="@MicrosoftLearn" />
			<meta property="og:type" content="website" />
			<meta property="og:image:alt" content="Microsoft Learn" />
			<meta property="og:image" content="https://learn.microsoft.com/en-us/media/open-graph-image.png" />
			<!-- Page specific open graph and sharing-related metadata -->
			<meta property="og:title" content="Upgrade Databases Using Query Tuning Assistant - SQL Server" />
			<meta property="og:url" content="https://learn.microsoft.com/en-us/sql/relational-databases/performance/upgrade-dbcompat-using-qta?view=sql-server-ver17" />
			<meta property="og:description" content="Learn how the Query Tuning Assistant guides you through the recommended workflow to keep performance stability during upgrades to newer SQL Server versions." />
			<meta name="platform_id" content="e469bc43-8e63-e1be-d40e-a4e5361bdae5" /> <meta name="scope" content="sql" />
			<meta name="locale" content="en-us" />
			 <meta name="adobe-target" content="true" /> 
			<meta name="uhfHeaderId" content="MSDocsHeader-DocsSQL" />

			<meta name="page_type" content="conceptual" />

			<!--page specific meta tags-->
			

			<!-- custom meta tags -->
			
		<meta name="toc_preview" content="true" />
	
		<meta name="feedback_system" content="Standard" />
	
		<meta name="feedback_product_url" content="https://feedback.azure.com/d365community/forum/04fe6ee0-3b25-ec11-b6e6-000d3a4f0da0" />
	
		<meta name="feedback_help_link_url" content="https://learn.microsoft.com/answers/tags/191/sql-server" />
	
		<meta name="feedback_help_link_type" content="get-help-at-qna" />
	
		<meta name="recommendations" content="true" />
	
		<meta name="manager" content="jroth" />
	
		<meta name="breadcrumb_path" content="../../breadcrumb/toc.json" />
	
		<meta name="monikerRange" content="&gt;=sql-server-2016 || &gt;=sql-server-linux-2017" />
	
		<meta name="ms.update-cycle" content="1825-days" />
	
		<meta name="author" content="rwestMSFT" />
	
		<meta name="ms.author" content="randolphwest" />
	
		<meta name="ms.reviewer" content="wiassaf" />
	
		<meta name="ms.date" content="2025-03-28T00:00:00Z" />
	
		<meta name="ms.service" content="sql" />
	
		<meta name="ms.subservice" content="performance" />
	
		<meta name="ms.topic" content="upgrade-and-migration-article" />
	
		<meta name="ms.custom" content="sfi-image-nochange" />
	
		<meta name="document_id" content="acff5ec8-7513-131b-b45f-bdaff9b7dfc1" />
	
		<meta name="document_version_independent_id" content="68c2239d-c014-a3bd-d8c3-832b50e2bb59" />
	
		<meta name="updated_at" content="2025-10-10T17:36:00Z" />
	
		<meta name="original_content_git_url" content="https://github.com/MicrosoftDocs/sql-docs-pr/blob/live/docs/relational-databases/performance/upgrade-dbcompat-using-qta.md" />
	
		<meta name="gitcommit" content="https://github.com/MicrosoftDocs/sql-docs-pr/blob/5209aba4591c678b8abb37de2b8879a8f47806e5/docs/relational-databases/performance/upgrade-dbcompat-using-qta.md" />
	
		<meta name="git_commit_id" content="5209aba4591c678b8abb37de2b8879a8f47806e5" />
	
		<meta name="monikers" content="sql-server-linux-2017" />
	
		<meta name="monikers" content="sql-server-linux-ver15" />
	
		<meta name="monikers" content="sql-server-linux-ver16" />
	
		<meta name="monikers" content="sql-server-linux-ver17" />
	
		<meta name="monikers" content="sql-server-2016" />
	
		<meta name="monikers" content="sql-server-2017" />
	
		<meta name="monikers" content="sql-server-ver15" />
	
		<meta name="monikers" content="sql-server-ver16" />
	
		<meta name="monikers" content="sql-server-ver17" />
	
		<meta name="default_moniker" content="sql-server-ver17" />
	
		<meta name="site_name" content="Docs" />
	
		<meta name="depot_name" content="SQL.sql-content" />
	
		<meta name="schema" content="Conceptual" />
	
		<meta name="toc_rel" content="../../toc.json" />
	
		<meta name="pdf_url_template" content="https://learn.microsoft.com/pdfstore/en-us/SQL.sql-content/{branchName}{pdfName}" />
	
		<meta name="word_count" content="2504" />
	
		<meta name="config_moniker_range" content="=azuresqldb-current || =azuresqldb-mi-current || =azure-sqldw-latest || &gt;=aps-pdw-2016 || &gt;=sql-server-2016 || &gt;=sql-server-linux-2017 || =fabric || =fabric-sqldb" />
	
		<meta name="asset_id" content="relational-databases/performance/upgrade-dbcompat-using-qta" />
	
		<meta name="moniker_range_name" content="2c2bb81b983e6123779985bffcf6640b" />
	
		<meta name="item_type" content="Content" />
	
		<meta name="source_path" content="docs/relational-databases/performance/upgrade-dbcompat-using-qta.md" />
	
		<meta name="previous_tlsh_hash" content="83007A72740DC614EE822E57346B5FA085F0D489B5B07DC805366666BB1B1E734F5CEDEBAB6273044332066701C3E81DA2E5E738F5BC7332A69568A9C25C2181D75F37B1DB" />
	
		<meta name="github_feedback_content_git_url" content="https://github.com/MicrosoftDocs/sql-docs/blob/live/docs/relational-databases/performance/upgrade-dbcompat-using-qta.md" />
	
		<meta name="markdown_url" content="https://learn.microsoft.com/en-us/sql/relational-databases/performance/upgrade-dbcompat-using-qta?view=sql-server-ver17&amp;accept=text/markdown" />
	 
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/cbe4ca68-43ac-4375-aba5-5945a6394c20" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/ced846cc-6a3c-4c8f-9dfb-3de0e90e2742" data-source="generated" />
	

			<!-- assets and js globals -->
			
			<link rel="stylesheet" href="/static/assets/0.4.03336.7510-899cc417/styles/site-ltr.css" />
			
			<link rel="preconnect" href="//mscom.demdex.net" crossorigin />
						<link rel="dns-prefetch" href="//target.microsoft.com" />
						<link rel="dns-prefetch" href="//microsoftmscompoc.tt.omtrdc.net" />
						<link
							rel="preload"
							as="script"
							href="/static/third-party/adobe-target/at-js/2.9.0/at.js"
							integrity="sha384-l4AKhsU8cUWSht4SaJU5JWcHEWh1m4UTqL08s6b/hqBLAeIDxTNl+AMSxTLx6YMI"
							crossorigin="anonymous"
							id="adobe-target-script"
							type="application/javascript"
						/>
			<script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
			<script src="https://js.monitor.azure.com/scripts/c/ms.jsll-4.min.js"></script>
			<script src="/_themes/docs.theme/master/en-us/_themes/global/deprecation.js"></script>

			<!-- msdocs global object -->
			<script id="msdocs-script">
		var msDocs = {
  "environment": {
    "accessLevel": "online",
    "azurePortalHostname": "portal.azure.com",
    "reviewFeatures": false,
    "supportLevel": "production",
    "systemContent": true,
    "siteName": "learn",
    "legacyHosting": false
  },
  "data": {
    "contentLocale": "en-us",
    "contentDir": "ltr",
    "userLocale": "en-us",
    "userDir": "ltr",
    "pageTemplate": "Conceptual",
    "brand": "",
    "context": {},
    "standardFeedback": true,
    "showFeedbackReport": false,
    "feedbackHelpLinkType": "get-help-at-qna",
    "feedbackHelpLinkUrl": "https://learn.microsoft.com/answers/tags/191/sql-server",
    "feedbackSystem": "Standard",
    "feedbackGitHubRepo": "MicrosoftDocs/sql-docs",
    "feedbackProductUrl": "https://feedback.azure.com/d365community/forum/04fe6ee0-3b25-ec11-b6e6-000d3a4f0da0",
    "extendBreadcrumb": false,
    "isEditDisplayable": true,
    "isPrivateUnauthorized": false,
    "hideViewSource": false,
    "isPermissioned": false,
    "hasRecommendations": true,
    "contributors": [
      {
        "name": "rwestMSFT",
        "url": "https://github.com/rwestMSFT"
      },
      {
        "name": "Dickson-Mwendia",
        "url": "https://github.com/Dickson-Mwendia"
      },
      {
        "name": "Saisang",
        "url": "https://github.com/Saisang"
      },
      {
        "name": "thesqlsith",
        "url": "https://github.com/thesqlsith"
      },
      {
        "name": "rothja",
        "url": "https://github.com/rothja"
      },
      {
        "name": "alexbuckgit",
        "url": "https://github.com/alexbuckgit"
      },
      {
        "name": "DCtheGeek",
        "url": "https://github.com/DCtheGeek"
      },
      {
        "name": "WilliamDAssafMSFT",
        "url": "https://github.com/WilliamDAssafMSFT"
      },
      {
        "name": "pmasl",
        "url": "https://github.com/pmasl"
      },
      {
        "name": "markingmyname",
        "url": "https://github.com/markingmyname"
      },
      {
        "name": "TimShererWithAquent",
        "url": "https://github.com/TimShererWithAquent"
      },
      {
        "name": "julieMSFT",
        "url": "https://github.com/julieMSFT"
      },
      {
        "name": "hubalazs",
        "url": "https://github.com/hubalazs"
      }
    ]
  },
  "functions": {}
};;
	</script>

			<!-- base scripts, msdocs global should be before this -->
			<script src="/static/assets/0.4.03336.7510-899cc417/scripts/en-us/index-docs.js"></script>
			

			<!-- json-ld -->
			
		</head>
	
			<body
				id="body"
				data-bi-name="body"
				class="layout-body "
				lang="en-us"
				dir="ltr"
			>
				<header class="layout-body-header">
		<div class="header-holder has-default-focus">
			
		<a
			href="#main"
			
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			
		>
			Skip to main content
		</a>
	
		<a
			href="#"
			data-skip-to-ask-learn
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			hidden
		>
			Skip to Ask Learn chat experience
		</a>
	

			<div hidden id="cookie-consent-holder" data-test-id="cookie-consent-container"></div>
			<!-- Unsupported browser warning -->
			<div
				id="unsupported-browser"
				style="background-color: white; color: black; padding: 16px; border-bottom: 1px solid grey;"
				hidden
			>
				<div style="max-width: 800px; margin: 0 auto;">
					<p style="font-size: 24px">This browser is no longer supported.</p>
					<p style="font-size: 16px; margin-top: 16px;">
						Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.
					</p>
					<div style="margin-top: 12px;">
						<a
							href="https://go.microsoft.com/fwlink/p/?LinkID=2092881 "
							style="background-color: #0078d4; border: 1px solid #0078d4; color: white; padding: 6px 12px; border-radius: 2px; display: inline-block;"
						>
							Download Microsoft Edge
						</a>
						<a
							href="https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge"
							style="background-color: white; padding: 6px 12px; border: 1px solid #505050; color: #171717; border-radius: 2px; display: inline-block;"
						>
							More info about Internet Explorer and Microsoft Edge
						</a>
					</div>
				</div>
			</div>
			<!-- site header -->
			<header
				id="ms--site-header"
				data-test-id="site-header-wrapper"
				role="banner"
				itemscope="itemscope"
				itemtype="http://schema.org/Organization"
			>
				<div
					id="ms--mobile-nav"
					class="site-header display-none-tablet padding-inline-none gap-none"
					data-bi-name="mobile-header"
					data-test-id="mobile-header"
				></div>
				<div
					id="ms--primary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L1-header"
					data-test-id="primary-header"
				></div>
				<div
					id="ms--secondary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L2-header"
					data-test-id="secondary-header"
					
				></div>
			</header>
			
		<!-- banner -->
		<div data-banner>
			<div id="disclaimer-holder"></div>
			
		</div>
		<!-- banner end -->
	
		</div>
	</header>
				 <section
					id="layout-body-menu"
					class="layout-body-menu display-flex"
					data-bi-name="menu"
			  >
					
		<div
			id="left-container"
			class="left-container display-none display-block-tablet padding-inline-sm padding-bottom-sm width-full"
			data-toc-container="true"
		>
			<!-- Regular TOC content (default) -->
			<div id="ms--toc-content" class="height-full">
				<nav
					id="affixed-left-container"
					class="margin-top-sm-tablet position-sticky display-flex flex-direction-column"
					aria-label="Primary"
					data-bi-name="left-toc"
					role="navigation"
				></nav>
			</div>
			<!-- Collapsible TOC content (hidden by default) -->
			<div id="ms--toc-content-collapsible" class="height-full" hidden>
				<nav
					id="affixed-left-container"
					class="margin-top-sm-tablet position-sticky display-flex flex-direction-column"
					aria-label="Primary"
					data-bi-name="left-toc"
					role="navigation"
				>
					<div
						id="ms--collapsible-toc-header"
						class="display-flex flex-direction-row-reverse justify-content-space-between align-items-center margin-bottom-xxs"
					>
						<button
							type="button"
							class="button button-clear inner-focus"
							data-collapsible-toc-toggle
							aria-expanded="true"
							aria-controls="ms--collapsible-toc-content"
							aria-label="Table of contents"
						>
							<span class="icon font-size-h4" aria-hidden="true">
								<span class="docon docon-panel-left-contract"></span>
							</span>
						</button>
						<div id="ms--collapsible-toc-moniker-slot" class="flex-grow-1"></div>
					</div>
				</nav>
			</div>
		</div>
	
			  </section>

				<main
					id="main"
					role="main"
					class="layout-body-main "
					data-bi-name="content"
					lang="en-us"
					dir="ltr"
				>
					
			<div
		id="ms--content-header"
		class="content-header default-focus border-bottom-none"
		data-bi-name="content-header"
	>
		<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
			<button
				type="button"
				class="contents-button button button-sm margin-right-xxs"
				data-bi-name="contents-expand"
				aria-haspopup="true"
				data-contents-button
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-menu"></span></span>
				<span class="contents-expand-title"> Table of contents </span>
			</button>
			<button
				type="button"
				class="ap-collapse-behavior ap-expanded button button-sm"
				data-bi-name="ap-collapse"
				aria-controls="action-panel"
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-exit-mode"></span></span>
				<span>Exit editor mode</span>
			</button>
		</div>
	</div>
			<div data-main-column class="padding-sm padding-top-none padding-top-sm-tablet">
				<div>
					
		<div id="article-header" class="background-color-body margin-bottom-xs display-none-print">
			<div class="display-flex align-items-center justify-content-space-between">
				
		<details
			id="article-header-breadcrumbs-overflow-popover"
			class="popover"
			data-for="article-header-breadcrumbs"
		>
			<summary
				class="button button-clear button-primary button-sm inner-focus"
				aria-label="All breadcrumbs"
			>
				<span class="icon">
					<span class="docon docon-more"></span>
				</span>
			</summary>
			<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none"></div>
		</details>

		<bread-crumbs
			id="article-header-breadcrumbs"
			role="group"
			aria-label="Breadcrumbs"
			data-test-id="article-header-breadcrumbs"
			class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs"
		></bread-crumbs>
	 
		<div
			id="article-header-page-actions"
			class="opacity-none margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch"
		>
			
		<button
			class="button button-sm border-none inner-focus display-none-tablet flex-shrink-0 "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-mobile"
			data-ask-learn-modal-entry
			
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-none display-inline-flex-tablet display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			
			data-test-id="ask-learn-assistant-modal-entry-tablet"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			
			data-test-id="ask-learn-assistant-flyout-entry"
			data-ask-learn-flyout-entry
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	 
		<button
			type="button"
			id="ms--focus-mode-button"
			data-focus-mode
			data-bi-name="focus-mode-entry"
			class="button button-sm flex-shrink-0 margin-right-xxs display-none display-inline-flex-desktop"
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-glasses"></span>
			</span>
			<span>Focus mode</span>
		</button>
	 

			<details class="popover popover-right" id="article-header-page-actions-overflow">
				<summary
					class="justify-content-flex-start button button-clear button-sm button-primary inner-focus"
					aria-label="More actions"
					title="More actions"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-more-vertical"></span>
					</span>
				</summary>
				<div class="popover-content">
					
		<button
			data-page-action-item="overflow-mobile"
			type="button"
			class="button-block button-sm inner-focus button button-clear display-none-tablet justify-content-flex-start text-align-left"
			data-bi-name="contents-expand"
			data-contents-button
			data-popover-close
		>
			<span class="icon">
				<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
			</span>
			<span class="contents-expand-title">Table of contents</span>
		</button>
	 
		<a
			id="lang-link-overflow"
			class="button-sm inner-focus button button-clear button-block justify-content-flex-start text-align-left"
			data-bi-name="language-toggle"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-read-in-link
			href="#"
			hidden
		>
			<span class="icon" aria-hidden="true" data-read-in-link-icon>
				<span class="docon docon-locale-globe"></span>
			</span>
			<span data-read-in-link-text>Read in English</span>
		</a>
	 
		<button
			type="button"
			class="collection button button-clear button-sm button-block justify-content-flex-start text-align-left inner-focus"
			data-list-type="collection"
			data-bi-name="collection"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="collection-status">Add</span>
		</button>
	
					
		<button
			type="button"
			class="collection button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			data-list-type="plan"
			data-bi-name="plan"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="plan-status">Add to plan</span>
		</button>
	  
		<a
			data-contenteditbtn
			class="button button-clear button-block button-sm inner-focus justify-content-flex-start text-align-left text-decoration-none"
			data-bi-name="edit"
			
			href="https://github.com/MicrosoftDocs/sql-docs/blob/live/docs/relational-databases/performance/upgrade-dbcompat-using-qta.md"
			data-original_content_git_url="https://github.com/MicrosoftDocs/sql-docs-pr/blob/live/docs/relational-databases/performance/upgrade-dbcompat-using-qta.md"
			data-original_content_git_url_template="{repo}/blob/{branch}/docs/relational-databases/performance/upgrade-dbcompat-using-qta.md"
			data-pr_repo=""
			data-pr_branch=""
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-outline"></span>
			</span>
			<span>Edit</span>
		</a>
	
					
		<hr class="margin-block-xxs" />
		<h4 class="font-size-sm padding-left-xxs">Share via</h4>
		
					<a
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-facebook"
						data-bi-name="facebook"
						data-page-action-item="overflow-all"
						href="#"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-facebook-share"></span>
						</span>
						<span>Facebook</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-twitter"
						data-bi-name="twitter"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-text" aria-hidden="true">
							<span class="docon docon-xlogo-share"></span>
						</span>
						<span>x.com</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-linkedin"
						data-bi-name="linkedin"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-linked-in-logo"></span>
						</span>
						<span>LinkedIn</span>
					</a>
					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-email"
						data-bi-name="email"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-mail-message"></span>
						</span>
						<span>Email</span>
					</a>
			  
	 
		<hr class="margin-block-xxs" />
		
				<button
					class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
					type="button"
					data-bi-name="copy-markdown"
					data-page-action-item="overflow-all"
					data-copy-markdown
					data-copy-state="idle"
					data-check-hidden="true"
				>
					<span class="icon color-primary" aria-hidden="true">
						<span data-show-when="idle" class="docon docon-code-lang"></span>
						<span data-show-when="loading" class="loader" hidden></span>
						<span data-show-when="success" class="docon docon-check-mark" hidden></span>
					</span>
					<span>Copy Markdown</span>
				</button>
		   
				<button
					class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
					type="button"
					data-bi-name="print"
					data-page-action-item="overflow-all"
					data-popover-close
					data-print-page
					data-check-hidden="true"
				>
					<span class="icon color-primary" aria-hidden="true">
						<span class="docon docon-print"></span>
					</span>
					<span>Print</span>
				</button>
		  
	
				</div>
			</details>
		</div>
	
			</div>
		</div>
	  
		<!-- privateUnauthorizedTemplate is hidden by default -->
		<div unauthorized-private-section data-bi-name="permission-content-unauthorized-private" hidden>
			<hr class="hr margin-top-xs margin-bottom-sm" />
			<div class="notification notification-info">
				<div class="notification-content">
					<p class="margin-top-none notification-title">
						<span class="icon">
							<span class="docon docon-exclamation-circle-solid" aria-hidden="true"></span>
						</span>
						<span>Note</span>
					</p>
					<p class="margin-top-none authentication-determined not-authenticated">
						Access to this page requires authorization. You can try <a class="docs-sign-in" href="#" data-bi-name="permission-content-sign-in">signing in</a> or <a  class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
					<p class="margin-top-none authentication-determined authenticated">
						Access to this page requires authorization. You can try <a class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
				</div>
			</div>
		</div>
	
					<div class="content"><h1 id="upgrade-databases-using-the-query-tuning-assistant">Upgrade databases using the Query Tuning Assistant</h1></div>
					
		<div
			id="article-metadata"
			data-bi-name="article-metadata"
			data-test-id="article-metadata"
			class="page-metadata-container display-flex gap-xxs justify-content-space-between align-items-center flex-wrap-wrap"
		>
			 
				<div
					id="user-feedback"
					class="margin-block-xxs display-none display-none-print"
					hidden
					data-hide-on-archived
				>
					
		<button
			id="user-feedback-button"
			data-test-id="conceptual-feedback-button"
			class="button button-sm button-clear button-primary display-none"
			type="button"
			data-bi-name="user-feedback-button"
			data-user-feedback-button
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-like"></span>
			</span>
			<span>Feedback</span>
		</button>
	
				</div>
		  
		</div>
	 
		<div data-id="ai-summary" hidden>
			<div id="ms--ai-summary-cta" class="margin-top-xs display-flex align-items-center">
				<span class="icon" aria-hidden="true">
					<span class="docon docon-sparkle-fill gradient-text-vivid"></span>
				</span>
				<button
					id="ms--ai-summary"
					type="button"
					class="tag tag-sm tag-suggestion margin-left-xxs"
					data-test-id="ai-summary-cta"
					data-bi-name="ai-summary-cta"
					data-an="ai-summary"
				>
					<span class="ai-summary-cta-text">
						Summarize this article for me
					</span>
				</button>
			</div>
			<!-- Slot where the client will render the summary card after the user clicks the CTA -->
			<div id="ms--ai-summary-header" class="margin-top-xs"></div>
		</div>
	 
		<nav
			id="center-doc-outline"
			class="doc-outline is-hidden-desktop display-none-print margin-bottom-sm"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h2 id="ms--in-this-article" class="title is-6 margin-block-xs">
				In this article
			</h2>
		</nav>
	
					<div class="content"><p><strong>Applies to:</strong> <img src="../../includes/media/yes-icon.svg?view=sql-server-ver17" role="presentation" data-linktype="relative-path">
 SQL Server 2016 (13.x) and later versions</p>
<p>When migrating from an older version of SQL Server to SQL Server 2014 (12.x) or later versions, and <a href="../databases/view-or-change-the-compatibility-level-of-a-database?view=sql-server-ver17" data-linktype="relative-path">upgrading the database compatibility level</a> to the latest available, a workload might be exposed to the risk of performance regression. This is also possible to a lesser degree when upgrading between SQL Server 2014 (12.x) and any newer version.</p>
<p>In SQL Server 2014 (12.x) and later versions, all query optimizer changes are gated to the latest database compatibility level, so execution plans aren't changed right at point of upgrade but rather when a user changes the <code>COMPATIBILITY_LEVEL</code> database option to the latest available. For more information on query optimizer changes introduced in SQL Server 2014 (12.x), see <a href="cardinality-estimation-sql-server?view=sql-server-ver17" data-linktype="relative-path">Cardinality Estimation (SQL Server)</a>. For more information about compatibility levels and how they can affect upgrades, see <a href="../../t-sql/statements/alter-database-transact-sql-compatibility-level?view=sql-server-ver17#compatibility-levels-and-database-engine-upgrades" data-linktype="relative-path">Compatibility Levels and Database Engine Upgrades</a>.</p>
<p>This gating capability provided by the database compatibility level, in combination with Query Store gives you a great level of control over the query performance in the upgrade process if the upgrade follows the recommended workflow seen in the next diagram. For more information on the recommended workflow for upgrading the compatibility level, see <a href="../../database-engine/install-windows/change-the-database-compatibility-mode-and-use-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Change the database compatibility level and use the Query Store</a>.</p>
<p><span class="mx-imgBorder">
<a href="media/query-store-usage-5.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/query-store-usage-5.png?view=sql-server-ver17" alt="Diagram of Recommended database upgrade workflow using Query Store." data-linktype="relative-path">
</a>
</span>
</p>
<p>This control over upgrades was further improved with SQL Server 2017 (14.x) where <a href="../automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">automatic tuning</a> was introduced and allows automating the last step in the recommended workflow.</p>
<p>Starting with SQL Server Management Studio v18, the <strong>Query Tuning Assistant (QTA)</strong> feature guides users through the recommended workflow to keep performance stability during upgrades to newer SQL Server versions, as documented in the section <em>Keep performance stability during the upgrade to newer SQL Server</em> of <a href="query-store-usage-scenarios?view=sql-server-ver17#CEUpgrade" data-linktype="relative-path">Query Store Usage Scenarios</a>. However, QTA doesn't roll back to a previously known good plan as seen in the last step of the recommended workflow. Instead, QTA tracks any regressions found in the <a href="monitoring-performance-by-using-the-query-store?view=sql-server-ver17#Regressed" data-linktype="relative-path">Query Store <strong>Regressed Queries</strong></a> view, and iterate through possible permutations of applicable optimizer model variations so that a new better plan can be produced.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>QTA doesn't generate user workload. If running QTA in an environment that isn't used by your applications, ensure that you can still execute representative test workload on the targeted SQL Server Database Engine by other means.</p>
</div>
<h2 id="the-query-tuning-assistant-workflow">The Query Tuning Assistant workflow</h2>
<p>The starting point of QTA assumes that a database from a previous version of SQL Server is moved (through <a href="../databases/attach-a-database?view=sql-server-ver17" data-linktype="relative-path">Attach a Database</a> or <a href="../../t-sql/statements/restore-statements-transact-sql?view=sql-server-ver17" data-linktype="relative-path">RESTORE Statements</a>) to a newer version of the SQL Server Database Engine, and the before-upgrade database compatibility level isn't changed immediately. QTA guides through the following steps:</p>
<ol>
<li><p>Configure Query Store according to recommended settings for the workload duration (in days) set by the user. Think about the workload duration that matches your typical business cycle.</p>
</li>
<li><p>Request to start the required workload, so that Query Store can collect a baseline of workload data (if none available yet).</p>
</li>
<li><p>Upgrade to the target database compatibility level chosen by the user.</p>
</li>
<li><p>Request that a second pass of workload data is collected for comparison and regression detection.</p>
</li>
<li><p>Iterate through any regressions found based on <a href="monitoring-performance-by-using-the-query-store?view=sql-server-ver17#Regressed" data-linktype="relative-path">Query Store <strong>Regressed Queries</strong></a> view, experiment by collecting runtime statistics on possible permutations of applicable optimizer model variations, and measure the outcome.</p>
</li>
<li><p>Report on the measured improvements, and optionally allow those changes to be persisted using <a href="plan-guides?view=sql-server-ver17" data-linktype="relative-path">plan guides</a>.</p>
</li>
</ol>
<p>For more information on attaching a database, see <a href="../databases/database-detach-and-attach-sql-server?view=sql-server-ver17#AttachDb" data-linktype="relative-path">Database Detach and Attach</a>.</p>
<p>The following diagram shows how QTA only changes the last steps of the recommended workflow for upgrading the compatibility level using Query Store seen previously. Instead of choosing between the currently inefficient execution plan and the last known good execution plan, QTA presents tuning options that are specific for the selected regressed queries, to create a new improved state with tuned execution plans.</p>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-usage.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-usage.png?view=sql-server-ver17" alt="Diagram of recommended database upgrade workflow using QTA." data-linktype="relative-path">
</a>
</span>
</p>
<h3 id="qta-tuning-internal-search-space">QTA Tuning internal search space</h3>
<p>QTA targets only <code>SELECT</code> queries that can be executed from Query Store. Parameterized queries are eligible if the compiled parameter is known. Queries that depend on runtime constructs such as temporary tables or table variables aren't eligible at this time.</p>
<p>QTA targets known possible patterns of query regressions due to changes in <a href="cardinality-estimation-sql-server?view=sql-server-ver17" data-linktype="relative-path">Cardinality Estimation (SQL Server)</a> versions. For example, when upgrading a database from SQL Server 2012 (11.x) and database compatibility level 110, to SQL Server 2017 (14.x) and database compatibility level 140, some queries might regress because they were designed specifically to work with the CE version that existed in SQL Server 2012 (11.x) (CE 70). This doesn't mean that reverting from CE 140 to CE 70 is the only option. If only a specific change in the newer version is introducing the regression, then it's possible to hint that query to use just the relevant part of the previous CE version that was working better for the specific query, while still using all other improvements of newer CE versions. And also allow other queries in the workload that haven't regressed to benefit from newer CE improvements.</p>
<p>The CE patterns searched by QTA are:</p>
<ul>
<li><p><strong>Independence vs. correlation</strong>: If independence assumption provides better estimations for the specific query, then the query hint <code>USE HINT ('ASSUME_MIN_SELECTIVITY_FOR_FILTER_ESTIMATES')</code> causes SQL Server to generate an execution plan by using minimum selectivity when estimating <code>AND</code> predicates for filters to account for correlation. For more information, see <a href="../../t-sql/queries/hints-transact-sql-query?view=sql-server-ver17#use_hint" data-linktype="relative-path">USE HINT query hints</a> and <a href="cardinality-estimation-sql-server?view=sql-server-ver17#versions-of-the-ce" data-linktype="relative-path">Versions of the CE</a>.</p>
</li>
<li><p><strong>Simple containment vs. Base containment</strong>: If a different join containment provides better estimations for the specific query, then the query hint <code>USE HINT ('ASSUME_JOIN_PREDICATE_DEPENDS_ON_FILTERS')</code> causes SQL Server to generate an execution plan by using the Simple Containment assumption instead of the default Base Containment assumption. For more information, see <a href="../../t-sql/queries/hints-transact-sql-query?view=sql-server-ver17#use_hint" data-linktype="relative-path">USE HINT query hints</a> and <a href="cardinality-estimation-sql-server?view=sql-server-ver17#versions-of-the-ce" data-linktype="relative-path">Versions of the CE</a>.</p>
</li>
<li><p><strong>Multi-statement table-valued function (MSTVF) fixed cardinality guess</strong> of 100 rows vs. 1 row: If the default fixed estimation for TVFs of 100 rows doesn't result in a more efficient plan than using the fixed estimation for TVFs of 1 row (corresponding to the default under the query optimizer CE model of SQL Server 2008 R2 (10.50.x) and earlier versions), then the query hint <code>QUERYTRACEON 9488</code> is used to generate an execution plan. For more information on MSTVFs, see <a href="../user-defined-functions/create-user-defined-functions-database-engine?view=sql-server-ver17#TVF" data-linktype="relative-path">Create User-defined Functions (Database Engine)</a>.</p>
</li>
</ul>
<p>As a last resort, if the narrow scoped hints aren't yielding good enough results for the eligible query patterns, then full use of CE 70 is also considered, by using the query hint <code>USE HINT ('FORCE_LEGACY_CARDINALITY_ESTIMATION')</code> to generate an execution plan.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>Any hint forces certain behaviors that might be addressed in future SQL Server updates. We recommend you only apply hints when no other option exists, and plan to revisit hinted code with every new upgrade. By forcing behaviors, you might be precluding your workload from benefiting of enhancements introduced in newer versions of SQL Server.</p>
</div>
<h2 id="start-query-tuning-assistant-for-database-upgrades">Start Query Tuning Assistant for database upgrades</h2>
<p>QTA is a session-based feature that stores session state in the <code>msqta</code> schema of the user database where a session is created for the first time. Multiple tuning sessions can be created on a single database over time, but only one active session can exist for any given database.</p>
<h3 id="create-a-database-upgrade-session">Create a database upgrade session</h3>
<ol>
<li><p>In SQL Server Management Studio, open the Object Explorer and connect to Database Engine.</p>
</li>
<li><p>For the database that is intended to upgrade the database compatibility level, right-click the database name, select <strong>Tasks</strong>, select <strong>Database Upgrade</strong>, and select <strong>New Database Upgrade Session</strong>.</p>
</li>
<li><p>In the QTA Wizard window, two steps are required to configure a session:</p>
<ol>
<li><p>In the <strong>Setup</strong> window, configure Query Store to capture the equivalent of one full business cycle of workload data to analyze and tune.</p>
<ul>
<li><p>Enter the expected workload duration in days (minimum is 1 day). This is used to propose recommended Query Store settings to tentatively allow the entire baseline to be collected. Capturing a good baseline is important to ensure any regressed queries found after changing the database compatibility level are able to be analyzed.</p>
</li>
<li><p>Set the intended target database compatibility level that the user database should be at, after the QTA workflow has completed.</p>
</li>
</ul>
<p>Once complete, select <strong>Next</strong>.</p>
<p><span class="mx-imgBorder">
<img src="media/upgrade-dbcompat-using-qta/qta-new-session-setup.png?view=sql-server-ver17" alt="Screenshot of New database upgrade session setup window." data-linktype="relative-path">
</span>
</p>
</li>
<li><p>In the <strong>Settings</strong> window, two columns show the <strong>Current</strong> state of Query Store in the targeted database, and the <strong>Recommended</strong> settings.</p>
<ul>
<li><p>The Recommended settings are selected by default, but selecting the radio button over the Current column accepts current settings, and also allows fine-tuning the current Query Store configuration.</p>
</li>
<li><p>The proposed <em>Stale Query Threshold</em> setting is twice the expected workload duration value, in days. This is because Query Store needs to hold information on the baseline workload and the post-database upgrade workload.</p>
</li>
</ul>
<p>Once complete, select <strong>Next</strong>.</p>
<p><span class="mx-imgBorder">
<img src="media/upgrade-dbcompat-using-qta/qta-new-session-settings.png?view=sql-server-ver17" alt="Screenshot of New database upgrade settings window." data-linktype="relative-path">
</span>
</p>
<div class="IMPORTANT">
<p>Important</p>
<p>The proposed <em>Max Size</em> is an arbitrary value that might be suited for a short timed workload. However, it might be insufficient to hold information on the baseline and post-database upgrade workloads for intensive workloads, namely when many different plans might be generated. If you anticipate this will be the case, enter a higher value that is appropriate.</p>
</div>
</li>
</ol>
</li>
<li><p>The <strong>Tuning</strong> window concludes the session configuration, and instructs on next steps to open and proceed with the session. Once complete, select <strong>Finish</strong>.</p>
<p><span class="mx-imgBorder">
<img src="media/upgrade-dbcompat-using-qta/qta-new-session-tuning.png?view=sql-server-ver17" alt="Screenshot of New database upgrade tuning window." data-linktype="relative-path">
</span>
</p>
</li>
</ol>
<h3 id="execute-the-database-upgrade-workflow">Execute the database upgrade workflow</h3>
<ol>
<li><p>For the database that is intended to upgrade the database compatibility level, right-click the database name, select <strong>Tasks</strong>, select <strong>Database Upgrade</strong>, and select <strong>Monitor Sessions</strong>.</p>
</li>
<li><p>The <strong>session management</strong> page lists current and past sessions for the database in scope. Select the desired session, and select <strong>Details</strong>.</p>
<div class="NOTE">
<p>Note</p>
<p>If the current session isn't present, select the <strong>Refresh</strong> button.</p>
</div>
<p>The list contains the following information:</p>
<ul>
<li><p><strong>Session ID</strong></p>
</li>
<li><p><strong>Session Name</strong>: System-generated name comprised of the database name, date, and time of session creation.</p>
</li>
<li><p><strong>Status</strong>: Status of the session (Active or Closed).</p>
</li>
<li><p><strong>Description</strong>: System-generated comprised of the user-selected target database compatibility level and number of days for business cycle workload.</p>
</li>
<li><p><strong>Time Started</strong>: Date and time of when the session was created.</p>
</li>
</ul>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-session-management.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-session-management.png?view=sql-server-ver17" alt="Screenshot of QTA Session Management page." data-linktype="relative-path">
</a>
</span>
</p>
<div class="NOTE">
<p>Note</p>
<p><strong>Delete Session</strong> deletes any data stored for the selected session. However, deleting a closed session does <strong>not</strong> delete any previously deployed plan guides. If you delete a session that deployed plan guides, then you can't use QTA to roll back. Instead, search for plan guides using the <a href="../system-catalog-views/sys-plan-guides-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.plan_guides</a> system table, and delete manually using <a href="../system-stored-procedures/sp-control-plan-guide-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sp_control_plan_guide</a>.</p>
</div>
</li>
<li><p>The entry point for a new session is the <strong>Data Collection</strong> step.</p>
<div class="NOTE">
<p>Note</p>
<p>The <strong>Sessions</strong> button returns to the <strong>session management</strong> page, leaving the active session as-is.</p>
</div>
<p>This step has three substeps:</p>
<ol>
<li><p><strong>Baseline Data Collection</strong> requests the user to run the representative workload cycle, so that Query Store can collect a baseline. Once that workload completes, check the <strong>Done with workload run</strong> and select <strong>Next</strong>.</p>
<div class="NOTE">
<p>Note</p>
<p>The QTA window can be closed while the workload runs. Returning to the session that remains in active state at a later time resumes from the same step where it was left off.</p>
</div>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-step2-substep1.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-step2-substep1.png?view=sql-server-ver17" alt="Screenshot of QTA Step 2 Substep 1." data-linktype="relative-path">
</a>
</span>
</p>
</li>
<li><p><strong>Upgrade Database</strong> prompts for permission to upgrade the database compatibility level to the desired target. To proceed to the next substep, select <strong>Yes</strong>.</p>
<p><span class="mx-imgBorder">
<img src="media/upgrade-dbcompat-using-qta/qta-step2-substep2-prompt.png?view=sql-server-ver17" alt="Screenshot of QTA Step 2 Substep 2 - Upgrade database compatibility level." data-linktype="relative-path">
</span>
</p>
<p>The following page confirms that the database compatibility level was successfully upgraded.</p>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-step2-substep2.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-step2-substep2.png?view=sql-server-ver17" alt="Screenshot of QTA Step 2 Substep 2." data-linktype="relative-path">
</a>
</span>
</p>
</li>
<li><p><strong>Observed Data Collection</strong> requests the user to run the representative workload cycle again, so that Query Store can collect a comparative baseline that is used to search for optimization opportunities. As the workload executes, use the <strong>Refresh</strong> button to keep updating the list of regressed queries, if any were found. Change the <strong>Queries to show</strong> value to limit the number of queries displayed. The order of the list is affected by the <strong>Metric</strong> (Duration or CpuTime) and the <strong>Aggregation</strong> (Average is default). Also select how many <strong>Queries to show</strong>. Once that workload completes, check the <strong>Done with workload run</strong> and select <strong>Next</strong>.</p>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-step2-substep3.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-step2-substep3.png?view=sql-server-ver17" alt="Screenshot of QTA Step 2 Substep 3." data-linktype="relative-path">
</a>
</span>
</p>
<p>The list contains the following information:</p>
<ul>
<li><p><strong>Query ID</strong></p>
</li>
<li><p><strong>Query Text</strong>: Transact-SQL statement that can be expanded by selecting the <strong>...</strong> button.</p>
</li>
<li><p><strong>Runs</strong>: Displays the number of executions of that query for the entire workload collection.</p>
</li>
<li><p><strong>Baseline Metric</strong>: The selected metric (Duration or CpuTime) in ms for the baseline data collection before the database compatibility upgrade.</p>
</li>
<li><p><strong>Observed Metric</strong>: The selected metric (Duration or CpuTime) in ms for the data collection after the database compatibility upgrade.</p>
</li>
<li><p><strong>% Change</strong>: Percent change for the selected metric between the before and after database compatibility upgrade state. A negative number represents the amount of measured regression for the query.</p>
</li>
<li><p><strong>Tunable</strong>: <em>True</em> or <em>False</em> depending on whether the query is eligible for experimentation.</p>
</li>
</ul>
</li>
</ol>
</li>
<li><p><strong>View Analysis</strong> allows selection of which queries to experiment and find optimization opportunities. The <strong>Queries to show</strong> value becomes the scope of eligible queries to experiment on. Once the desired queries are checked, select <strong>Next</strong> to start experimentation.</p>
<p>Queries with <strong>Tunable</strong> set to <em>False</em> can't be selected for experimentation.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>A prompt advises that once QTA moves to the experimentation phase, returning to the View Analysis page isn't possible. If you don't select all eligible queries before moving to the experimentation phase, you need to create a new session at a later time, and repeat the workflow. This requires reset of database compatibility level to the previous value.</p>
</div>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-step3.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-step3.png?view=sql-server-ver17" alt="Screenshot of QTA Step 3." data-linktype="relative-path">
</a>
</span>
</p>
</li>
<li><p><strong>View Findings</strong> allows selection of which queries to deploy the proposed optimization as a plan guide.</p>
<p>The list contains the following information:</p>
<ul>
<li><p><strong>Query ID</strong></p>
</li>
<li><p><strong>Query Text</strong>: Transact-SQL statement that can be expanded by selecting the <strong>...</strong> button.</p>
</li>
<li><p><strong>Status</strong>: Displays the current experimentation state for the query.</p>
</li>
<li><p><strong>Baseline Metric</strong>: The selected metric (Duration or CpuTime) in ms for the query as executed in <strong>Step 2 Substep 3</strong>, representing the regressed query after the database compatibility upgrade.</p>
</li>
<li><p><strong>Observed Metric</strong>: The selected metric (Duration or CpuTime) in ms for the query after experimentation, for a good enough proposed optimization.</p>
</li>
<li><p><strong>% Change</strong>: Specifies the percent change for the selected metric between the before and after experimentation state, representing the amount of measured improvement for the query with the proposed optimization.</p>
</li>
<li><p><strong>Query Option</strong>: Link to the proposed hint that improves query execution metric.</p>
</li>
<li><p><strong>Can Deploy</strong>: <em>True</em> or <em>False</em> depending on whether the proposed query optimization can be deployed as a plan guide.</p>
</li>
</ul>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-step4.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-step4.png?view=sql-server-ver17" alt="Screenshot of QTA Step 4." data-linktype="relative-path">
</a>
</span>
</p>
</li>
<li><p><strong>Verification</strong> shows the deployment status of previously selected queries for this session. The list in this page differs from the previous page by changing the <strong>Can Deploy</strong> column to <strong>Can Rollback</strong>. This column can be <em>True</em> or <em>False</em> depending on whether the deployed query optimization can be rolled back and its plan guide removed.</p>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-step5.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-step5.png?view=sql-server-ver17" alt="Screenshot of QTA Step 5." data-linktype="relative-path">
</a>
</span>
</p>
<p>If at a later date there's a need to roll back on a proposed optimization, then select the relevant query and select <strong>Rollback</strong>. That query plan guide is removed and the list updated to remove the rolled back query. Note in the picture below that query 8 was removed.</p>
<p><span class="mx-imgBorder">
<a href="media/upgrade-dbcompat-using-qta/qta-step5-rollback.png?view=sql-server-ver17#lightbox" data-linktype="relative-path">
<img src="media/upgrade-dbcompat-using-qta/qta-step5-rollback.png?view=sql-server-ver17" alt="Screenshot of QTA Step 5 - Rollback." data-linktype="relative-path">
</a>
</span>
</p>
<div class="NOTE">
<p>Note</p>
<p>Deleting a closed session does <strong>not</strong> delete any previously deployed plan guides. If you delete a session that deployed plan guides, then you can't use QTA to roll back. Instead, search for plan guides using the <a href="../system-catalog-views/sys-plan-guides-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.plan_guides</a> system table, and delete manually using <a href="../system-stored-procedures/sp-control-plan-guide-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sp_control_plan_guide</a>.</p>
</div>
</li>
</ol>
<h2 id="permissions">Permissions</h2>
<p>Requires membership of <strong>db_owner</strong> role.</p>
<h2 id="related-content">Related content</h2>
<ul>
<li><a href="../../t-sql/statements/alter-database-transact-sql-compatibility-level?view=sql-server-ver17#compatibility-levels-and-database-engine-upgrades" data-linktype="relative-path">Compatibility Levels and Database Engine Upgrades</a></li>
<li><a href="performance-monitoring-and-tuning-tools?view=sql-server-ver17" data-linktype="relative-path">Performance monitoring and tuning tools</a></li>
<li><a href="monitoring-performance-by-using-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Monitor performance by using the Query Store</a></li>
<li><a href="../../database-engine/install-windows/change-the-database-compatibility-mode-and-use-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Change the database compatibility level and use the Query Store</a></li>
<li><a href="../../t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql?view=sql-server-ver17" data-linktype="relative-path">Set trace flags with DBCC TRACEON (Transact-SQL)</a></li>
<li><a href="../../t-sql/queries/hints-transact-sql-query?view=sql-server-ver17#use_hint" data-linktype="relative-path">USE HINT query hints</a></li>
<li><a href="cardinality-estimation-sql-server?view=sql-server-ver17" data-linktype="relative-path">Cardinality Estimation (SQL Server)</a></li>
<li><a href="../automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a></li>
<li><a href="/en-us/training/modules/use-sql-server-query-tuning-assistant/" data-linktype="absolute-path">Use the SQL Server Query Tuning Assistant</a></li>
</ul>
</div>
					
		<div
			id="ms--inline-notifications"
			class="margin-block-xs"
			data-bi-name="inline-notification"
		></div>
	 
		<div
			id="assertive-live-region"
			role="alert"
			aria-live="assertive"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
		<div
			id="polite-live-region"
			role="status"
			aria-live="polite"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
	
					
		<!-- feedback section -->
		<section
			id="site-user-feedback-footer"
			class="font-size-sm margin-top-md display-none-print display-none-desktop"
			data-test-id="site-user-feedback-footer"
			data-bi-name="site-feedback-section"
		>
			<hr class="hr" />
			<h2 id="ms--feedback" class="title is-3">Feedback</h2>
			<div class="display-flex flex-wrap-wrap align-items-center">
				<p class="font-weight-semibold margin-xxs margin-left-none">
					Was this page helpful?
				</p>
				<div class="buttons">
					<button
						class="thumb-rating-button like button button-primary button-sm"
						data-test-id="footer-rating-yes"
						data-binary-rating-response="rating-yes"
						type="button"
						title="This article is helpful"
						data-bi-name="button-rating-yes"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-like"></span>
						</span>
						<span>Yes</span>
					</button>
					<button
						class="thumb-rating-button dislike button button-primary button-sm"
						id="standard-rating-no-button"
						hidden
						data-test-id="footer-rating-no"
						data-binary-rating-response="rating-no"
						type="button"
						title="This article is not helpful"
						data-bi-name="button-rating-no"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</button>
					<details
						class="popover popover-top"
						id="mobile-help-popover"
						data-test-id="footer-feedback-popover"
					>
						<summary
							class="thumb-rating-button dislike button button-primary button-sm"
							data-test-id="details-footer-rating-no"
							data-binary-rating-response="rating-no"
							title="This article is not helpful"
							data-bi-name="button-rating-no"
							aria-pressed="false"
							data-bi-an="feedback-unhelpful-popover"
						>
							<span class="icon" aria-hidden="true">
								<span class="docon docon-dislike"></span>
							</span>
							<span>No</span>
						</summary>
						<div
							class="popover-content width-200 width-300-tablet"
							role="dialog"
							aria-labelledby="popover-heading"
							aria-describedby="popover-description"
						>
							<p id="popover-heading" class="font-size-lg margin-bottom-xxs font-weight-semibold">
								Need help with this topic?
							</p>
							<p id="popover-description" class="font-size-sm margin-bottom-xs">
								Want to try using Ask Learn to clarify or guide you through this topic?
							</p>
							
		<div class="buttons flex-direction-row flex-wrap justify-content-center gap-xxs">
			<div>
		<button
			class="button button-sm border inner-focus display-none margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-test-id="ask-learn-assistant-modal-entry-mobile-feedback"
			data-ask-learn-modal-entry-feedback
			data-bi-an=feedback-unhelpful-popover
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-inline-flex display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-modal-entry-tablet-feedback"
			data-ask-learn-modal-entry-feedback
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-flyout-entry-feedback"
			data-ask-learn-flyout-entry-show-only
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	</div>
			<button
				type="button"
				class="button button-sm margin-right-xxs"
				data-help-option="suggest-fix"
				data-bi-name="feedback-suggest"
				data-bi-an="feedback-unhelpful-popover"
				data-test-id="suggest-fix"
			>
				<span class="icon" aria-hidden="true">
					<span class="docon docon-feedback"></span>
				</span>
				<span> Suggest a fix? </span>
			</button>
		</div>
	
						</div>
					</details>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
				</div>
				
		<div id="ms--additional-resources-mobile" class="display-none-print">
			<hr class="hr" hidden />
			<h2 id="ms--additional-resources-mobile-heading" class="title is-3" hidden>
				Additional resources
			</h2>
			
		<section
			id="right-rail-recommendations-mobile"
			class=""
			data-bi-name="recommendations"
			hidden
		></section>
	 
		<section
			id="right-rail-training-mobile"
			class=""
			data-bi-name="learning-resource-card"
			hidden
		></section>
	 
		<section
			id="right-rail-events-mobile"
			class=""
			data-bi-name="events-card"
			hidden
		></section>
	 
		<section
			id="right-rail-qna-mobile"
			class="margin-top-xxs"
			data-bi-name="qna-link-card"
			hidden
		></section>
	
		</div>
	 
		<div
			id="article-metadata-footer"
			data-bi-name="article-metadata-footer"
			data-test-id="article-metadata-footer"
			class="page-metadata-container"
		>
			<hr class="hr" />
			<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
				<li class="visibility-hidden-visual-diff">
			<span class="badge badge-sm text-wrap-pretty">
				<span>Last updated on <local-time format="twoDigitNumeric"
		datetime="2025-03-28T08:00:00.000Z"
		data-article-date-source="calculated"
		class="is-invisible"
	>
		2025-03-28
	</local-time></span>
			</span>
		</li>
			</ul>
		</div>
	
			</div>
			
		<div
			id="action-panel"
			role="region"
			aria-label="Action Panel"
			class="action-panel"
			tabindex="-1"
		></div>
	
		
				</main>
				<aside
					id="layout-body-aside"
					class="layout-body-aside "
					data-bi-name="aside"
			  >
					
		<div
			id="ms--additional-resources"
			class="right-container padding-sm display-none display-block-desktop height-full"
			data-bi-name="pageactions"
			role="complementary"
			aria-label="Additional resources"
		>
			<div id="affixed-right-container" data-bi-name="right-column">
				
		<nav
			id="side-doc-outline"
			class="doc-outline border-bottom padding-bottom-xs margin-bottom-xs"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h3>In this article</h3>
		</nav>
	
				<!-- Feedback -->
				
		<section
			id="ms--site-user-feedback-right-rail"
			class="font-size-sm display-none-print"
			data-test-id="site-user-feedback-right-rail"
			data-bi-name="site-feedback-right-rail"
		>
			<p class="font-weight-semibold margin-bottom-xs">Was this page helpful?</p>
			<div class="buttons">
				<button
					class="thumb-rating-button like button button-primary button-sm"
					data-test-id="right-rail-rating-yes"
					data-binary-rating-response="rating-yes"
					type="button"
					title="This article is helpful"
					data-bi-name="button-rating-yes"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-like"></span>
					</span>
					<span>Yes</span>
				</button>
				<button
					class="thumb-rating-button dislike button button-primary button-sm"
					id="right-rail-no-button"
					hidden
					data-test-id="right-rail-rating-no"
					data-binary-rating-response="rating-no"
					type="button"
					title="This article is not helpful"
					data-bi-name="button-rating-no"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-dislike"></span>
					</span>
					<span>No</span>
				</button>
				<details class="popover popover-right" id="help-popover" data-test-id="feedback-popover">
					<summary
						tabindex="0"
						class="thumb-rating-button dislike button button-primary button-sm"
						data-test-id="details-right-rail-rating-no"
						data-binary-rating-response="rating-no"
						title="This article is not helpful"
						data-bi-name="button-rating-no"
						aria-pressed="false"
						data-bi-an="feedback-unhelpful-popover"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</summary>
					<div
						class="popover-content width-200 width-300-tablet"
						role="dialog"
						aria-labelledby="popover-heading"
						aria-describedby="popover-description"
					>
						<p
							id="popover-heading-right-rail"
							class="font-size-lg margin-bottom-xxs font-weight-semibold"
						>
							Need help with this topic?
						</p>
						<p id="popover-description-right-rail" class="font-size-sm margin-bottom-xs">
							Want to try using Ask Learn to clarify or guide you through this topic?
						</p>
						
		<div class="buttons flex-direction-row flex-wrap justify-content-center gap-xxs">
			<div>
		<button
			class="button button-sm border inner-focus display-none margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-test-id="ask-learn-assistant-modal-entry-mobile-feedback"
			data-ask-learn-modal-entry-feedback
			data-bi-an=feedback-unhelpful-popover
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-inline-flex display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-modal-entry-tablet-feedback"
			data-ask-learn-modal-entry-feedback
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-flyout-entry-feedback"
			data-ask-learn-flyout-entry-show-only
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	</div>
			<button
				type="button"
				class="button button-sm margin-right-xxs"
				data-help-option="suggest-fix"
				data-bi-name="feedback-suggest"
				data-bi-an="feedback-unhelpful-popover"
				data-test-id="suggest-fix"
			>
				<span class="icon" aria-hidden="true">
					<span class="docon docon-feedback"></span>
				</span>
				<span> Suggest a fix? </span>
			</button>
		</div>
	
					</div>
				</details>
			</div>
		</section>
	
			</div>
		</div>
	
			  </aside> <section
					id="layout-body-flyout"
					class="layout-body-flyout "
					data-bi-name="flyout"
			  >
					 <div
	class="height-full border-left background-color-body-medium"
	id="ask-learn-flyout"
></div>
			  </section> <div class="layout-body-footer " data-bi-name="layout-footer">
		<footer
			id="footer"
			data-test-id="footer"
			data-bi-name="footer"
			class="footer-layout has-padding has-default-focus border-top  uhf-container"
			role="contentinfo"
		>
			<div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop">
				
		<a
			data-mscc-ic="false"
			href="#"
			data-bi-name="select-locale"
			class="locale-selector-link flex-shrink-0 button button-sm button-clear external-link-indicator"
			id=""
			title=""
			><span class="icon" aria-hidden="true"
				><span class="docon docon-world"></span></span
			><span class="local-selector-link-text">en-us</span></a
		>
	 <div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
		
		<a
			data-mscc-ic="false"
			href="https://aka.ms/yourcaliforniaprivacychoices"
			data-bi-name="your-privacy-choices"
			class="button button-sm button-clear flex-shrink-0 external-link-indicator"
			id=""
			title=""
			>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			viewBox="0 0 30 14"
			xml:space="preserve"
			height="16"
			width="43"
			aria-hidden="true"
			focusable="false"
		>
			<path
				d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"
			></path>
			<path
				d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"
			></path>
			<path
				d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z"
				style="fill:#fff"
			></path>
			<path
				d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z"
				style="fill:#06f"
			></path>
		</svg>
	
			<span>Your Privacy Choices</span></a
		>
	
	</div>
				<div class="flex-shrink-0">
		<div class="dropdown has-caret-up">
			<button
				data-test-id="theme-selector-button"
				class="dropdown-trigger button button-clear button-sm inner-focus theme-dropdown-trigger"
				aria-controls="{{ themeMenuId }}"
				aria-expanded="false"
				title="Theme"
				data-bi-name="theme"
			>
				<span class="icon">
					<span class="docon docon-sun" aria-hidden="true"></span>
				</span>
				<span>Theme</span>
				<span class="icon expanded-indicator" aria-hidden="true">
					<span class="docon docon-chevron-down-light"></span>
				</span>
			</button>
			<div class="dropdown-menu" id="{{ themeMenuId }}" role="menu">
				<ul class="theme-selector padding-xxs" data-test-id="theme-dropdown-menu">
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="light"
						>
							<span class="theme-light margin-right-xxs">
								<span
									class="theme-selector-icon border display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Light </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="dark"
						>
							<span class="theme-dark margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Dark </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="high-contrast"
						>
							<span class="theme-high-contrast margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> High contrast </span>
						</button>
					</li>
				</ul>
			</div>
		</div>
	</div>
			</div>
			<ul class="links" data-bi-name="footerlinks">
				<li class="manage-cookies-holder" hidden=""></li>
				<li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/principles-for-ai-generated-content"
			data-bi-name="aiDisclaimer"
			class=" external-link-indicator"
			id=""
			title=""
			>AI Disclaimer</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/previous-versions/"
			data-bi-name="archivelink"
			class=" external-link-indicator"
			id=""
			title=""
			>Previous Versions</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog"
			data-bi-name="bloglink"
			class=" external-link-indicator"
			id=""
			title=""
			>Blog</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/contribute"
			data-bi-name="contributorGuide"
			class=" external-link-indicator"
			id=""
			title=""
			>Contribute</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://go.microsoft.com/fwlink/?LinkId=521839"
			data-bi-name="privacy"
			class=" external-link-indicator"
			id=""
			title=""
			>Privacy</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/legal/termsofuse"
			data-bi-name="termsofuse"
			class=" external-link-indicator"
			id=""
			title=""
			>Terms of Use</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/"
			data-bi-name="trademarks"
			class=" external-link-indicator"
			id=""
			title=""
			>Trademarks</a
		>
	
	</li>
				<li>&copy; Microsoft 2026</li>
			</ul>
		</footer>
	</footer>
			</body>
		</html>