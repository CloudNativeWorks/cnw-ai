<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 9.6: The Statistics Collector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/9.6/monitoring-stats.html" />
  <meta property="og:type" content="article" />

  <meta property="article:published_time" content="2021-08-12T13:02:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="The Statistics Collector" />
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />
  <link href="/media/css/fontawesome.css?77152761" rel="stylesheet">
  <link rel="stylesheet" href="/media/css/bootstrap-4.4.1.min.css">
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" type="text/css" href="/dyncss/base.css?77152761">

  <script src="/media/js/theme.js?77152761"></script>

  
  <meta name="robots" content="nofollow" />

  <link rel="canonical" href="https://www.postgresql.org/docs/current/monitoring-stats.html" />


  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          <!-- Header -->
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand p-0" href="/">
              <img class="logo" src="/media/img/about/press/elephant.png" alt="PostgreSQL Elephant Logo">
            </a>
            <input type="checkbox" id="navbar-toggler" aria-controls="pgNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <label for="navbar-toggler" id="navbar-toggler-label" class="navbar-toggler" tabindex="0"><span class="navbar-toggler-icon"></span></label>
            <div class="navbar-collapse" id="pgNavbar">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item p-2"><a href="/" title="Home">Home</a></li>
                <li class="nav-item p-2"><a href="/about/" title="About">About</a></li>
                <li class="nav-item p-2"><a href="/download/" title="Download">Download</a></li>
                <li class="nav-item p-2"><a href="/docs/" title="Documentation">Documentation</a></li>
                <li class="nav-item p-2"><a href="/community/" title="Community">Community</a></li>
                <li class="nav-item p-2"><a href="/developer/" title="Developers">Developers</a></li>
                <li class="nav-item p-2"><a href="/support/" title="Support">Support</a></li>
                <li class="nav-item p-2"><a href="/about/donate/" title="Donate">Donate</a></li>
                <li class="nav-item p-2"><a href="/account/" title="Your account">Your account</a></li>
              </ul>
              <form role="search" method="get" action="/search/">
                <div class="input-group">
                  <input id="q" name="q" type="text" size="20" maxlength="255" accesskey="s"  class="form-control" placeholder="Search for...">
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
              <form id="form-theme" class="form-inline d-none">
                <button id="btn-theme" class="btn btn-default ml-1" type="button"></button>
              </form>
            </div>
          </nav>
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 16, 2026: <a href="/about/news/out-of-cycle-release-scheduled-for-february-26-2026-3241/">
  Out-of-cycle release scheduled for February 26, 2026
</a>
</div>
      </div>
    </div>
    
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/9.6/index.html">PostgreSQL 9.6</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/monitoring-stats.html" title="PostgreSQL 18 - The Statistics Collector" >Current</a>
                          (<a href="/docs/18/monitoring-stats.html" title="PostgreSQL 18 - The Statistics Collector" >18</a>)
                        
                      
                         / 
                        
                          <a href="/docs/17/monitoring-stats.html" title="PostgreSQL 17 - The Statistics Collector" >17</a>
                        
                      
                         / 
                        
                          <a href="/docs/16/monitoring-stats.html" title="PostgreSQL 16 - The Statistics Collector" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/monitoring-stats.html" title="PostgreSQL 15 - The Statistics Collector" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/monitoring-stats.html" title="PostgreSQL 14 - The Statistics Collector" >14</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/monitoring-stats.html" title="PostgreSQL devel - The Statistics Collector"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/13/monitoring-stats.html" title="PostgreSQL 13 - The Statistics Collector"  rel="nofollow">13</a>
                    
                       / 
                      <a href="/docs/12/monitoring-stats.html" title="PostgreSQL 12 - The Statistics Collector"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/monitoring-stats.html" title="PostgreSQL 11 - The Statistics Collector"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/monitoring-stats.html" title="PostgreSQL 10 - The Statistics Collector"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/monitoring-stats.html" title="PostgreSQL 9.6 - The Statistics Collector" class="docs-version-selected" rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/monitoring-stats.html" title="PostgreSQL 9.5 - The Statistics Collector"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/monitoring-stats.html" title="PostgreSQL 9.4 - The Statistics Collector"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/monitoring-stats.html" title="PostgreSQL 9.3 - The Statistics Collector"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/monitoring-stats.html" title="PostgreSQL 9.2 - The Statistics Collector"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/monitoring-stats.html" title="PostgreSQL 9.1 - The Statistics Collector"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/monitoring-stats.html" title="PostgreSQL 9.0 - The Statistics Collector"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/monitoring-stats.html" title="PostgreSQL 8.4 - The Statistics Collector"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/monitoring-stats.html" title="PostgreSQL 8.3 - The Statistics Collector"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/monitoring-stats.html" title="PostgreSQL 8.2 - The Statistics Collector"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/monitoring-stats.html" title="PostgreSQL 8.1 - The Statistics Collector"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/monitoring-stats.html" title="PostgreSQL 8.0 - The Statistics Collector"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/monitoring-stats.html" title="PostgreSQL 7.4 - The Statistics Collector"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/monitoring-stats.html" title="PostgreSQL 7.3 - The Statistics Collector"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/monitoring-stats.html" title="PostgreSQL 7.2 - The Statistics Collector"  rel="nofollow">7.2</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/9.6/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div><!-- /input-group -->
              </form>
            </div>
          </div>

	  <div class="text-center alert-warning">
	    This documentation is for an unsupported version of PostgreSQL.<br/>
	    You may want to view the same page for the
	    <a href="/docs/current/monitoring-stats.html" title="PostgreSQL  - The Statistics Collector">current</a>
	    version, or one of the other supported versions listed above instead.
	  </div>

          <div id="docContent">
            <div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<th colspan="4" align="center" valign="bottom"><a href="index.html">PostgreSQL 9.6.24 Documentation</a></th>
</tr>
<tr>
<td width="10%" align="left" valign="top"><a title="Standard Unix Tools" href="monitoring-ps.html" accesskey="P">Prev</a></td>
<td width="10%" align="left" valign="top"><a href="monitoring.html" accesskey="U">Up</a></td>
<td width="60%" align="center" valign="bottom">Chapter 28. Monitoring Database Activity</td>
<td width="20%" align="right" valign="top"><a title="Viewing Locks" href="monitoring-locks.html" accesskey="N">Next</a></td>
</tr>
</table>
<hr class="c1" width="100%" /></div>
<div class="SECT1">
<h1 class="SECT1"><a name="MONITORING-STATS" id="MONITORING-STATS">28.2. The Statistics Collector</a></h1>
<p><span class="PRODUCTNAME">PostgreSQL</span>'s <i class="FIRSTTERM">statistics collector</i> is a subsystem that supports collection and reporting of information about server activity. Presently, the collector can count accesses to tables and indexes in both disk-block and individual-row terms. It also tracks the total number of rows in each table, and information about vacuum and analyze actions for each table. It can also count calls to user-defined functions and the total time spent in each one.</p>
<p><span class="PRODUCTNAME">PostgreSQL</span> also supports reporting dynamic information about exactly what is going on in the system right now, such as the exact command currently being executed by other server processes, and which other connections exist in the system. This facility is independent of the collector process.</p>
<div class="SECT2">
<h2 class="SECT2"><a name="MONITORING-STATS-SETUP" id="MONITORING-STATS-SETUP">28.2.1. Statistics Collection Configuration</a></h2>
<p>Since collection of statistics adds some overhead to query execution, the system can be configured to collect or not collect information. This is controlled by configuration parameters that are normally set in <tt class="FILENAME">postgresql.conf</tt>. (See <a href="runtime-config.html">Chapter 19</a> for details about setting configuration parameters.)</p>
<p>The parameter <a href="runtime-config-statistics.html#GUC-TRACK-ACTIVITIES">track_activities</a> enables monitoring of the current command being executed by any server process.</p>
<p>The parameter <a href="runtime-config-statistics.html#GUC-TRACK-COUNTS">track_counts</a> controls whether statistics are collected about table and index accesses.</p>
<p>The parameter <a href="runtime-config-statistics.html#GUC-TRACK-FUNCTIONS">track_functions</a> enables tracking of usage of user-defined functions.</p>
<p>The parameter <a href="runtime-config-statistics.html#GUC-TRACK-IO-TIMING">track_io_timing</a> enables monitoring of block read and write times.</p>
<p>Normally these parameters are set in <tt class="FILENAME">postgresql.conf</tt> so that they apply to all server processes, but it is possible to turn them on or off in individual sessions using the <a href="sql-set.html">SET</a> command. (To prevent ordinary users from hiding their activity from the administrator, only superusers are allowed to change these parameters with <tt class="COMMAND">SET</tt>.)</p>
<p>The statistics collector transmits the collected information to other <span class="PRODUCTNAME">PostgreSQL</span> processes through temporary files. These files are stored in the directory named by the <a href="runtime-config-statistics.html#GUC-STATS-TEMP-DIRECTORY">stats_temp_directory</a> parameter, <tt class="FILENAME">pg_stat_tmp</tt> by default. For better performance, <tt class="VARNAME">stats_temp_directory</tt> can be pointed at a RAM-based file system, decreasing physical I/O requirements. When the server shuts down cleanly, a permanent copy of the statistics data is stored in the <tt class="FILENAME">pg_stat</tt> subdirectory, so that statistics can be retained across server restarts. When recovery is performed at server start (e.g., after immediate shutdown, server crash, and point-in-time recovery), all statistics counters are reset.</p>
</div>
<div class="SECT2">
<h2 class="SECT2"><a name="MONITORING-STATS-VIEWS" id="MONITORING-STATS-VIEWS">28.2.2. Viewing Statistics</a></h2>
<p>Several predefined views, listed in <a href="monitoring-stats.html#MONITORING-STATS-DYNAMIC-VIEWS-TABLE">Table 28-1</a>, are available to show the current state of the system. There are also several other views, listed in <a href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE">Table 28-2</a>, available to show the results of statistics collection. Alternatively, one can build custom views using the underlying statistics functions, as discussed in <a href="monitoring-stats.html#MONITORING-STATS-FUNCTIONS">Section 28.2.3</a>.</p>
<p>When using the statistics to monitor collected data, it is important to realize that the information does not update instantaneously. Each individual server process transmits new statistical counts to the collector just before going idle; so a query or transaction still in progress does not affect the displayed totals. Also, the collector itself emits a new report at most once per <tt class="VARNAME">PGSTAT_STAT_INTERVAL</tt> milliseconds (500 ms unless altered while building the server). So the displayed information lags behind actual activity. However, current-query information collected by <tt class="VARNAME">track_activities</tt> is always up-to-date.</p>
<p>Another important point is that when a server process is asked to display any of these statistics, it first fetches the most recent report emitted by the collector process and then continues to use this snapshot for all statistical views and functions until the end of its current transaction. So the statistics will show static information as long as you continue the current transaction. Similarly, information about the current queries of all sessions is collected when any such information is first requested within a transaction, and the same information will be displayed throughout the transaction. This is a feature, not a bug, because it allows you to perform several queries on the statistics and correlate the results without worrying that the numbers are changing underneath you. But if you want to see new results with each query, be sure to do the queries outside any transaction block. Alternatively, you can invoke <code class="FUNCTION">pg_stat_clear_snapshot</code>(), which will discard the current transaction's statistics snapshot (if any). The next use of statistical information will cause a new snapshot to be fetched.</p>
<p>A transaction can also see its own statistics (as yet untransmitted to the collector) in the views <tt class="STRUCTNAME">pg_stat_xact_all_tables</tt>, <tt class="STRUCTNAME">pg_stat_xact_sys_tables</tt>, <tt class="STRUCTNAME">pg_stat_xact_user_tables</tt>, and <tt class="STRUCTNAME">pg_stat_xact_user_functions</tt>. These numbers do not act as stated above; instead they update continuously throughout the transaction.</p>
<div class="TABLE"><a name="MONITORING-STATS-DYNAMIC-VIEWS-TABLE" id="MONITORING-STATS-DYNAMIC-VIEWS-TABLE"></a>
<p><b>Table 28-1. Dynamic Statistics Views</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>View Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTNAME">pg_stat_activity</tt></td>
<td>One row per server process, showing information related to the current activity of that process, such as state and current query. See <a href="monitoring-stats.html#PG-STAT-ACTIVITY-VIEW">pg_stat_activity</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_replication</tt></td>
<td>One row per WAL sender process, showing statistics about replication to that sender's connected standby server. See <a href="monitoring-stats.html#PG-STAT-REPLICATION-VIEW">pg_stat_replication</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_wal_receiver</tt></td>
<td>Only one row, showing statistics about the WAL receiver from that receiver's connected server. See <a href="monitoring-stats.html#PG-STAT-WAL-RECEIVER-VIEW">pg_stat_wal_receiver</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_ssl</tt></td>
<td>One row per connection (regular and replication), showing information about SSL used on this connection. See <a href="monitoring-stats.html#PG-STAT-SSL-VIEW">pg_stat_ssl</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_progress_vacuum</tt></td>
<td>One row for each backend (including autovacuum worker processes) running <tt class="COMMAND">VACUUM</tt>, showing current progress. See <a href="progress-reporting.html#VACUUM-PROGRESS-REPORTING">Section 28.4.1</a>.</td>
</tr>
</tbody>
</table>
</div>
<div class="TABLE"><a name="MONITORING-STATS-VIEWS-TABLE" id="MONITORING-STATS-VIEWS-TABLE"></a>
<p><b>Table 28-2. Collected Statistics Views</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>View Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTNAME">pg_stat_archiver</tt></td>
<td>One row only, showing statistics about the WAL archiver process's activity. See <a href="monitoring-stats.html#PG-STAT-ARCHIVER-VIEW">pg_stat_archiver</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_bgwriter</tt></td>
<td>One row only, showing statistics about the background writer process's activity. See <a href="monitoring-stats.html#PG-STAT-BGWRITER-VIEW">pg_stat_bgwriter</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_database</tt></td>
<td>One row per database, showing database-wide statistics. See <a href="monitoring-stats.html#PG-STAT-DATABASE-VIEW">pg_stat_database</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_database_conflicts</tt></td>
<td>One row per database, showing database-wide statistics about query cancels due to conflict with recovery on standby servers. See <a href="monitoring-stats.html#PG-STAT-DATABASE-CONFLICTS-VIEW">pg_stat_database_conflicts</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_all_tables</tt></td>
<td>One row for each table in the current database, showing statistics about accesses to that specific table. See <a href="monitoring-stats.html#PG-STAT-ALL-TABLES-VIEW">pg_stat_all_tables</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_sys_tables</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_stat_all_tables</tt>, except that only system tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_user_tables</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_stat_all_tables</tt>, except that only user tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_xact_all_tables</tt></td>
<td>Similar to <tt class="STRUCTNAME">pg_stat_all_tables</tt>, but counts actions taken so far within the current transaction (which are <span class="emphasis EMPHASIS c2">not</span> yet included in <tt class="STRUCTNAME">pg_stat_all_tables</tt> and related views). The columns for numbers of live and dead rows and vacuum and analyze actions are not present in this view.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_xact_sys_tables</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_stat_xact_all_tables</tt>, except that only system tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_xact_user_tables</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_stat_xact_all_tables</tt>, except that only user tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_all_indexes</tt></td>
<td>One row for each index in the current database, showing statistics about accesses to that specific index. See <a href="monitoring-stats.html#PG-STAT-ALL-INDEXES-VIEW">pg_stat_all_indexes</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_sys_indexes</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_stat_all_indexes</tt>, except that only indexes on system tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_user_indexes</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_stat_all_indexes</tt>, except that only indexes on user tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_all_tables</tt></td>
<td>One row for each table in the current database, showing statistics about I/O on that specific table. See <a href="monitoring-stats.html#PG-STATIO-ALL-TABLES-VIEW">pg_statio_all_tables</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_sys_tables</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_statio_all_tables</tt>, except that only system tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_user_tables</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_statio_all_tables</tt>, except that only user tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_all_indexes</tt></td>
<td>One row for each index in the current database, showing statistics about I/O on that specific index. See <a href="monitoring-stats.html#PG-STATIO-ALL-INDEXES-VIEW">pg_statio_all_indexes</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_sys_indexes</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_statio_all_indexes</tt>, except that only indexes on system tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_user_indexes</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_statio_all_indexes</tt>, except that only indexes on user tables are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_all_sequences</tt></td>
<td>One row for each sequence in the current database, showing statistics about I/O on that specific sequence. See <a href="monitoring-stats.html#PG-STATIO-ALL-SEQUENCES-VIEW">pg_statio_all_sequences</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_sys_sequences</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_statio_all_sequences</tt>, except that only system sequences are shown. (Presently, no system sequences are defined, so this view is always empty.)</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_statio_user_sequences</tt></td>
<td>Same as <tt class="STRUCTNAME">pg_statio_all_sequences</tt>, except that only user sequences are shown.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_user_functions</tt></td>
<td>One row for each tracked function, showing statistics about executions of that function. See <a href="monitoring-stats.html#PG-STAT-USER-FUNCTIONS-VIEW">pg_stat_user_functions</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTNAME">pg_stat_xact_user_functions</tt></td>
<td>Similar to <tt class="STRUCTNAME">pg_stat_user_functions</tt>, but counts only calls during the current transaction (which are <span class="emphasis EMPHASIS c2">not</span> yet included in <tt class="STRUCTNAME">pg_stat_user_functions</tt>).</td>
</tr>
</tbody>
</table>
</div>
<p>The per-index statistics are particularly useful to determine which indexes are being used and how effective they are.</p>
<p>The <tt class="STRUCTNAME">pg_statio_</tt> views are primarily useful to determine the effectiveness of the buffer cache. When the number of actual disk reads is much smaller than the number of buffer hits, then the cache is satisfying most read requests without invoking a kernel call. However, these statistics do not give the entire story: due to the way in which <span class="PRODUCTNAME">PostgreSQL</span> handles disk I/O, data that is not in the <span class="PRODUCTNAME">PostgreSQL</span> buffer cache might still reside in the kernel's I/O cache, and might therefore still be fetched without requiring a physical read. Users interested in obtaining more detailed information on <span class="PRODUCTNAME">PostgreSQL</span> I/O behavior are advised to use the <span class="PRODUCTNAME">PostgreSQL</span> statistics collector in combination with operating system utilities that allow insight into the kernel's handling of I/O.</p>
<div class="TABLE"><a name="PG-STAT-ACTIVITY-VIEW" id="PG-STAT-ACTIVITY-VIEW"></a>
<p><b>Table 28-3. <tt class="STRUCTNAME">pg_stat_activity</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">datid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of the database this backend is connected to</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">datname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the database this backend is connected to</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">pid</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Process ID of this backend</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">usesysid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of the user logged into this backend</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">usename</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the user logged into this backend</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">application_name</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Name of the application that is connected to this backend</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">client_addr</tt></td>
<td><tt class="TYPE">inet</tt></td>
<td>IP address of the client connected to this backend. If this field is null, it indicates either that the client is connected via a Unix socket on the server machine or that this is an internal process such as autovacuum.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">client_hostname</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Host name of the connected client, as reported by a reverse DNS lookup of <tt class="STRUCTFIELD">client_addr</tt>. This field will only be non-null for IP connections, and only when <a href="runtime-config-logging.html#GUC-LOG-HOSTNAME">log_hostname</a> is enabled.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">client_port</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>TCP port number that the client is using for communication with this backend, or <tt class="LITERAL">-1</tt> if a Unix socket is used</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">backend_start</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when this process was started, i.e., when the client connected to the server</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">xact_start</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when this process' current transaction was started, or null if no transaction is active. If the current query is the first of its transaction, this column is equal to the <tt class="STRUCTFIELD">query_start</tt> column.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">query_start</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when the currently active query was started, or if <tt class="STRUCTFIELD">state</tt> is not <tt class="LITERAL">active</tt>, when the last query was started</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">state_change</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when the <tt class="STRUCTFIELD">state</tt> was last changed</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">wait_event_type</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>The type of event for which the backend is waiting, if any; otherwise NULL. Possible values are:
<ul>
<li>
<p><tt class="LITERAL">LWLockNamed</tt>: The backend is waiting for a specific named lightweight lock. Each such lock protects a particular data structure in shared memory. <tt class="LITERAL">wait_event</tt> will contain the name of the lightweight lock.</p>
</li>
<li>
<p><tt class="LITERAL">LWLockTranche</tt>: The backend is waiting for one of a group of related lightweight locks. All locks in the group perform a similar function; <tt class="LITERAL">wait_event</tt> will identify the general purpose of locks in that group.</p>
</li>
<li>
<p><tt class="LITERAL">Lock</tt>: The backend is waiting for a heavyweight lock. Heavyweight locks, also known as lock manager locks or simply locks, primarily protect SQL-visible objects such as tables. However, they are also used to ensure mutual exclusion for certain internal operations such as relation extension. <tt class="LITERAL">wait_event</tt> will identify the type of lock awaited.</p>
</li>
<li>
<p><tt class="LITERAL">BufferPin</tt>: The server process is waiting to access to a data buffer during a period when no other process can be examining that buffer. Buffer pin waits can be protracted if another process holds an open cursor which last read data from the buffer in question.</p>
</li>
</ul>
</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">wait_event</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Wait event name if backend is currently waiting, otherwise NULL. See <a href="monitoring-stats.html#WAIT-EVENT-TABLE">Table 28-4</a> for details.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">state</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Current overall state of this backend. Possible values are:
<ul>
<li>
<p><tt class="LITERAL">active</tt>: The backend is executing a query.</p>
</li>
<li>
<p><tt class="LITERAL">idle</tt>: The backend is waiting for a new client command.</p>
</li>
<li>
<p><tt class="LITERAL">idle in transaction</tt>: The backend is in a transaction, but is not currently executing a query.</p>
</li>
<li>
<p><tt class="LITERAL">idle in transaction (aborted)</tt>: This state is similar to <tt class="LITERAL">idle in transaction</tt>, except one of the statements in the transaction caused an error.</p>
</li>
<li>
<p><tt class="LITERAL">fastpath function call</tt>: The backend is executing a fast-path function.</p>
</li>
<li>
<p><tt class="LITERAL">disabled</tt>: This state is reported if <a href="runtime-config-statistics.html#GUC-TRACK-ACTIVITIES">track_activities</a> is disabled in this backend.</p>
</li>
</ul>
</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">backend_xid</tt></td>
<td><tt class="TYPE">xid</tt></td>
<td>Top-level transaction identifier of this backend, if any.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">backend_xmin</tt></td>
<td><tt class="TYPE">xid</tt></td>
<td>The current backend's <tt class="LITERAL">xmin</tt> horizon.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">query</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Text of this backend's most recent query. If <tt class="STRUCTFIELD">state</tt> is <tt class="LITERAL">active</tt> this field shows the currently executing query. In all other states, it shows the last query that was executed.</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_activity</tt> view will have one row per server process, showing information related to the current activity of that process.</p>
<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> The <tt class="STRUCTFIELD">wait_event</tt> and <tt class="STRUCTFIELD">state</tt> columns are independent. If a backend is in the <tt class="LITERAL">active</tt> state, it may or may not be <tt class="LITERAL">waiting</tt> on some event. If the state is <tt class="LITERAL">active</tt> and <tt class="STRUCTFIELD">wait_event</tt> is non-null, it means that a query is being executed, but is being blocked somewhere in the system.</p>
</blockquote>
</div>
<div class="TABLE"><a name="WAIT-EVENT-TABLE" id="WAIT-EVENT-TABLE"></a>
<p><b>Table 28-4. <tt class="STRUCTNAME">wait_event</tt> Description</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Wait Event Type</th>
<th>Wait Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="44"><tt class="LITERAL">LWLockNamed</tt></td>
<td><tt class="LITERAL">ShmemIndexLock</tt></td>
<td>Waiting to find or allocate space in shared memory.</td>
</tr>
<tr>
<td><tt class="LITERAL">OidGenLock</tt></td>
<td>Waiting to allocate or assign an OID.</td>
</tr>
<tr>
<td><tt class="LITERAL">XidGenLock</tt></td>
<td>Waiting to allocate or assign a transaction id.</td>
</tr>
<tr>
<td><tt class="LITERAL">ProcArrayLock</tt></td>
<td>Waiting to get a snapshot or clearing a transaction id at transaction end.</td>
</tr>
<tr>
<td><tt class="LITERAL">SInvalReadLock</tt></td>
<td>Waiting to retrieve or remove messages from shared invalidation queue.</td>
</tr>
<tr>
<td><tt class="LITERAL">SInvalWriteLock</tt></td>
<td>Waiting to add a message in shared invalidation queue.</td>
</tr>
<tr>
<td><tt class="LITERAL">WALBufMappingLock</tt></td>
<td>Waiting to replace a page in WAL buffers.</td>
</tr>
<tr>
<td><tt class="LITERAL">WALWriteLock</tt></td>
<td>Waiting for WAL buffers to be written to disk.</td>
</tr>
<tr>
<td><tt class="LITERAL">ControlFileLock</tt></td>
<td>Waiting to read or update the control file or creation of a new WAL file.</td>
</tr>
<tr>
<td><tt class="LITERAL">CheckpointLock</tt></td>
<td>Waiting to perform checkpoint.</td>
</tr>
<tr>
<td><tt class="LITERAL">CLogControlLock</tt></td>
<td>Waiting to read or update transaction status.</td>
</tr>
<tr>
<td><tt class="LITERAL">SubtransControlLock</tt></td>
<td>Waiting to read or update sub-transaction information.</td>
</tr>
<tr>
<td><tt class="LITERAL">MultiXactGenLock</tt></td>
<td>Waiting to read or update shared multixact state.</td>
</tr>
<tr>
<td><tt class="LITERAL">MultiXactOffsetControlLock</tt></td>
<td>Waiting to read or update multixact offset mappings.</td>
</tr>
<tr>
<td><tt class="LITERAL">MultiXactMemberControlLock</tt></td>
<td>Waiting to read or update multixact member mappings.</td>
</tr>
<tr>
<td><tt class="LITERAL">RelCacheInitLock</tt></td>
<td>Waiting to read or write relation cache initialization file.</td>
</tr>
<tr>
<td><tt class="LITERAL">CheckpointerCommLock</tt></td>
<td>Waiting to manage fsync requests.</td>
</tr>
<tr>
<td><tt class="LITERAL">TwoPhaseStateLock</tt></td>
<td>Waiting to read or update the state of prepared transactions.</td>
</tr>
<tr>
<td><tt class="LITERAL">TablespaceCreateLock</tt></td>
<td>Waiting to create or drop the tablespace.</td>
</tr>
<tr>
<td><tt class="LITERAL">BtreeVacuumLock</tt></td>
<td>Waiting to read or update vacuum-related information for a B-tree index.</td>
</tr>
<tr>
<td><tt class="LITERAL">AddinShmemInitLock</tt></td>
<td>Waiting to manage space allocation in shared memory.</td>
</tr>
<tr>
<td><tt class="LITERAL">AutovacuumLock</tt></td>
<td>Autovacuum worker or launcher waiting to update or read the current state of autovacuum workers.</td>
</tr>
<tr>
<td><tt class="LITERAL">AutovacuumScheduleLock</tt></td>
<td>Waiting to ensure that the table it has selected for a vacuum still needs vacuuming.</td>
</tr>
<tr>
<td><tt class="LITERAL">SyncScanLock</tt></td>
<td>Waiting to get the start location of a scan on a table for synchronized scans.</td>
</tr>
<tr>
<td><tt class="LITERAL">RelationMappingLock</tt></td>
<td>Waiting to update the relation map file used to store catalog to filenode mapping.</td>
</tr>
<tr>
<td><tt class="LITERAL">AsyncCtlLock</tt></td>
<td>Waiting to read or update shared notification state.</td>
</tr>
<tr>
<td><tt class="LITERAL">AsyncQueueLock</tt></td>
<td>Waiting to read or update notification messages.</td>
</tr>
<tr>
<td><tt class="LITERAL">SerializableXactHashLock</tt></td>
<td>Waiting to retrieve or store information about serializable transactions.</td>
</tr>
<tr>
<td><tt class="LITERAL">SerializableFinishedListLock</tt></td>
<td>Waiting to access the list of finished serializable transactions.</td>
</tr>
<tr>
<td><tt class="LITERAL">SerializablePredicateLockListLock</tt></td>
<td>Waiting to perform an operation on a list of locks held by serializable transactions.</td>
</tr>
<tr>
<td><tt class="LITERAL">OldSerXidLock</tt></td>
<td>Waiting to read or record conflicting serializable transactions.</td>
</tr>
<tr>
<td><tt class="LITERAL">SyncRepLock</tt></td>
<td>Waiting to read or update information about synchronous replicas.</td>
</tr>
<tr>
<td><tt class="LITERAL">BackgroundWorkerLock</tt></td>
<td>Waiting to read or update background worker state.</td>
</tr>
<tr>
<td><tt class="LITERAL">DynamicSharedMemoryControlLock</tt></td>
<td>Waiting to read or update dynamic shared memory state.</td>
</tr>
<tr>
<td><tt class="LITERAL">AutoFileLock</tt></td>
<td>Waiting to update the <tt class="FILENAME">postgresql.auto.conf</tt> file.</td>
</tr>
<tr>
<td><tt class="LITERAL">ReplicationSlotAllocationLock</tt></td>
<td>Waiting to allocate or free a replication slot.</td>
</tr>
<tr>
<td><tt class="LITERAL">ReplicationSlotControlLock</tt></td>
<td>Waiting to read or update replication slot state.</td>
</tr>
<tr>
<td><tt class="LITERAL">CommitTsControlLock</tt></td>
<td>Waiting to read or update transaction commit timestamps.</td>
</tr>
<tr>
<td><tt class="LITERAL">CommitTsLock</tt></td>
<td>Waiting to read or update the last value set for the transaction timestamp.</td>
</tr>
<tr>
<td><tt class="LITERAL">ReplicationOriginLock</tt></td>
<td>Waiting to setup, drop or use replication origin.</td>
</tr>
<tr>
<td><tt class="LITERAL">MultiXactTruncationLock</tt></td>
<td>Waiting to read or truncate multixact information.</td>
</tr>
<tr>
<td><tt class="LITERAL">OldSnapshotTimeMapLock</tt></td>
<td>Waiting to read or update old snapshot control information.</td>
</tr>
<tr>
<td><tt class="LITERAL">WrapLimitsVacuumLock</tt></td>
<td>Waiting to update limits on transaction id and multixact consumption.</td>
</tr>
<tr>
<td><tt class="LITERAL">NotifyQueueTailLock</tt></td>
<td>Waiting to update limit on notification message storage.</td>
</tr>
<tr>
<td rowspan="16"><tt class="LITERAL">LWLockTranche</tt></td>
<td><tt class="LITERAL">clog</tt></td>
<td>Waiting for I/O on a clog (transaction status) buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">commit_timestamp</tt></td>
<td>Waiting for I/O on commit timestamp buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">subtrans</tt></td>
<td>Waiting for I/O a subtransaction buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">multixact_offset</tt></td>
<td>Waiting for I/O on a multixact offset buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">multixact_member</tt></td>
<td>Waiting for I/O on a multixact_member buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">async</tt></td>
<td>Waiting for I/O on an async (notify) buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">oldserxid</tt></td>
<td>Waiting to I/O on an oldserxid buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">wal_insert</tt></td>
<td>Waiting to insert WAL into a memory buffer.</td>
</tr>
<tr>
<td><tt class="LITERAL">buffer_content</tt></td>
<td>Waiting to read or write a data page in memory.</td>
</tr>
<tr>
<td><tt class="LITERAL">buffer_io</tt></td>
<td>Waiting for I/O on a data page.</td>
</tr>
<tr>
<td><tt class="LITERAL">replication_origin</tt></td>
<td>Waiting to read or update the replication progress.</td>
</tr>
<tr>
<td><tt class="LITERAL">replication_slot_io</tt></td>
<td>Waiting for I/O on a replication slot.</td>
</tr>
<tr>
<td><tt class="LITERAL">proc</tt></td>
<td>Waiting to read or update the fast-path lock information.</td>
</tr>
<tr>
<td><tt class="LITERAL">buffer_mapping</tt></td>
<td>Waiting to associate a data block with a buffer in the buffer pool.</td>
</tr>
<tr>
<td><tt class="LITERAL">lock_manager</tt></td>
<td>Waiting to add or examine locks for backends, or waiting to join or exit a locking group (used by parallel query).</td>
</tr>
<tr>
<td><tt class="LITERAL">predicate_lock_manager</tt></td>
<td>Waiting to add or examine predicate lock information.</td>
</tr>
<tr>
<td rowspan="11"><tt class="LITERAL">Lock</tt></td>
<td><tt class="LITERAL">relation</tt></td>
<td>Waiting to acquire a lock on a relation.</td>
</tr>
<tr>
<td><tt class="LITERAL">extend</tt></td>
<td>Waiting to extend a relation.</td>
</tr>
<tr>
<td><tt class="LITERAL">frozenid</tt></td>
<td>Waiting to update <tt class="STRUCTNAME">pg_database</tt>.<tt class="STRUCTFIELD">datfrozenxid</tt> and <tt class="STRUCTNAME">pg_database</tt>.<tt class="STRUCTFIELD">datminmxid</tt>.</td>
</tr>
<tr>
<td><tt class="LITERAL">page</tt></td>
<td>Waiting to acquire a lock on page of a relation.</td>
</tr>
<tr>
<td><tt class="LITERAL">tuple</tt></td>
<td>Waiting to acquire a lock on a tuple.</td>
</tr>
<tr>
<td><tt class="LITERAL">transactionid</tt></td>
<td>Waiting for a transaction to finish.</td>
</tr>
<tr>
<td><tt class="LITERAL">virtualxid</tt></td>
<td>Waiting to acquire a virtual xid lock.</td>
</tr>
<tr>
<td><tt class="LITERAL">speculative token</tt></td>
<td>Waiting to acquire a speculative insertion lock.</td>
</tr>
<tr>
<td><tt class="LITERAL">object</tt></td>
<td>Waiting to acquire a lock on a non-relation database object.</td>
</tr>
<tr>
<td><tt class="LITERAL">userlock</tt></td>
<td>Waiting to acquire a userlock.</td>
</tr>
<tr>
<td><tt class="LITERAL">advisory</tt></td>
<td>Waiting to acquire an advisory user lock.</td>
</tr>
<tr>
<td><tt class="LITERAL">BufferPin</tt></td>
<td><tt class="LITERAL">BufferPin</tt></td>
<td>Waiting to acquire a pin on a buffer.</td>
</tr>
</tbody>
</table>
</div>
<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> For tranches registered by extensions, the name is specified by extension and this will be displayed as <tt class="STRUCTFIELD">wait_event</tt>. It is quite possible that user has registered the tranche in one of the backends (by having allocation in dynamic shared memory) in which case other backends won't have that information, so we display <tt class="LITERAL">extension</tt> for such cases.</p>
</blockquote>
</div>
<p>Here is an example of how wait events can be viewed</p>
<pre class="PROGRAMLISTING">SELECT pid, wait_event_type, wait_event FROM pg_stat_activity WHERE wait_event is NOT NULL;
 pid  | wait_event_type |  wait_event
------+-----------------+---------------
 2540 | Lock            | relation
 6644 | LWLockNamed     | ProcArrayLock
(2 rows)</pre>
<div class="TABLE"><a name="PG-STAT-REPLICATION-VIEW" id="PG-STAT-REPLICATION-VIEW"></a>
<p><b>Table 28-5. <tt class="STRUCTNAME">pg_stat_replication</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">pid</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Process ID of a WAL sender process</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">usesysid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of the user logged into this WAL sender process</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">usename</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the user logged into this WAL sender process</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">application_name</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Name of the application that is connected to this WAL sender</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">client_addr</tt></td>
<td><tt class="TYPE">inet</tt></td>
<td>IP address of the client connected to this WAL sender. If this field is null, it indicates that the client is connected via a Unix socket on the server machine.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">client_hostname</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Host name of the connected client, as reported by a reverse DNS lookup of <tt class="STRUCTFIELD">client_addr</tt>. This field will only be non-null for IP connections, and only when <a href="runtime-config-logging.html#GUC-LOG-HOSTNAME">log_hostname</a> is enabled.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">client_port</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>TCP port number that the client is using for communication with this WAL sender, or <tt class="LITERAL">-1</tt> if a Unix socket is used</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">backend_start</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when this process was started, i.e., when the client connected to this WAL sender</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">backend_xmin</tt></td>
<td><tt class="TYPE">xid</tt></td>
<td>This standby's <tt class="LITERAL">xmin</tt> horizon reported by <a href="runtime-config-replication.html#GUC-HOT-STANDBY-FEEDBACK">hot_standby_feedback</a>.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">state</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Current WAL sender state</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">sent_location</tt></td>
<td><tt class="TYPE">pg_lsn</tt></td>
<td>Last transaction log position sent on this connection</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">write_location</tt></td>
<td><tt class="TYPE">pg_lsn</tt></td>
<td>Last transaction log position written to disk by this standby server</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">flush_location</tt></td>
<td><tt class="TYPE">pg_lsn</tt></td>
<td>Last transaction log position flushed to disk by this standby server</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">replay_location</tt></td>
<td><tt class="TYPE">pg_lsn</tt></td>
<td>Last transaction log position replayed into the database on this standby server</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">sync_priority</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Priority of this standby server for being chosen as the synchronous standby</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">sync_state</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Synchronous state of this standby server</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_replication</tt> view will contain one row per WAL sender process, showing statistics about replication to that sender's connected standby server. Only directly connected standbys are listed; no information is available about downstream standby servers.</p>
<div class="TABLE"><a name="PG-STAT-WAL-RECEIVER-VIEW" id="PG-STAT-WAL-RECEIVER-VIEW"></a>
<p><b>Table 28-6. <tt class="STRUCTNAME">pg_stat_wal_receiver</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">pid</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Process ID of the WAL receiver process</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">status</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Activity status of the WAL receiver process</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">receive_start_lsn</tt></td>
<td><tt class="TYPE">pg_lsn</tt></td>
<td>First transaction log position used when WAL receiver is started</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">receive_start_tli</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>First timeline number used when WAL receiver is started</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">received_lsn</tt></td>
<td><tt class="TYPE">pg_lsn</tt></td>
<td>Last transaction log position already received and flushed to disk, the initial value of this field being the first log position used when WAL receiver is started</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">received_tli</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Timeline number of last transaction log position received and flushed to disk, the initial value of this field being the timeline number of the first log position used when WAL receiver is started</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_msg_send_time</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Send time of last message received from origin WAL sender</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_msg_receipt_time</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Receipt time of last message received from origin WAL sender</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">latest_end_lsn</tt></td>
<td><tt class="TYPE">pg_lsn</tt></td>
<td>Last transaction log position reported to origin WAL sender</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">latest_end_time</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time of last transaction log position reported to origin WAL sender</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">slot_name</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Replication slot name used by this WAL receiver</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">conninfo</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Connection string used by this WAL receiver, with security-sensitive fields obfuscated.</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_wal_receiver</tt> view will contain only one row, showing statistics about the WAL receiver from that receiver's connected server.</p>
<div class="TABLE"><a name="PG-STAT-SSL-VIEW" id="PG-STAT-SSL-VIEW"></a>
<p><b>Table 28-7. <tt class="STRUCTNAME">pg_stat_ssl</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">pid</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Process ID of a backend or WAL sender process</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">ssl</tt></td>
<td><tt class="TYPE">boolean</tt></td>
<td>True if SSL is used on this connection</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">version</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Version of SSL in use, or NULL if SSL is not in use on this connection</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">cipher</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Name of SSL cipher in use, or NULL if SSL is not in use on this connection</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">bits</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Number of bits in the encryption algorithm used, or NULL if SSL is not used on this connection</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">compression</tt></td>
<td><tt class="TYPE">boolean</tt></td>
<td>True if SSL compression is in use, false if not, or NULL if SSL is not in use on this connection</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">clientdn</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Distinguished Name (DN) field from the client certificate used, or NULL if no client certificate was supplied or if SSL is not in use on this connection. This field is truncated if the DN field is longer than <tt class="SYMBOL">NAMEDATALEN</tt> (64 characters in a standard build)</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_ssl</tt> view will contain one row per backend or WAL sender process, showing statistics about SSL usage on this connection. It can be joined to <tt class="STRUCTNAME">pg_stat_activity</tt> or <tt class="STRUCTNAME">pg_stat_replication</tt> on the <tt class="STRUCTFIELD">pid</tt> column to get more details about the connection.</p>
<div class="TABLE"><a name="PG-STAT-ARCHIVER-VIEW" id="PG-STAT-ARCHIVER-VIEW"></a>
<p><b>Table 28-8. <tt class="STRUCTNAME">pg_stat_archiver</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">archived_count</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of WAL files that have been successfully archived</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_archived_wal</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Name of the last WAL file successfully archived</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_archived_time</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time of the last successful archive operation</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">failed_count</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of failed attempts for archiving WAL files</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_failed_wal</tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Name of the WAL file of the last failed archival operation</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_failed_time</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time of the last failed archival operation</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">stats_reset</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time at which these statistics were last reset</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_archiver</tt> view will always have a single row, containing data about the archiver process of the cluster.</p>
<div class="TABLE"><a name="PG-STAT-BGWRITER-VIEW" id="PG-STAT-BGWRITER-VIEW"></a>
<p><b>Table 28-9. <tt class="STRUCTNAME">pg_stat_bgwriter</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">checkpoints_timed</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of scheduled checkpoints that have been performed</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">checkpoints_req</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of requested checkpoints that have been performed</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">checkpoint_write_time</tt></td>
<td><tt class="TYPE">double precision</tt></td>
<td>Total amount of time that has been spent in the portion of checkpoint processing where files are written to disk, in milliseconds</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">checkpoint_sync_time</tt></td>
<td><tt class="TYPE">double precision</tt></td>
<td>Total amount of time that has been spent in the portion of checkpoint processing where files are synchronized to disk, in milliseconds</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">buffers_checkpoint</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffers written during checkpoints</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">buffers_clean</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffers written by the background writer</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">maxwritten_clean</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times the background writer stopped a cleaning scan because it had written too many buffers</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">buffers_backend</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffers written directly by a backend</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">buffers_backend_fsync</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times a backend had to execute its own <code class="FUNCTION">fsync</code> call (normally the background writer handles those even when the backend does its own write)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">buffers_alloc</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffers allocated</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">stats_reset</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time at which these statistics were last reset</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_bgwriter</tt> view will always have a single row, containing global data for the cluster.</p>
<div class="TABLE"><a name="PG-STAT-DATABASE-VIEW" id="PG-STAT-DATABASE-VIEW"></a>
<p><b>Table 28-10. <tt class="STRUCTNAME">pg_stat_database</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">datid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of a database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">datname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">numbackends</tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Number of backends currently connected to this database. This is the only column in this view that returns a value reflecting current state; all other columns return the accumulated values since the last reset.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">xact_commit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of transactions in this database that have been committed</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">xact_rollback</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of transactions in this database that have been rolled back</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">blks_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of disk blocks read in this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">blks_hit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times disk blocks were found already in the buffer cache, so that a read was not necessary (this only includes hits in the PostgreSQL buffer cache, not the operating system's file system cache)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">tup_returned</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows returned by queries in this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">tup_fetched</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows fetched by queries in this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">tup_inserted</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows inserted by queries in this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">tup_updated</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows updated by queries in this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">tup_deleted</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows deleted by queries in this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">conflicts</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of queries canceled due to conflicts with recovery in this database. (Conflicts occur only on standby servers; see <a href="monitoring-stats.html#PG-STAT-DATABASE-CONFLICTS-VIEW">pg_stat_database_conflicts</a> for details.)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">temp_files</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of temporary files created by queries in this database. All temporary files are counted, regardless of why the temporary file was created (e.g., sorting or hashing), and regardless of the <a href="runtime-config-logging.html#GUC-LOG-TEMP-FILES">log_temp_files</a> setting.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">temp_bytes</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Total amount of data written to temporary files by queries in this database. All temporary files are counted, regardless of why the temporary file was created, and regardless of the <a href="runtime-config-logging.html#GUC-LOG-TEMP-FILES">log_temp_files</a> setting.</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">deadlocks</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of deadlocks detected in this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">blk_read_time</tt></td>
<td><tt class="TYPE">double precision</tt></td>
<td>Time spent reading data file blocks by backends in this database, in milliseconds</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">blk_write_time</tt></td>
<td><tt class="TYPE">double precision</tt></td>
<td>Time spent writing data file blocks by backends in this database, in milliseconds</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">stats_reset</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time at which these statistics were last reset</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_database</tt> view will contain one row for each database in the cluster, showing database-wide statistics.</p>
<div class="TABLE"><a name="PG-STAT-DATABASE-CONFLICTS-VIEW" id="PG-STAT-DATABASE-CONFLICTS-VIEW"></a>
<p><b>Table 28-11. <tt class="STRUCTNAME">pg_stat_database_conflicts</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">datid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of a database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">datname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this database</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">confl_tablespace</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of queries in this database that have been canceled due to dropped tablespaces</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">confl_lock</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of queries in this database that have been canceled due to lock timeouts</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">confl_snapshot</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of queries in this database that have been canceled due to old snapshots</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">confl_bufferpin</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of queries in this database that have been canceled due to pinned buffers</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">confl_deadlock</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of queries in this database that have been canceled due to deadlocks</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_database_conflicts</tt> view will contain one row per database, showing database-wide statistics about query cancels occurring due to conflicts with recovery on standby servers. This view will only contain information on standby servers, since conflicts do not occur on master servers.</p>
<div class="TABLE"><a name="PG-STAT-ALL-TABLES-VIEW" id="PG-STAT-ALL-TABLES-VIEW"></a>
<p><b>Table 28-12. <tt class="STRUCTNAME">pg_stat_all_tables</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">relid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of a table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">schemaname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the schema that this table is in</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">relname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">seq_scan</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of sequential scans initiated on this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">seq_tup_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of live rows fetched by sequential scans</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_scan</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of index scans initiated on this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_tup_fetch</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of live rows fetched by index scans</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">n_tup_ins</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows inserted</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">n_tup_upd</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows updated (includes HOT updated rows)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">n_tup_del</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows deleted</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">n_tup_hot_upd</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of rows HOT updated (i.e., with no separate index update required)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">n_live_tup</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Estimated number of live rows</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">n_dead_tup</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Estimated number of dead rows</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">n_mod_since_analyze</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Estimated number of rows modified since this table was last analyzed</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_vacuum</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Last time at which this table was manually vacuumed (not counting <tt class="COMMAND">VACUUM FULL</tt>)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_autovacuum</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Last time at which this table was vacuumed by the autovacuum daemon</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_analyze</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Last time at which this table was manually analyzed</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">last_autoanalyze</tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Last time at which this table was analyzed by the autovacuum daemon</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">vacuum_count</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times this table has been manually vacuumed (not counting <tt class="COMMAND">VACUUM FULL</tt>)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">autovacuum_count</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times this table has been vacuumed by the autovacuum daemon</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">analyze_count</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times this table has been manually analyzed</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">autoanalyze_count</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times this table has been analyzed by the autovacuum daemon</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_all_tables</tt> view will contain one row for each table in the current database (including TOAST tables), showing statistics about accesses to that specific table. The <tt class="STRUCTNAME">pg_stat_user_tables</tt> and <tt class="STRUCTNAME">pg_stat_sys_tables</tt> views contain the same information, but filtered to only show user and system tables respectively.</p>
<div class="TABLE"><a name="PG-STAT-ALL-INDEXES-VIEW" id="PG-STAT-ALL-INDEXES-VIEW"></a>
<p><b>Table 28-13. <tt class="STRUCTNAME">pg_stat_all_indexes</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">relid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of the table for this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">indexrelid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">schemaname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the schema this index is in</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">relname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the table for this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">indexrelname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_scan</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of index scans initiated on this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_tup_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of index entries returned by scans on this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_tup_fetch</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of live table rows fetched by simple index scans using this index</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_all_indexes</tt> view will contain one row for each index in the current database, showing statistics about accesses to that specific index. The <tt class="STRUCTNAME">pg_stat_user_indexes</tt> and <tt class="STRUCTNAME">pg_stat_sys_indexes</tt> views contain the same information, but filtered to only show user and system indexes respectively.</p>
<p>Indexes can be used by simple index scans, <span class="QUOTE">"bitmap"</span> index scans, and the optimizer. In a bitmap scan the output of several indexes can be combined via AND or OR rules, so it is difficult to associate individual heap row fetches with specific indexes when a bitmap scan is used. Therefore, a bitmap scan increments the <tt class="STRUCTNAME">pg_stat_all_indexes</tt>.<tt class="STRUCTFIELD">idx_tup_read</tt> count(s) for the index(es) it uses, and it increments the <tt class="STRUCTNAME">pg_stat_all_tables</tt>.<tt class="STRUCTFIELD">idx_tup_fetch</tt> count for the table, but it does not affect <tt class="STRUCTNAME">pg_stat_all_indexes</tt>.<tt class="STRUCTFIELD">idx_tup_fetch</tt>. The optimizer also accesses indexes to check for supplied constants whose values are outside the recorded range of the optimizer statistics because the optimizer statistics might be stale.</p>
<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> The <tt class="STRUCTFIELD">idx_tup_read</tt> and <tt class="STRUCTFIELD">idx_tup_fetch</tt> counts can be different even without any use of bitmap scans, because <tt class="STRUCTFIELD">idx_tup_read</tt> counts index entries retrieved from the index while <tt class="STRUCTFIELD">idx_tup_fetch</tt> counts live rows fetched from the table. The latter will be less if any dead or not-yet-committed rows are fetched using the index, or if any heap fetches are avoided by means of an index-only scan.</p>
</blockquote>
</div>
<div class="TABLE"><a name="PG-STATIO-ALL-TABLES-VIEW" id="PG-STATIO-ALL-TABLES-VIEW"></a>
<p><b>Table 28-14. <tt class="STRUCTNAME">pg_statio_all_tables</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">relid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of a table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">schemaname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the schema that this table is in</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">relname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">heap_blks_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of disk blocks read from this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">heap_blks_hit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffer hits in this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_blks_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of disk blocks read from all indexes on this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_blks_hit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffer hits in all indexes on this table</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">toast_blks_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of disk blocks read from this table's TOAST table (if any)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">toast_blks_hit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffer hits in this table's TOAST table (if any)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">tidx_blks_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of disk blocks read from this table's TOAST table indexes (if any)</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">tidx_blks_hit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffer hits in this table's TOAST table indexes (if any)</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_statio_all_tables</tt> view will contain one row for each table in the current database (including TOAST tables), showing statistics about I/O on that specific table. The <tt class="STRUCTNAME">pg_statio_user_tables</tt> and <tt class="STRUCTNAME">pg_statio_sys_tables</tt> views contain the same information, but filtered to only show user and system tables respectively.</p>
<div class="TABLE"><a name="PG-STATIO-ALL-INDEXES-VIEW" id="PG-STATIO-ALL-INDEXES-VIEW"></a>
<p><b>Table 28-15. <tt class="STRUCTNAME">pg_statio_all_indexes</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">relid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of the table for this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">indexrelid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">schemaname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the schema this index is in</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">relname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the table for this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">indexrelname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_blks_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of disk blocks read from this index</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">idx_blks_hit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffer hits in this index</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_statio_all_indexes</tt> view will contain one row for each index in the current database, showing statistics about I/O on that specific index. The <tt class="STRUCTNAME">pg_statio_user_indexes</tt> and <tt class="STRUCTNAME">pg_statio_sys_indexes</tt> views contain the same information, but filtered to only show user and system indexes respectively.</p>
<div class="TABLE"><a name="PG-STATIO-ALL-SEQUENCES-VIEW" id="PG-STATIO-ALL-SEQUENCES-VIEW"></a>
<p><b>Table 28-16. <tt class="STRUCTNAME">pg_statio_all_sequences</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">relid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of a sequence</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">schemaname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the schema this sequence is in</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">relname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this sequence</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">blks_read</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of disk blocks read from this sequence</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">blks_hit</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of buffer hits in this sequence</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_statio_all_sequences</tt> view will contain one row for each sequence in the current database, showing statistics about I/O on that specific sequence.</p>
<div class="TABLE"><a name="PG-STAT-USER-FUNCTIONS-VIEW" id="PG-STAT-USER-FUNCTIONS-VIEW"></a>
<p><b>Table 28-17. <tt class="STRUCTNAME">pg_stat_user_functions</tt> View</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="STRUCTFIELD">funcid</tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of a function</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">schemaname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of the schema this function is in</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">funcname</tt></td>
<td><tt class="TYPE">name</tt></td>
<td>Name of this function</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">calls</tt></td>
<td><tt class="TYPE">bigint</tt></td>
<td>Number of times this function has been called</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">total_time</tt></td>
<td><tt class="TYPE">double precision</tt></td>
<td>Total time spent in this function and all other functions called by it, in milliseconds</td>
</tr>
<tr>
<td><tt class="STRUCTFIELD">self_time</tt></td>
<td><tt class="TYPE">double precision</tt></td>
<td>Total time spent in this function itself, not including other functions called by it, in milliseconds</td>
</tr>
</tbody>
</table>
</div>
<p>The <tt class="STRUCTNAME">pg_stat_user_functions</tt> view will contain one row for each tracked function, showing statistics about executions of that function. The <a href="runtime-config-statistics.html#GUC-TRACK-FUNCTIONS">track_functions</a> parameter controls exactly which functions are tracked.</p>
</div>
<div class="SECT2">
<h2 class="SECT2"><a name="MONITORING-STATS-FUNCTIONS" id="MONITORING-STATS-FUNCTIONS">28.2.3. Statistics Functions</a></h2>
<p>Other ways of looking at the statistics can be set up by writing queries that use the same underlying statistics access functions used by the standard views shown above. For details such as the functions' names, consult the definitions of the standard views. (For example, in <span class="APPLICATION">psql</span> you could issue <tt class="LITERAL">\d+ pg_stat_activity</tt>.) The access functions for per-database statistics take a database OID as an argument to identify which database to report on. The per-table and per-index functions take a table or index OID. The functions for per-function statistics take a function OID. Note that only tables, indexes, and functions in the current database can be seen with these functions.</p>
<p>Additional functions related to statistics collection are listed in <a href="monitoring-stats.html#MONITORING-STATS-FUNCS-TABLE">Table 28-18</a>.</p>
<div class="TABLE"><a name="MONITORING-STATS-FUNCS-TABLE" id="MONITORING-STATS-FUNCS-TABLE"></a>
<p><b>Table 28-18. Additional Statistics Functions</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Function</th>
<th>Return Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_backend_pid()</code></tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Process ID of the server process handling the current session</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_activity</code>(<tt class="TYPE">integer</tt>)</tt></td>
<td><tt class="TYPE">setof record</tt></td>
<td>Returns a record of information about the backend with the specified PID, or one record for each active backend in the system if <tt class="SYMBOL">NULL</tt> is specified. The fields returned are a subset of those in the <tt class="STRUCTNAME">pg_stat_activity</tt> view.</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_snapshot_timestamp()</code></tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Returns the timestamp of the current statistics snapshot</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_clear_snapshot()</code></tt></td>
<td><tt class="TYPE">void</tt></td>
<td>Discard the current statistics snapshot</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_reset()</code></tt></td>
<td><tt class="TYPE">void</tt></td>
<td>Reset all statistics counters for the current database to zero (requires superuser privileges by default, but EXECUTE for this function can be granted to others.)</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_reset_shared</code>(text)</tt></td>
<td><tt class="TYPE">void</tt></td>
<td>Reset some cluster-wide statistics counters to zero, depending on the argument (requires superuser privileges by default, but EXECUTE for this function can be granted to others). Calling <tt class="LITERAL">pg_stat_reset_shared('bgwriter')</tt> will zero all the counters shown in the <tt class="STRUCTNAME">pg_stat_bgwriter</tt> view. Calling <tt class="LITERAL">pg_stat_reset_shared('archiver')</tt> will zero all the counters shown in the <tt class="STRUCTNAME">pg_stat_archiver</tt> view.</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_reset_single_table_counters</code>(oid)</tt></td>
<td><tt class="TYPE">void</tt></td>
<td>Reset statistics for a single table or index in the current database to zero (requires superuser privileges by default, but EXECUTE for this function can be granted to others)</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_reset_single_function_counters</code>(oid)</tt></td>
<td><tt class="TYPE">void</tt></td>
<td>Reset statistics for a single function in the current database to zero (requires superuser privileges by default, but EXECUTE for this function can be granted to others)</td>
</tr>
</tbody>
</table>
</div>
<p><code class="FUNCTION">pg_stat_get_activity</code>, the underlying function of the <tt class="STRUCTNAME">pg_stat_activity</tt> view, returns a set of records containing all the available information about each backend process. Sometimes it may be more convenient to obtain just a subset of this information. In such cases, an older set of per-backend statistics access functions can be used; these are shown in <a href="monitoring-stats.html#MONITORING-STATS-BACKEND-FUNCS-TABLE">Table 28-19</a>. These access functions use a backend ID number, which ranges from one to the number of currently active backends. The function <code class="FUNCTION">pg_stat_get_backend_idset</code> provides a convenient way to generate one row for each active backend for invoking these functions. For example, to show the <acronym class="ACRONYM">PID</acronym>s and current queries of all backends:</p>
<pre class="PROGRAMLISTING">SELECT pg_stat_get_backend_pid(s.backendid) AS pid,
       pg_stat_get_backend_activity(s.backendid) AS query
    FROM (SELECT pg_stat_get_backend_idset() AS backendid) AS s;</pre>
<div class="TABLE"><a name="MONITORING-STATS-BACKEND-FUNCS-TABLE" id="MONITORING-STATS-BACKEND-FUNCS-TABLE"></a>
<p><b>Table 28-19. Per-Backend Statistics Functions</b></p>
<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>Function</th>
<th>Return Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_idset()</code></tt></td>
<td><tt class="TYPE">setof integer</tt></td>
<td>Set of currently active backend ID numbers (from 1 to the number of active backends)</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_activity(integer)</code></tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Text of this backend's most recent query</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_activity_start(integer)</code></tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when the most recent query was started</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_client_addr(integer)</code></tt></td>
<td><tt class="TYPE">inet</tt></td>
<td>IP address of the client connected to this backend</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_client_port(integer)</code></tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>TCP port number that the client is using for communication</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_dbid(integer)</code></tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of the database this backend is connected to</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_pid(integer)</code></tt></td>
<td><tt class="TYPE">integer</tt></td>
<td>Process ID of this backend</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_start(integer)</code></tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when this process was started</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_userid(integer)</code></tt></td>
<td><tt class="TYPE">oid</tt></td>
<td>OID of the user logged into this backend</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_wait_event_type(integer)</code></tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Wait event type name if backend is currently waiting, otherwise NULL. See <a href="monitoring-stats.html#WAIT-EVENT-TABLE">Table 28-4</a> for details.</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_wait_event(integer)</code></tt></td>
<td><tt class="TYPE">text</tt></td>
<td>Wait event name if backend is currently waiting, otherwise NULL. See <a href="monitoring-stats.html#WAIT-EVENT-TABLE">Table 28-4</a> for details.</td>
</tr>
<tr>
<td><tt class="LITERAL"><code class="FUNCTION">pg_stat_get_backend_xact_start(integer)</code></tt></td>
<td><tt class="TYPE">timestamp with time zone</tt></td>
<td>Time when the current transaction was started</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="NAVFOOTER">
<hr class="c1" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="monitoring-ps.html" accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="monitoring-locks.html" accesskey="N">Next</a></td>
</tr>
<tr>
<td width="33%" align="left" valign="top">Standard Unix Tools</td>
<td width="34%" align="center" valign="top"><a href="monitoring.html" accesskey="U">Up</a></td>
<td width="33%" align="right" valign="top">Viewing Locks</td>
</tr>
</table>
</div>


          </div>
          
        </div> <!-- pgContentWrap -->
      </div>
    </div>

    <!-- Footer -->
    <footer id="footer">
      <!-- Copyright -->
      <div class="container">
        <a href="/about/policies/">Policies</a> |
        <a href="/about/policies/coc/">Code of Conduct</a> |
        <a href="/about/">About PostgreSQL</a> |
        <a href="/about/contact/">Contact</a><br/>
        <p>Copyright &copy; 1996-2026 The PostgreSQL Global Development Group</p>
      </div>
    </footer>
    <script src="/media/js/main.js?77152761"></script>

  </body>
</html>
