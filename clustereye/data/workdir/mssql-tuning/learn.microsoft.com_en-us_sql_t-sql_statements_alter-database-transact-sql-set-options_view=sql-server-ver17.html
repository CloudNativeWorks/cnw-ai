 <!DOCTYPE html>
		<html
			class="layout layout-holy-grail   show-table-of-contents conceptual show-breadcrumb default-focus"
			lang="en-us"
			dir="ltr"
			data-authenticated="false"
			data-auth-status-determined="false"
			data-target="docs"
			x-ms-format-detection="none"
		>
			
		<head>
			<title>ALTER DATABASE SET Options (Transact-SQL) - SQL Server | Microsoft Learn</title>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1.0" />
			<meta name="color-scheme" content="light dark" />

			<meta name="description" content="Learn how to set database options such as Automatic tuning, encryption, Query Store in SQL Server, and Azure SQL Database." />
			<link rel="canonical" href="https://learn.microsoft.com/en-us/sql/t-sql/statements/alter-database-transact-sql-set-options?view=sql-server-ver17" /> 

			<!-- Non-customizable open graph and sharing-related metadata -->
			<meta name="twitter:card" content="summary_large_image" />
			<meta name="twitter:site" content="@MicrosoftLearn" />
			<meta property="og:type" content="website" />
			<meta property="og:image:alt" content="Microsoft Learn" />
			<meta property="og:image" content="https://learn.microsoft.com/en-us/media/open-graph-image.png" />
			<!-- Page specific open graph and sharing-related metadata -->
			<meta property="og:title" content="ALTER DATABASE SET Options (Transact-SQL) - SQL Server" />
			<meta property="og:url" content="https://learn.microsoft.com/en-us/sql/t-sql/statements/alter-database-transact-sql-set-options?view=sql-server-ver17" />
			<meta property="og:description" content="Learn how to set database options such as Automatic tuning, encryption, Query Store in SQL Server, and Azure SQL Database." />
			<meta name="platform_id" content="6c97643e-4a40-4f8d-3fac-8f4bd0b65ab3" /> <meta name="scope" content="sql" />
			<meta name="locale" content="en-us" />
			 <meta name="adobe-target" content="true" /> 
			<meta name="uhfHeaderId" content="MSDocsHeader-DocsSQL" />

			<meta name="page_type" content="conceptual" />

			<!--page specific meta tags-->
			

			<!-- custom meta tags -->
			
		<meta name="toc_preview" content="true" />
	
		<meta name="feedback_system" content="Standard" />
	
		<meta name="feedback_product_url" content="https://feedback.azure.com/d365community/forum/04fe6ee0-3b25-ec11-b6e6-000d3a4f0da0" />
	
		<meta name="feedback_help_link_url" content="https://learn.microsoft.com/answers/tags/191/sql-server" />
	
		<meta name="feedback_help_link_type" content="get-help-at-qna" />
	
		<meta name="recommendations" content="true" />
	
		<meta name="manager" content="jroth" />
	
		<meta name="breadcrumb_path" content="../../breadcrumb/toc.json" />
	
		<meta name="monikerRange" content="=azuresqldb-current || &gt;=sql-server-2016 || &gt;=sql-server-linux-2017 || =azure-sqldw-latest || =azuresqldb-mi-current || =fabric" />
	
		<meta name="ms.update-cycle" content="1825-days" />
	
		<meta name="author" content="markingmyname" />
	
		<meta name="ms.author" content="maghan" />
	
		<meta name="ms.reviewer" content="randolphwest, wiassaf" />
	
		<meta name="ms.date" content="2026-02-09T00:00:00Z" />
	
		<meta name="ms.service" content="sql" />
	
		<meta name="ms.subservice" content="t-sql" />
	
		<meta name="ms.topic" content="reference" />
	
		<meta name="ms.custom" content="ignite-2025" />
	
		<meta name="document_id" content="8d76ab6e-5a3d-94eb-26f9-b2805b35ea85" />
	
		<meta name="document_version_independent_id" content="2ac43d27-c318-3e32-1e78-55229975eb4e" />
	
		<meta name="updated_at" content="2026-02-11T18:39:00Z" />
	
		<meta name="original_content_git_url" content="https://github.com/MicrosoftDocs/sql-docs-pr/blob/live/docs/t-sql/statements/alter-database-transact-sql-set-options.md" />
	
		<meta name="gitcommit" content="https://github.com/MicrosoftDocs/sql-docs-pr/blob/7a7edd4f65bc59d5f3cbf4e5baf430c321eb8657/docs/t-sql/statements/alter-database-transact-sql-set-options.md" />
	
		<meta name="git_commit_id" content="7a7edd4f65bc59d5f3cbf4e5baf430c321eb8657" />
	
		<meta name="monikers" content="fabric" />
	
		<meta name="monikers" content="azure-sqldw-latest" />
	
		<meta name="monikers" content="azuresqldb-current" />
	
		<meta name="monikers" content="azuresqldb-mi-current" />
	
		<meta name="monikers" content="sql-server-linux-2017" />
	
		<meta name="monikers" content="sql-server-linux-ver15" />
	
		<meta name="monikers" content="sql-server-linux-ver16" />
	
		<meta name="monikers" content="sql-server-linux-ver17" />
	
		<meta name="monikers" content="sql-server-2016" />
	
		<meta name="monikers" content="sql-server-2017" />
	
		<meta name="monikers" content="sql-server-ver15" />
	
		<meta name="monikers" content="sql-server-ver16" />
	
		<meta name="monikers" content="sql-server-ver17" />
	
		<meta name="default_moniker" content="sql-server-ver17" />
	
		<meta name="site_name" content="Docs" />
	
		<meta name="depot_name" content="SQL.sql-content" />
	
		<meta name="schema" content="Conceptual" />
	
		<meta name="toc_rel" content="../../toc.json" />
	
		<meta name="pdf_url_template" content="https://learn.microsoft.com/pdfstore/en-us/SQL.sql-content/{branchName}{pdfName}" />
	
		<meta name="search.mshattr.devlang" content="tsql" />
	
		<meta name="word_count" content="26893" />
	
		<meta name="config_moniker_range" content="=azuresqldb-current || =azuresqldb-mi-current || =azure-sqldw-latest || &gt;=aps-pdw-2016 || &gt;=sql-server-2016 || &gt;=sql-server-linux-2017 || =fabric || =fabric-sqldb" />
	
		<meta name="asset_id" content="t-sql/statements/alter-database-transact-sql-set-options" />
	
		<meta name="moniker_range_name" content="830fea6863859f7ddc5bc20e63147a29" />
	
		<meta name="item_type" content="Content" />
	
		<meta name="source_path" content="docs/t-sql/statements/alter-database-transact-sql-set-options.md" />
	
		<meta name="previous_tlsh_hash" content="C03848F3A55C8610FFC05E533969AB9561F0CACCBAB12E58093E2561FD0B2D731B58DDF6B71733056332029321E0965ED1D5EB3AF09C227671752CA9C2981221AB9F3BFAF9" />
	
		<meta name="github_feedback_content_git_url" content="https://github.com/MicrosoftDocs/sql-docs/blob/live/docs/t-sql/statements/alter-database-transact-sql-set-options.md" />
	
		<meta name="markdown_url" content="https://learn.microsoft.com/en-us/sql/t-sql/statements/alter-database-transact-sql-set-options?view=sql-server-ver17&amp;accept=text/markdown" />
	 
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/cbe4ca68-43ac-4375-aba5-5945a6394c20" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/ced846cc-6a3c-4c8f-9dfb-3de0e90e2742" data-source="generated" />
	

			<!-- assets and js globals -->
			
			<link rel="stylesheet" href="/static/assets/0.4.03336.7510-899cc417/styles/site-ltr.css" />
			
			<link rel="preconnect" href="//mscom.demdex.net" crossorigin />
						<link rel="dns-prefetch" href="//target.microsoft.com" />
						<link rel="dns-prefetch" href="//microsoftmscompoc.tt.omtrdc.net" />
						<link
							rel="preload"
							as="script"
							href="/static/third-party/adobe-target/at-js/2.9.0/at.js"
							integrity="sha384-l4AKhsU8cUWSht4SaJU5JWcHEWh1m4UTqL08s6b/hqBLAeIDxTNl+AMSxTLx6YMI"
							crossorigin="anonymous"
							id="adobe-target-script"
							type="application/javascript"
						/>
			<script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
			<script src="https://js.monitor.azure.com/scripts/c/ms.jsll-4.min.js"></script>
			<script src="/_themes/docs.theme/master/en-us/_themes/global/deprecation.js"></script>

			<!-- msdocs global object -->
			<script id="msdocs-script">
		var msDocs = {
  "environment": {
    "accessLevel": "online",
    "azurePortalHostname": "portal.azure.com",
    "reviewFeatures": false,
    "supportLevel": "production",
    "systemContent": true,
    "siteName": "learn",
    "legacyHosting": false
  },
  "data": {
    "contentLocale": "en-us",
    "contentDir": "ltr",
    "userLocale": "en-us",
    "userDir": "ltr",
    "pageTemplate": "Conceptual",
    "brand": "",
    "context": {},
    "standardFeedback": true,
    "showFeedbackReport": false,
    "feedbackHelpLinkType": "get-help-at-qna",
    "feedbackHelpLinkUrl": "https://learn.microsoft.com/answers/tags/191/sql-server",
    "feedbackSystem": "Standard",
    "feedbackGitHubRepo": "MicrosoftDocs/sql-docs",
    "feedbackProductUrl": "https://feedback.azure.com/d365community/forum/04fe6ee0-3b25-ec11-b6e6-000d3a4f0da0",
    "extendBreadcrumb": false,
    "isEditDisplayable": true,
    "isPrivateUnauthorized": false,
    "hideViewSource": false,
    "isPermissioned": false,
    "hasRecommendations": false,
    "contributors": [
      {
        "name": "markingmyname",
        "url": "https://github.com/markingmyname"
      },
      {
        "name": "WilliamDAssafMSFT",
        "url": "https://github.com/WilliamDAssafMSFT"
      },
      {
        "name": "mstehrani",
        "url": "https://github.com/mstehrani"
      },
      {
        "name": "loicmaz",
        "url": "https://github.com/loicmaz"
      },
      {
        "name": "rmca14",
        "url": "https://github.com/rmca14"
      },
      {
        "name": "rwestMSFT",
        "url": "https://github.com/rwestMSFT"
      },
      {
        "name": "nathlaroche",
        "url": "https://github.com/nathlaroche"
      },
      {
        "name": "dimitri-furman",
        "url": "https://github.com/dimitri-furman"
      },
      {
        "name": "periclesrocha",
        "url": "https://github.com/periclesrocha"
      },
      {
        "name": "JamesJBarnett",
        "url": "https://github.com/JamesJBarnett"
      },
      {
        "name": "MashaMSFT",
        "url": "https://github.com/MashaMSFT"
      },
      {
        "name": "alexbuckgit",
        "url": "https://github.com/alexbuckgit"
      },
      {
        "name": "rothja",
        "url": "https://github.com/rothja"
      },
      {
        "name": "MikeRayMSFT",
        "url": "https://github.com/MikeRayMSFT"
      },
      {
        "name": "PRMerger10",
        "url": "https://github.com/PRMerger10"
      },
      {
        "name": "padmajayaraman",
        "url": "https://github.com/padmajayaraman"
      },
      {
        "name": "niko-neugebauer",
        "url": "https://github.com/niko-neugebauer"
      },
      {
        "name": "LitKnd",
        "url": "https://github.com/LitKnd"
      },
      {
        "name": "zikato",
        "url": "https://github.com/zikato"
      },
      {
        "name": "kfarlee",
        "url": "https://github.com/kfarlee"
      },
      {
        "name": "ciis0",
        "url": "https://github.com/ciis0"
      },
      {
        "name": "cawrites",
        "url": "https://github.com/cawrites"
      },
      {
        "name": "MightyPen",
        "url": "https://github.com/MightyPen"
      },
      {
        "name": "DCtheGeek",
        "url": "https://github.com/DCtheGeek"
      },
      {
        "name": "pmasl",
        "url": "https://github.com/pmasl"
      },
      {
        "name": "SQLSourabh",
        "url": "https://github.com/SQLSourabh"
      },
      {
        "name": "MikeyBronowski",
        "url": "https://github.com/MikeyBronowski"
      },
      {
        "name": "PRMerger14",
        "url": "https://github.com/PRMerger14"
      },
      {
        "name": "CarlRabeler",
        "url": "https://github.com/CarlRabeler"
      },
      {
        "name": "JKirsch1",
        "url": "https://github.com/JKirsch1"
      },
      {
        "name": "MrJoeSack",
        "url": "https://github.com/MrJoeSack"
      },
      {
        "name": "XiaoyuMSFT",
        "url": "https://github.com/XiaoyuMSFT"
      },
      {
        "name": "PRMerger13",
        "url": "https://github.com/PRMerger13"
      },
      {
        "name": "PRMerger6",
        "url": "https://github.com/PRMerger6"
      },
      {
        "name": "v-rihow",
        "url": "https://github.com/v-rihow"
      },
      {
        "name": "julieMSFT",
        "url": "https://github.com/julieMSFT"
      },
      {
        "name": "GitHubber17",
        "url": "https://github.com/GitHubber17"
      },
      {
        "name": "tboggiano",
        "url": "https://github.com/tboggiano"
      },
      {
        "name": "PRMerger18",
        "url": "https://github.com/PRMerger18"
      },
      {
        "name": "bluefooted",
        "url": "https://github.com/bluefooted"
      },
      {
        "name": "damabe",
        "url": "https://github.com/damabe"
      },
      {
        "name": "daxianji007",
        "url": "https://github.com/daxianji007"
      },
      {
        "name": "Saisang",
        "url": "https://github.com/Saisang"
      },
      {
        "name": "jovanpop-msft",
        "url": "https://github.com/jovanpop-msft"
      },
      {
        "name": "craigg-msft",
        "url": "https://github.com/craigg-msft"
      },
      {
        "name": "jodebrui",
        "url": "https://github.com/jodebrui"
      },
      {
        "name": "edmacauley",
        "url": "https://github.com/edmacauley"
      },
      {
        "name": "AndreyMSFT",
        "url": "https://github.com/AndreyMSFT"
      },
      {
        "name": "BYHAM",
        "url": "https://github.com/BYHAM"
      },
      {
        "name": "JocaPC",
        "url": "https://github.com/JocaPC"
      },
      {
        "name": "v-thepet",
        "url": "https://github.com/v-thepet"
      },
      {
        "name": "barbkess",
        "url": "https://github.com/barbkess"
      }
    ]
  },
  "functions": {}
};;
	</script>

			<!-- base scripts, msdocs global should be before this -->
			<script src="/static/assets/0.4.03336.7510-899cc417/scripts/en-us/index-docs.js"></script>
			

			<!-- json-ld -->
			
		</head>
	
			<body
				id="body"
				data-bi-name="body"
				class="layout-body "
				lang="en-us"
				dir="ltr"
			>
				<header class="layout-body-header">
		<div class="header-holder has-default-focus">
			
		<a
			href="#main"
			
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			
		>
			Skip to main content
		</a>
	
		<a
			href="#"
			data-skip-to-ask-learn
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			hidden
		>
			Skip to Ask Learn chat experience
		</a>
	

			<div hidden id="cookie-consent-holder" data-test-id="cookie-consent-container"></div>
			<!-- Unsupported browser warning -->
			<div
				id="unsupported-browser"
				style="background-color: white; color: black; padding: 16px; border-bottom: 1px solid grey;"
				hidden
			>
				<div style="max-width: 800px; margin: 0 auto;">
					<p style="font-size: 24px">This browser is no longer supported.</p>
					<p style="font-size: 16px; margin-top: 16px;">
						Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.
					</p>
					<div style="margin-top: 12px;">
						<a
							href="https://go.microsoft.com/fwlink/p/?LinkID=2092881 "
							style="background-color: #0078d4; border: 1px solid #0078d4; color: white; padding: 6px 12px; border-radius: 2px; display: inline-block;"
						>
							Download Microsoft Edge
						</a>
						<a
							href="https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge"
							style="background-color: white; padding: 6px 12px; border: 1px solid #505050; color: #171717; border-radius: 2px; display: inline-block;"
						>
							More info about Internet Explorer and Microsoft Edge
						</a>
					</div>
				</div>
			</div>
			<!-- site header -->
			<header
				id="ms--site-header"
				data-test-id="site-header-wrapper"
				role="banner"
				itemscope="itemscope"
				itemtype="http://schema.org/Organization"
			>
				<div
					id="ms--mobile-nav"
					class="site-header display-none-tablet padding-inline-none gap-none"
					data-bi-name="mobile-header"
					data-test-id="mobile-header"
				></div>
				<div
					id="ms--primary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L1-header"
					data-test-id="primary-header"
				></div>
				<div
					id="ms--secondary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L2-header"
					data-test-id="secondary-header"
					
				></div>
			</header>
			
		<!-- banner -->
		<div data-banner>
			<div id="disclaimer-holder"></div>
			
		</div>
		<!-- banner end -->
	
		</div>
	</header>
				 <section
					id="layout-body-menu"
					class="layout-body-menu display-flex"
					data-bi-name="menu"
			  >
					
		<div
			id="left-container"
			class="left-container display-none display-block-tablet padding-inline-sm padding-bottom-sm width-full"
			data-toc-container="true"
		>
			<!-- Regular TOC content (default) -->
			<div id="ms--toc-content" class="height-full">
				<nav
					id="affixed-left-container"
					class="margin-top-sm-tablet position-sticky display-flex flex-direction-column"
					aria-label="Primary"
					data-bi-name="left-toc"
					role="navigation"
				></nav>
			</div>
			<!-- Collapsible TOC content (hidden by default) -->
			<div id="ms--toc-content-collapsible" class="height-full" hidden>
				<nav
					id="affixed-left-container"
					class="margin-top-sm-tablet position-sticky display-flex flex-direction-column"
					aria-label="Primary"
					data-bi-name="left-toc"
					role="navigation"
				>
					<div
						id="ms--collapsible-toc-header"
						class="display-flex flex-direction-row-reverse justify-content-space-between align-items-center margin-bottom-xxs"
					>
						<button
							type="button"
							class="button button-clear inner-focus"
							data-collapsible-toc-toggle
							aria-expanded="true"
							aria-controls="ms--collapsible-toc-content"
							aria-label="Table of contents"
						>
							<span class="icon font-size-h4" aria-hidden="true">
								<span class="docon docon-panel-left-contract"></span>
							</span>
						</button>
						<div id="ms--collapsible-toc-moniker-slot" class="flex-grow-1"></div>
					</div>
				</nav>
			</div>
		</div>
	
			  </section>

				<main
					id="main"
					role="main"
					class="layout-body-main "
					data-bi-name="content"
					lang="en-us"
					dir="ltr"
				>
					
			<div
		id="ms--content-header"
		class="content-header default-focus border-bottom-none"
		data-bi-name="content-header"
	>
		<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
			<button
				type="button"
				class="contents-button button button-sm margin-right-xxs"
				data-bi-name="contents-expand"
				aria-haspopup="true"
				data-contents-button
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-menu"></span></span>
				<span class="contents-expand-title"> Table of contents </span>
			</button>
			<button
				type="button"
				class="ap-collapse-behavior ap-expanded button button-sm"
				data-bi-name="ap-collapse"
				aria-controls="action-panel"
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-exit-mode"></span></span>
				<span>Exit editor mode</span>
			</button>
		</div>
	</div>
			<div data-main-column class="padding-sm padding-top-none padding-top-sm-tablet">
				<div>
					
		<div id="article-header" class="background-color-body margin-bottom-xs display-none-print">
			<div class="display-flex align-items-center justify-content-space-between">
				
		<details
			id="article-header-breadcrumbs-overflow-popover"
			class="popover"
			data-for="article-header-breadcrumbs"
		>
			<summary
				class="button button-clear button-primary button-sm inner-focus"
				aria-label="All breadcrumbs"
			>
				<span class="icon">
					<span class="docon docon-more"></span>
				</span>
			</summary>
			<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none"></div>
		</details>

		<bread-crumbs
			id="article-header-breadcrumbs"
			role="group"
			aria-label="Breadcrumbs"
			data-test-id="article-header-breadcrumbs"
			class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs"
		></bread-crumbs>
	 
		<div
			id="article-header-page-actions"
			class="opacity-none margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch"
		>
			
		<button
			class="button button-sm border-none inner-focus display-none-tablet flex-shrink-0 "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-mobile"
			data-ask-learn-modal-entry
			
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-none display-inline-flex-tablet display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			
			data-test-id="ask-learn-assistant-modal-entry-tablet"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			
			data-test-id="ask-learn-assistant-flyout-entry"
			data-ask-learn-flyout-entry
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	 
		<button
			type="button"
			id="ms--focus-mode-button"
			data-focus-mode
			data-bi-name="focus-mode-entry"
			class="button button-sm flex-shrink-0 margin-right-xxs display-none display-inline-flex-desktop"
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-glasses"></span>
			</span>
			<span>Focus mode</span>
		</button>
	 

			<details class="popover popover-right" id="article-header-page-actions-overflow">
				<summary
					class="justify-content-flex-start button button-clear button-sm button-primary inner-focus"
					aria-label="More actions"
					title="More actions"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-more-vertical"></span>
					</span>
				</summary>
				<div class="popover-content">
					
		<button
			data-page-action-item="overflow-mobile"
			type="button"
			class="button-block button-sm inner-focus button button-clear display-none-tablet justify-content-flex-start text-align-left"
			data-bi-name="contents-expand"
			data-contents-button
			data-popover-close
		>
			<span class="icon">
				<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
			</span>
			<span class="contents-expand-title">Table of contents</span>
		</button>
	 
		<a
			id="lang-link-overflow"
			class="button-sm inner-focus button button-clear button-block justify-content-flex-start text-align-left"
			data-bi-name="language-toggle"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-read-in-link
			href="#"
			hidden
		>
			<span class="icon" aria-hidden="true" data-read-in-link-icon>
				<span class="docon docon-locale-globe"></span>
			</span>
			<span data-read-in-link-text>Read in English</span>
		</a>
	 
		<button
			type="button"
			class="collection button button-clear button-sm button-block justify-content-flex-start text-align-left inner-focus"
			data-list-type="collection"
			data-bi-name="collection"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="collection-status">Add</span>
		</button>
	
					
		<button
			type="button"
			class="collection button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			data-list-type="plan"
			data-bi-name="plan"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="plan-status">Add to plan</span>
		</button>
	  
		<a
			data-contenteditbtn
			class="button button-clear button-block button-sm inner-focus justify-content-flex-start text-align-left text-decoration-none"
			data-bi-name="edit"
			
			href="https://github.com/MicrosoftDocs/sql-docs/blob/live/docs/t-sql/statements/alter-database-transact-sql-set-options.md"
			data-original_content_git_url="https://github.com/MicrosoftDocs/sql-docs-pr/blob/live/docs/t-sql/statements/alter-database-transact-sql-set-options.md"
			data-original_content_git_url_template="{repo}/blob/{branch}/docs/t-sql/statements/alter-database-transact-sql-set-options.md"
			data-pr_repo=""
			data-pr_branch=""
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-outline"></span>
			</span>
			<span>Edit</span>
		</a>
	
					
		<hr class="margin-block-xxs" />
		<h4 class="font-size-sm padding-left-xxs">Share via</h4>
		
					<a
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-facebook"
						data-bi-name="facebook"
						data-page-action-item="overflow-all"
						href="#"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-facebook-share"></span>
						</span>
						<span>Facebook</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-twitter"
						data-bi-name="twitter"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-text" aria-hidden="true">
							<span class="docon docon-xlogo-share"></span>
						</span>
						<span>x.com</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-linkedin"
						data-bi-name="linkedin"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-linked-in-logo"></span>
						</span>
						<span>LinkedIn</span>
					</a>
					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-email"
						data-bi-name="email"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-mail-message"></span>
						</span>
						<span>Email</span>
					</a>
			  
	 
		<hr class="margin-block-xxs" />
		
				<button
					class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
					type="button"
					data-bi-name="copy-markdown"
					data-page-action-item="overflow-all"
					data-copy-markdown
					data-copy-state="idle"
					data-check-hidden="true"
				>
					<span class="icon color-primary" aria-hidden="true">
						<span data-show-when="idle" class="docon docon-code-lang"></span>
						<span data-show-when="loading" class="loader" hidden></span>
						<span data-show-when="success" class="docon docon-check-mark" hidden></span>
					</span>
					<span>Copy Markdown</span>
				</button>
		   
				<button
					class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
					type="button"
					data-bi-name="print"
					data-page-action-item="overflow-all"
					data-popover-close
					data-print-page
					data-check-hidden="true"
				>
					<span class="icon color-primary" aria-hidden="true">
						<span class="docon docon-print"></span>
					</span>
					<span>Print</span>
				</button>
		  
	
				</div>
			</details>
		</div>
	
			</div>
		</div>
	  
		<!-- privateUnauthorizedTemplate is hidden by default -->
		<div unauthorized-private-section data-bi-name="permission-content-unauthorized-private" hidden>
			<hr class="hr margin-top-xs margin-bottom-sm" />
			<div class="notification notification-info">
				<div class="notification-content">
					<p class="margin-top-none notification-title">
						<span class="icon">
							<span class="docon docon-exclamation-circle-solid" aria-hidden="true"></span>
						</span>
						<span>Note</span>
					</p>
					<p class="margin-top-none authentication-determined not-authenticated">
						Access to this page requires authorization. You can try <a class="docs-sign-in" href="#" data-bi-name="permission-content-sign-in">signing in</a> or <a  class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
					<p class="margin-top-none authentication-determined authenticated">
						Access to this page requires authorization. You can try <a class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
				</div>
			</div>
		</div>
	
					<div class="content"><h1 id="alter-database-set-options-transact-sql">ALTER DATABASE SET options (Transact-SQL)</h1></div>
					
		<div
			id="article-metadata"
			data-bi-name="article-metadata"
			data-test-id="article-metadata"
			class="page-metadata-container display-flex gap-xxs justify-content-space-between align-items-center flex-wrap-wrap"
		>
			 
				<div
					id="user-feedback"
					class="margin-block-xxs display-none display-none-print"
					hidden
					data-hide-on-archived
				>
					
		<button
			id="user-feedback-button"
			data-test-id="conceptual-feedback-button"
			class="button button-sm button-clear button-primary display-none"
			type="button"
			data-bi-name="user-feedback-button"
			data-user-feedback-button
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-like"></span>
			</span>
			<span>Feedback</span>
		</button>
	
				</div>
		  
		</div>
	 
		<div data-id="ai-summary" hidden>
			<div id="ms--ai-summary-cta" class="margin-top-xs display-flex align-items-center">
				<span class="icon" aria-hidden="true">
					<span class="docon docon-sparkle-fill gradient-text-vivid"></span>
				</span>
				<button
					id="ms--ai-summary"
					type="button"
					class="tag tag-sm tag-suggestion margin-left-xxs"
					data-test-id="ai-summary-cta"
					data-bi-name="ai-summary-cta"
					data-an="ai-summary"
				>
					<span class="ai-summary-cta-text">
						Summarize this article for me
					</span>
				</button>
			</div>
			<!-- Slot where the client will render the summary card after the user clicks the CTA -->
			<div id="ms--ai-summary-header" class="margin-top-xs"></div>
		</div>
	 
		<nav
			id="center-doc-outline"
			class="doc-outline is-hidden-desktop display-none-print margin-bottom-sm"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h2 id="ms--in-this-article" class="title is-6 margin-block-xs">
				In this article
			</h2>
		</nav>
	
					<div class="content"><p>Sets database options in Microsoft SQL Server, Azure SQL Database, and Azure Synapse Analytics. For other ALTER DATABASE options, see <a href="alter-database-transact-sql?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE</a>.</p>
<div class="NOTE">
<p>Note</p>
<p>Setting some options with ALTER DATABASE might require exclusive database access. If the ALTER DATABASE statement doesn't complete in a timely manner, check to see if other sessions within the database are blocking the ALTER DATABASE session.</p>
</div>
<p>For more information about the syntax conventions, see <a href="../language-elements/transact-sql-syntax-conventions-transact-sql?view=sql-server-ver17" data-linktype="relative-path">Transact-SQL syntax conventions</a>.</p>
<h2 id="select-a-product">Select a product</h2>
<p>In the following row, select whichever product name you're interested in. Doing that displays different content here on this webpage, appropriate for whichever product you select.</p>
<div data-moniker="sql-server-2016 sql-server-2017 sql-server-linux-2017 sql-server-linux-ver15 sql-server-linux-ver16 sql-server-linux-ver17 sql-server-ver15 sql-server-ver16 sql-server-ver17">
<section class="row">
<div class="column">
<p><em><strong>* SQL Server *</strong></em> &nbsp;</p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-current&amp;preserve-view=true" data-linktype="relative-path">SQL Database</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-mi-current&amp;preserve-view=true" data-linktype="relative-path">SQL Managed Instance</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azure-sqldw-latest&amp;preserve-view=true" data-linktype="relative-path">Azure Synapse<br>Analytics</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=fabric&amp;preserve-view=true" data-linktype="relative-path">Microsoft Fabric Data Warehouse</a></p>
</div>
</section>
<p>&nbsp;</p>
<h2 id="sql-server">SQL Server</h2>
<p>Database mirroring, Always On availability groups, and compatibility levels are <code>SET</code> options but are described in separate articles because of their length. For more information, see <a href="alter-database-transact-sql-database-mirroring?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE Database Mirroring</a>, <a href="alter-database-transact-sql-set-hadr?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE SET HADR</a>, and <a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a>.</p>
<p>Database scoped configurations are used to set several database configurations at the individual database level. For more information, see <a href="alter-database-scoped-configuration-transact-sql?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE SCOPED CONFIGURATION</a>.</p>
<div class="NOTE">
<p>Note</p>
<p>Many database set options can be configured for the current session by using <a href="set-statements-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET statements</a> and are often configured by applications when they connect. Session-level set options override the <code>ALTER DATABASE SET</code> values. The database options described in the following sections are values that you can set for sessions that don't explicitly provide other set option values.</p>
</div>
<h2 id="syntax">Syntax</h2>
<pre><code class="lang-syntaxsql">ALTER DATABASE { database_name | CURRENT }
SET
{
    &lt;option_spec&gt; [ ,...n ] [ WITH &lt;termination&gt; ]
}

{ [ FOR SECONDARY ] SET &lt;set_options&gt; }

&lt;option_spec&gt; ::=
{
    &lt;accelerated_database_recovery&gt;
  | &lt;auto_option&gt;
  | &lt;automatic_tuning_option&gt;
  | &lt;change_tracking_option&gt;
  | &lt;containment_option&gt;
  | &lt;cursor_option&gt;
  | &lt;data_retention_policy&gt;
  | &lt;database_mirroring_option&gt;
  | &lt;date_correlation_optimization_option&gt;
  | &lt;db_encryption_option&gt;
  | &lt;db_state_option&gt;
  | &lt;db_update_option&gt;
  | &lt;db_user_access_option&gt;
  | &lt;delayed_durability_option&gt;
  | &lt;external_access_option&gt;
  | FILESTREAM ( &lt;FILESTREAM_option&gt; )
  | &lt;HADR_options&gt;
  | &lt;mixed_page_allocation_option&gt;
  | &lt;optimized_locking&gt;
  | &lt;parameterization_option&gt;
  | &lt;query_store_options&gt;
  | &lt;recovery_option&gt;
  | &lt;remote_data_archive_option&gt;
  | &lt;persistent_log_buffer_option&gt;
  | &lt;service_broker_option&gt;
  | &lt;snapshot_option&gt;
  | &lt;sql_option&gt;
  | &lt;suspend_for_snapshot_backup&gt;
  | &lt;target_recovery_time_option&gt;
  | &lt;termination&gt;
  | &lt;temporal_history_retention&gt;
}
;

&lt;accelerated_database_recovery&gt; ::=
{
    ACCELERATED_DATABASE_RECOVERY = { ON | OFF }
     [ ( PERSISTENT_VERSION_STORE_FILEGROUP = { filegroup name } ) ]
}

&lt;auto_option&gt; ::=
{
    AUTO_CLOSE { ON | OFF }
  | AUTO_CREATE_STATISTICS { OFF | ON [ ( INCREMENTAL = { ON | OFF } ) ] }
  | AUTO_SHRINK { ON | OFF }
  | AUTO_UPDATE_STATISTICS { ON | OFF }
  | AUTO_UPDATE_STATISTICS_ASYNC { ON | OFF }
}

&lt;automatic_tuning_option&gt; ::=
{
    AUTOMATIC_TUNING ( FORCE_LAST_GOOD_PLAN = { DEFAULT | ON | OFF } )
}

&lt;change_tracking_option&gt; ::=
{
    CHANGE_TRACKING
   {
       = OFF
     | = ON [ ( &lt;change_tracking_option_list &gt; [,...n] ) ]
     | ( &lt;change_tracking_option_list&gt; [,...n] )
   }
}

&lt;change_tracking_option_list&gt; ::=
{
   AUTO_CLEANUP = { ON | OFF }
 | CHANGE_RETENTION = retention_period { DAYS | HOURS | MINUTES }
}

&lt;containment_option&gt; ::=
   CONTAINMENT = { NONE | PARTIAL }

&lt;cursor_option&gt; ::=
{
    CURSOR_CLOSE_ON_COMMIT { ON | OFF }
  | CURSOR_DEFAULT { LOCAL | GLOBAL }
}

&lt;database_mirroring_option&gt;
  ALTER DATABASE Database Mirroring

&lt;date_correlation_optimization_option&gt; ::=
    DATE_CORRELATION_OPTIMIZATION { ON | OFF }

&lt;db_encryption_option&gt; ::=
    ENCRYPTION { ON | OFF | SUSPEND | RESUME }

&lt;db_state_option&gt; ::=
    { ONLINE | OFFLINE | EMERGENCY }

&lt;db_update_option&gt; ::=
    { READ_ONLY | READ_WRITE }

&lt;db_user_access_option&gt; ::=
    { SINGLE_USER | RESTRICTED_USER | MULTI_USER }

&lt;delayed_durability_option&gt; ::=
    DELAYED_DURABILITY = { DISABLED | ALLOWED | FORCED }

&lt;external_access_option&gt; ::=
{
    DB_CHAINING { ON | OFF }
  | TRUSTWORTHY { ON | OFF }
  | DEFAULT_FULLTEXT_LANGUAGE = { &lt;lcid&gt; | &lt;language name&gt; | &lt;language alias&gt; }
  | DEFAULT_LANGUAGE = { &lt;lcid&gt; | &lt;language name&gt; | &lt;language alias&gt; }
  | NESTED_TRIGGERS = { OFF | ON }
  | TRANSFORM_NOISE_WORDS = { OFF | ON }
  | TWO_DIGIT_YEAR_CUTOFF = { 1753, ..., 2049, ..., 9999 }
}

&lt;FILESTREAM_option&gt; ::=
{
    NON_TRANSACTED_ACCESS = { OFF | READ_ONLY | FULL
  | DIRECTORY_NAME = &lt;directory_name&gt;
}

&lt;HADR_options&gt; ::=
    ALTER DATABASE SET HADR

&lt;mixed_page_allocation_option&gt; ::=
    MIXED_PAGE_ALLOCATION { OFF | ON }

&lt;parameterization_option&gt; ::=
    PARAMETERIZATION { SIMPLE | FORCED }

&lt;query_store_options&gt; ::=
{
    QUERY_STORE
    {
          = OFF [ ( FORCED ) ]
        | = ON [ ( &lt;query_store_option_list&gt; [,...n] ) ]
        | ( &lt; query_store_option_list&gt; [,...n] )
        | CLEAR [ ALL ]
    }
}

&lt;query_store_option_list&gt; ::=
{
      OPERATION_MODE = { READ_WRITE | READ_ONLY }
    | CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = number )
    | DATA_FLUSH_INTERVAL_SECONDS = number
    | MAX_STORAGE_SIZE_MB = number
    | INTERVAL_LENGTH_MINUTES = number
    | SIZE_BASED_CLEANUP_MODE = { AUTO | OFF }
    | QUERY_CAPTURE_MODE = { ALL | AUTO | CUSTOM | NONE }
    | MAX_PLANS_PER_QUERY = number
    | WAIT_STATS_CAPTURE_MODE = { ON | OFF }
    | QUERY_CAPTURE_POLICY = ( &lt;query_capture_policy_option_list&gt; [,...n] )
}

&lt;query_capture_policy_option_list&gt; :: =
{
      STALE_CAPTURE_POLICY_THRESHOLD = number { DAYS | HOURS }
    | EXECUTION_COUNT = number
    | TOTAL_COMPILE_CPU_TIME_MS = number
    | TOTAL_EXECUTION_CPU_TIME_MS = number
}

&lt;recovery_option&gt; ::=
{
    RECOVERY { FULL | BULK_LOGGED | SIMPLE }
  | TORN_PAGE_DETECTION { ON | OFF }
  | PAGE_VERIFY { CHECKSUM | TORN_PAGE_DETECTION | NONE }
}

&lt;remote_data_archive_option&gt; ::=
{
    REMOTE_DATA_ARCHIVE =
    {
        ON ( SERVER = &lt;server_name&gt;,
             {
                  CREDENTIAL = &lt;db_scoped_credential_name&gt;
                  | FEDERATED_SERVICE_ACCOUNT = ON | OFF
             }
        )
        | OFF
    }
}

&lt;persistent_log_buffer_option&gt; ::=
{
    PERSISTENT_LOG_BUFFERâ€¯
    {
          = ON (DIRECTORY_NAME= 'path-to-directory-on-a-DAX-volume')
        | = OFF
    }
}

&lt;service_broker_option&gt; ::=
{
    ENABLE_BROKER
  | DISABLE_BROKER
  | NEW_BROKER
  | ERROR_BROKER_CONVERSATIONS
  | HONOR_BROKER_PRIORITY { ON | OFF }
}

&lt;snapshot_option&gt; ::=
{
    ALLOW_SNAPSHOT_ISOLATION { ON | OFF }
  | READ_COMMITTED_SNAPSHOT { ON | OFF }
  | MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT = { ON | OFF }
}

&lt;sql_option&gt; ::=
{
    ANSI_NULL_DEFAULT { ON | OFF }
  | ANSI_NULLS { ON | OFF }
  | ANSI_PADDING { ON | OFF }
  | ANSI_WARNINGS { ON | OFF }
  | ARITHABORT { ON | OFF }
  | COMPATIBILITY_LEVEL = { 170 | 160 | 150 | 140 | 130 | 120 | 110 | 100 }
  | CONCAT_NULL_YIELDS_NULL { ON | OFF }
  | NUMERIC_ROUNDABORT { ON | OFF }
  | QUOTED_IDENTIFIER { ON | OFF }
  | RECURSIVE_TRIGGERS { ON | OFF }
}

&lt;suspend_for_snapshot_backup&gt; ::=
    SET SUSPEND_FOR_SNAPSHOT_BACKUP = { ON | OFF } [ ( MODE = COPY_ONLY ) ]

&lt;target_recovery_time_option&gt; ::=
    TARGET_RECOVERY_TIME = target_recovery_time { SECONDS | MINUTES }

&lt;termination&gt;::=
{
    ROLLBACK AFTER number [ SECONDS ]
  | ROLLBACK IMMEDIATE
  | NO_WAIT
}

&lt;temporal_history_retention&gt; ::=
    TEMPORAL_HISTORY_RETENTION { ON | OFF }

&lt;data_retention_policy&gt; ::=
    DATA_RETENTION { ON | OFF }

&lt;optimized_locking&gt; ::=
{
    OPTIMIZED_LOCKING = { ON | OFF }
}
</code></pre>
<h2 id="arguments">Arguments</h2>
<h4 id="database_name"><em>database_name</em></h4>
<p>The name of the database to be modified.</p>
<h4 id="current">CURRENT</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Runs the action in the current database. <code>CURRENT</code> isn't supported for all options in all contexts. If <code>CURRENT</code> fails, provide the database name.</p>
<h4 id="for-secondary">FOR SECONDARY</h4>
<p><strong>Applies to</strong>: SQL Server 2022 (16.x) and later versions</p>
<p>Specifies the settings for secondary replicas. All secondary replicas must have the identical values. Similar to <code>FOR SECONDARY</code> for <a href="alter-database-scoped-configuration-transact-sql?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)</a>.</p>
<p>For use with the Query Store (<code>QUERY_STORE</code>) and Automatic Tuning (<code>AUTOMATIC_TUNING</code>) only.</p>
<p>Before SQL Server Management Studio (SSMS) version 21, the <code>FOR SECONDARY</code> syntax is valid but not recognized by IntelliSense. For SQL Server 2022, SSMS IntelliSense does not recognize the <code>FOR SECONDARY</code> syntax as valid, but it is valid.</p>
<h4 id="accelerated_database_recovery-">&lt;accelerated_database_recovery&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2019 (15.x))</p>
<p>Enables <a href="../../relational-databases/accelerated-database-recovery-management?view=sql-server-ver17" data-linktype="relative-path">accelerated database recovery (ADR)</a>. ADR is set to OFF by default in SQL Server 2019 (15.x) and later. By using this syntax, you can designate a specific filegroup for the Persistent Version Store (PVS) data. If no filegroup is specified, PVS uses the <code>PRIMARY</code> filegroup. For more information, see <a href="../../relational-databases/accelerated-database-recovery-management?view=sql-server-ver17" data-linktype="relative-path">Manage accelerated database recovery</a>.</p>
<p>To set ACCELERATED_DATABASE_RECOVERY ON or OFF, there must be no active connections to the database except for the connection running the ALTER DATABASE command. However, the database doesn't have to be in single-user mode. You can't change the state of this option unless the database is ONLINE.</p>
<h4 id="auto_option-">&lt;auto_option&gt; ::=</h4>
<p>Controls automatic options.</p>
<h4 id="auto_close"> AUTO_CLOSE { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The database is shut down cleanly and its resources are freed after the last user exits.</p>
<p>The database automatically reopens when a user tries to use the database again. For example, this behavior occurs when a user issues a <code>USE database_name</code> statement. The database might shut down cleanly with AUTO_CLOSE set to ON. If so, the database doesn't reopen until a user tries to use the database the next time the Database Engine restarts.</p>
<p>After a database is shut down, the next time an application attempts to use the database, the database must first be opened, and then the status changed to online. This might take some time and can result in application timeouts.</p>
</li>
<li><p>OFF</p>
<p>The database remains open after the last user exits.</p>
<p>The AUTO_CLOSE option is useful for desktop databases because it allows for database files to be managed as regular files. They can be moved, copied to make backups, or even emailed to other users. The AUTO_CLOSE process is asynchronous; repeatedly opening and closing the database doesn't reduce performance.</p>
</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>The AUTO_CLOSE option isn't available in a contained database or on SQL Database.
You can determine this option's status by examining the <code>is_auto_close_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>IsAutoClose</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>When AUTO_CLOSE is set to ON, some columns in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view and the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function returns NULL because the database is unavailable to retrieve the data. To resolve this issue, run a USE statement to open the database.</p>
<p>Database mirroring requires AUTO_CLOSE set to OFF.</p>
</div>
<p>When the database is set to <code>AUTOCLOSE = ON</code>, an operation that initiates an automatic database shutdown clears the plan cache for the instance of SQL Server. Clearing the plan cache causes a recompilation of all subsequent execution plans and can cause a sudden, temporary decrease in query performance. Starting with SQL Server 2005 (9.x) Service Pack 2, for each cleared cache store in the plan cache, the SQL Server error log contains the following informational message: <code>SQL Server has encountered %d occurrence(s) of cachestore flush for the '%s' cachestore (part of plan cache) due to some database maintenance or reconfigure operations</code>. This message is logged every five minutes as long as the cache is flushed within that time interval.</p>
<p>The AUTO_CLOSE setting can be a useful feature in some rare situations, for example, in a SQL Server instance without enough memory to operate stably with a large number of databases, or for a legacy 32-bit SQL Server instance with a large number of databases. In such scenarios, it might be useful to enable AUTO_CLOSE and conserve the memory resources required to keep a database open when there's no application using the database. When the database is open, some default memory allocations are required (for example, internal structures to represent various database metadata objects and transaction log buffers).</p>
<h4 id="auto_create_statistics"> AUTO_CREATE_STATISTICS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The Query Optimizer creates statistics on single columns in query predicates, as necessary, to improve query plans and query performance. These single-column statistics are created when Query Optimizer compiles queries. The single-column statistics are created only on columns that aren't already the first column of an existing statistics object.</p>
<p>The default setting is ON. We recommend that you use the default setting for most databases.</p>
</li>
<li><p>OFF</p>
<p>The Query Optimizer doesn't create statistics on single columns in query predicates when it's compiling queries. Setting this option to OFF can cause suboptimal query plans and degraded query performance.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_create_stats_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoCreateStatistics</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>For more information, see the section "Using the Database-wide statistics options" in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="incremental--on--off">INCREMENTAL = ON | OFF</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2014 (12.x)) and Azure SQL Database</p>
<p>Set AUTO_CREATE_STATISTICS to ON, and set INCREMENTAL to ON. This sets automatically created stats as incremental whenever incremental stats are supported. The default value is OFF. For more information, see <a href="create-statistics-transact-sql?view=sql-server-ver17" data-linktype="relative-path">CREATE STATISTICS</a>.</p>
<h4 id="auto_shrink"> AUTO_SHRINK { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The database files are candidates for periodic shrinking. Unless you have a specific requirement, don't set the AUTO_SHRINK database option to ON. For more information, see <a href="../../relational-databases/databases/shrink-a-database?view=sql-server-ver17" data-linktype="relative-path">Shrink a database</a>.</p>
<p>Both data files and log files can be automatically shrunk. AUTO_SHRINK reduces the size of the transaction log only if you set the database to SIMPLE recovery model or if you back up the log. When you set AUTO_SHRINK to OFF, the database files aren't automatically shrunk during periodic checks for unused space.</p>
<p>The AUTO_SHRINK option shrinks files when more than 25 percent of the file contains unused space. It shrinks the file to one of two sizes (whichever is larger):</p>
<ul>
<li>The size at which 25 percent of the file is unused space</li>
<li>The size of the file when it was created</li>
</ul>
<p>You can't shrink a read-only database.</p>
</li>
<li><p>OFF</p>
<p>The database files aren't automatically shrunk during periodic checks for unused space.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_shrink_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoShrink</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<div class="NOTE">
<p>Note</p>
<p>The AUTO_SHRINK option isn't available in a Contained Database.</p>
</div>
<h4 id="auto_update_statistics"> AUTO_UPDATE_STATISTICS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Specifies that Query Optimizer updates statistics when they're used by a query and when they might be out-of-date. Statistics become out-of-date after insert, update, delete, or merge operations change the data distribution in the table or indexed view. Query Optimizer determines when statistics might be out-of-date by counting the number of data modifications since the last statistics update and comparing the number of modifications to a threshold. The threshold is based on the number of rows in the table or indexed view.</p>
<p>Query Optimizer checks for out-of-date statistics before it compiles a query and runs a cached query plan. Query Optimizer uses the columns, tables, and indexed views in the query predicate to determine which statistics might be out-of-date. Query Optimizer determines this information before it compiles a query. Before running a cached query plan, the Database Engine verifies that the query plan references up-to-date statistics.</p>
<p>The AUTO_UPDATE_STATISTICS option applies to statistics created for indexes, single-columns in query predicates, and statistics that are created by using the CREATE STATISTICS statement. This option also applies to filtered statistics.</p>
<p>The default is ON. We recommend that you use the default setting for most databases.</p>
<p>Use the AUTO_UPDATE_STATISTICS_ASYNC option to specify whether the statistics are updated synchronously or asynchronously.</p>
</li>
<li><p>OFF</p>
<p>Specifies that Query Optimizer doesn't update statistics when they're used by a query. Query Optimizer also doesn't update statistics when they might be out-of-date. Setting this option to OFF can cause suboptimal query plans and degraded query performance.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_update_stats_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoUpdateStatistics</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>For more information, see the section "Using the Database-wide statistics options" in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="auto_update_statistics_async"> AUTO_UPDATE_STATISTICS_ASYNC { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Specifies that statistics updates for the AUTO_UPDATE_STATISTICS option are asynchronous. Query Optimizer doesn't wait for statistics updates to complete before it compiles queries.</p>
<p>Setting this option to ON has no effect unless AUTO_UPDATE_STATISTICS is set to ON.</p>
<p>By default, the AUTO_UPDATE_STATISTICS_ASYNC option is OFF, and Query Optimizer updates statistics synchronously.</p>
</li>
<li><p>OFF</p>
<p>Specifies that statistics updates for the AUTO_UPDATE_STATISTICS option are synchronous. Query Optimizer waits for statistics updates to complete before it compiles queries.</p>
<div class="NOTE">
<p>Note</p>
<p>Setting this option to OFF has no effect unless AUTO_UPDATE_STATISTICS is set to ON.</p>
</div>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_update_stats_async_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<p>For more information that describes when to use synchronous or asynchronous statistics updates, see the "Statistics options" section in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17#statistics-options" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="auto_tuning"> &lt;automatic_tuning_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2017 (14.x))</p>
<p>Enables or disables <code>FORCE_LAST_GOOD_PLAN</code> <a href="../../relational-databases/automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a> option. You can view the status of this option in the view <code>sys.database_automatic_tuning_options</code>.</p>
<h4 id="force_last_good_plan---default--on--off-">FORCE_LAST_GOOD_PLAN = { DEFAULT | ON | OFF }</h4>
<ul>
<li><p>DEFAULT</p>
<p>The default value for SQL Server is OFF.</p>
</li>
<li><p>ON</p>
<p>The Database Engine automatically forces the last known good plan on the Transact-SQL queries where new query plan causes performance regressions. The Database Engine continuously monitors query performance of the Transact-SQL query with the forced plan.</p>
<p>If there are performance gains, the Database Engine keeps using last known good plan. If performance gains aren't detected, the Database Engine produces a new query plan. The statement fails if the <a href="../../relational-databases/performance/monitoring-performance-by-using-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Query Store</a> isn't enabled or if the Query Store isn't in <em>Read-Write</em> mode.</p>
</li>
<li><p>OFF</p>
<p>The Database Engine reports potential query performance regressions caused by query plan changes in <a href="../../relational-databases/system-dynamic-management-views/sys-dm-db-tuning-recommendations-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_db_tuning_recommendations</a> view. However, these recommendations aren't automatically applied. Users can monitor active recommendations and fix identified problems by applying Transact-SQL scripts that are shown in the view. The default value is OFF.</p>
</li>
</ul>
<h4 id="change_tracking_option-">&lt;change_tracking_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server and Azure SQL Database</p>
<p>Controls change tracking options. You can enable change tracking, set options, change options, and disable change tracking. For examples, see the <a href="#examples" data-linktype="self-bookmark">Examples</a> section later in this article.</p>
<ul>
<li><p>ON</p>
<p>Enables change tracking for the database. When you enable change tracking, you can also set the AUTO CLEANUP and CHANGE RETENTION options.</p>
</li>
<li><p>AUTO_CLEANUP = { ON | OFF }</p>
<ul>
<li><p>ON</p>
<p>Change tracking information is automatically removed after the specified retention period.</p>
</li>
<li><p>OFF</p>
<p>Change tracking data isn't automatically removed from the database.</p>
</li>
</ul>
</li>
<li><p>CHANGE_RETENTION = <em>retention_period</em> { DAYS | HOURS | MINUTES }</p>
<p>Specifies the minimum period for keeping change tracking information in the database. Data is removed only when the AUTO_CLEANUP value is ON.</p>
<p><em>retention_period</em> is an integer that specifies the numerical component of the retention period.</p>
<p>The default retention period is <strong>2 days</strong>. The minimum retention period is 1 minute. The default retention type is <strong>DAYS</strong>.</p>
</li>
<li><p>OFF
Disables change tracking for the database. Disable change tracking on all tables before you disable change tracking off the database.</p>
</li>
</ul>
<h4 id="containment_option-">&lt;containment_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Controls database containment options.</p>
<h4 id="containment---none--partial">CONTAINMENT = { NONE | PARTIAL}</h4>
<ul>
<li><p>NONE</p>
<p>The database isn't a contained database.</p>
</li>
<li><p>PARTIAL</p>
<p>The database is a contained database. Setting database containment to partial fails if the database has replication, change data capture, or change tracking enabled. Error checking stops after one failure. For more information about contained databases, see <a href="../../relational-databases/databases/contained-databases?view=sql-server-ver17" data-linktype="relative-path">Contained Databases</a>.</p>
</li>
</ul>
<h4 id="cursor_option-">&lt;cursor_option&gt; ::=</h4>
<p>Controls cursor options.</p>
<h4 id="cursor_close_on_commit--on--off-">CURSOR_CLOSE_ON_COMMIT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Any cursors open when you commit or roll back a transaction are closed.</p>
</li>
<li><p>OFF</p>
<p>Cursors remain open when a transaction is committed; rolling back a transaction closes any cursors, except those cursors defined as INSENSITIVE or STATIC.</p>
</li>
</ul>
<p>Connection-level settings that are set by using the SET statement override the default database setting for CURSOR_CLOSE_ON_COMMIT. ODBC and OLE DB clients issue a connection-level SET statement setting CURSOR_CLOSE_ON_COMMIT to OFF for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-cursor-close-on-commit-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET CURSOR_CLOSE_ON_COMMIT</a>.</p>
<p>You can determine this option's status by examining the <code>is_cursor_close_on_commit_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>IsCloseCursorsOnCommitEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="cursor_default--local--global-">CURSOR_DEFAULT { LOCAL | GLOBAL }</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>Controls whether cursor scope uses LOCAL or GLOBAL.</p>
<ul>
<li><p>LOCAL</p>
<p>When you specify LOCAL and don't define a cursor as GLOBAL when you create the cursor, the cursor's scope is local. Specifically, the scope is local to the batch, stored procedure, or trigger in which you created the cursor. The cursor name is valid only within this scope.</p>
<p>The cursor can be referenced by local cursor variables in the batch, stored procedure, or trigger, or a stored procedure OUTPUT parameter. The cursor is implicitly deallocated when the batch, stored procedure, or trigger ends. The cursor is deallocated unless it was passed back in an OUTPUT parameter. The cursor might be passed back in an OUTPUT parameter. If the cursor passes back this way, the cursor is deallocated when the last variable that references the cursor is deallocated or goes out of scope.</p>
</li>
<li><p>GLOBAL</p>
<p>When GLOBAL is specified, and a cursor isn't defined as LOCAL when created, the scope of the cursor is global to the connection. The cursor name can be referenced in any stored procedure or batch executed by the connection.</p>
<p>The cursor is implicitly deallocated only at disconnect. For more information, see <a href="../language-elements/declare-cursor-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DECLARE CURSOR</a>.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_local_cursor_default</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsLocalCursorsDefault</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="temporal_history_retention-">&lt;temporal_history_retention&gt; ::=</h4>
<h4 id="temporal_history_retention--on--off-">TEMPORAL_HISTORY_RETENTION { ON | OFF }</h4>
<p>ON by default but also automatically set to OFF after point in time restore operation. For more information including how to enable this setting, see <a href="../../relational-databases/tables/manage-retention-of-historical-data-in-system-versioned-temporal-tables?view=sql-server-ver17#how-to-configure-retention-policy" data-linktype="relative-path">How to configure retention policy</a>.</p>
<ul>
<li><p>ON</p>
<p>Default. Enables temporal table retention policy. For more information, see <a href="../../relational-databases/tables/manage-retention-of-historical-data-in-system-versioned-temporal-tables?view=sql-server-ver17" data-linktype="relative-path">Manage retention of historical data in system-versioned temporal tables</a>.</p>
</li>
<li><p>OFF</p>
<p>Don't perform temporal historical retention policy.</p>
</li>
</ul>
<h4 id="data_retention_policy-">&lt;data_retention_policy&gt; ::=</h4>
<p><strong>Applies to</strong>: Azure SQL Edge only.</p>
<h4 id="data_retention--on--off-">DATA_RETENTION { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables Data Retention policy-based cleanup on a database.</p>
</li>
<li><p>OFF</p>
<p>Disables Data Retention policy-based cleanup on a database.</p>
</li>
</ul>
<h4 id="database_mirroring">&lt;database_mirroring&gt;</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>For the argument descriptions, see <a href="alter-database-transact-sql-database-mirroring?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE Database Mirroring</a>.</p>
<h4 id="date_correlation_optimization_option-">&lt;date_correlation_optimization_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>Controls the date_correlation_optimization option.</p>
<h4 id="date_correlation_optimization--on--off-">DATE_CORRELATION_OPTIMIZATION { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>SQL Server maintains correlation statistics where a FOREIGN KEY constraint links any two tables in the database and the tables have <strong>datetime</strong> columns.</p>
<p>Enabling <code>DATE_CORRELATION_OPTIMIZATION</code> increases the attack surface area when restoring <a href="../../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases?view=sql-server-ver17#security-risk-of-restoring-backups-from-untrusted-sources" data-linktype="relative-path">untrusted backup</a> as the optimizer executes those objects with elevated privileges.</p>
</li>
<li><p>OFF</p>
<p>Correlation statistics aren't maintained.</p>
</li>
</ul>
<p>To set DATE_CORRELATION_OPTIMIZATION to ON, there must be no active connections to the database except for the connection that's executing the ALTER DATABASE statement. Afterwards, multiple connections are supported.</p>
<p>The current setting of this option can be determined by examining the <code>is_date_correlation_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="db_encryption_option-">&lt;db_encryption_option&gt; ::=</h4>
<p>Controls the database encryption state.</p>
<h4 id="encryption--on--off--suspend--resume-">ENCRYPTION { ON | OFF | SUSPEND | RESUME }</h4>
<ul>
<li><p>ON</p>
<p>Sets the database to be encrypted.</p>
</li>
<li><p>OFF</p>
<p>Sets the database to not be encrypted.</p>
</li>
<li><p>SUSPEND</p>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2019 (15.x))</p>
<p>Can be used to pause the encryption scan after transparent data encryption was enabled or disabled, or after the encryption key was changed.</p>
</li>
<li><p>RESUME</p>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2019 (15.x))</p>
<p>Can be used to resume a previously paused encryption scan.</p>
</li>
</ul>
<p>For more information about database encryption, see <a href="../../relational-databases/security/encryption/transparent-data-encryption?view=sql-server-ver17" data-linktype="relative-path">Transparent data encryption (TDE)</a>, and <a href="/en-us/azure/azure-sql/database/transparent-data-encryption-tde-overview" data-linktype="absolute-path">Transparent data encryption for Azure SQL Database, Azure SQL Managed Instance, and Azure Synapse Analytics</a>.</p>
<p>When encryption is enabled at the database level, all file groups are encrypted. Any new file groups inherit the encrypted property. If any file groups in the database are set to READ ONLY, the database encryption operation fails.</p>
<p>You can see the encryption state of the database and the state of the encryption scan by using the <a href="../../relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_database_encryption_keys</a> dynamic management view.</p>
<h4 id="db_state_option-">&lt;db_state_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>Controls the state of the database.</p>
<ul>
<li><p>OFFLINE</p>
<p>The database is closed, shut down cleanly, and marked offline. The database can't be modified while it's offline.</p>
</li>
<li><p>ONLINE</p>
<p>The database is open and available for use.</p>
</li>
<li><p>EMERGENCY</p>
<p>The database is marked READ_ONLY, logging is disabled, and access is limited to members of the sysadmin fixed server role. EMERGENCY is primarily used for troubleshooting purposes. For example, a database marked as suspect because of a corrupted log file can be set to the EMERGENCY state. This setting could enable the system administrator read-only access to the database. Only members of the sysadmin fixed server role can set a database to the EMERGENCY state.</p>
</li>
</ul>
<p>Requires the <code>ALTER DATABASE</code> permission for the subject database, to change a database to the offline or emergency state, and the server level <code>ALTER ANY DATABASE</code> permission to move a database from offline to online.</p>
<p>You can determine this option's status by examining the <code>state</code> and <code>state_desc</code> columns in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>Status</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function. For more information, see <a href="../../relational-databases/databases/database-states?view=sql-server-ver17" data-linktype="relative-path">Database States</a>.</p>
<p>A database marked as RESTORING can't be set to OFFLINE, ONLINE, or EMERGENCY. A database could be in the RESTORING state during an active restore operation or when a restore operation of a database or log file fails because of a corrupted backup file.</p>
<h4 id="db_update_option-">&lt;db_update_option&gt; ::=</h4>
<p>Controls whether updates are allowed on the database.</p>
<ul>
<li><p>READ_ONLY</p>
<p>Users can read data from the database but not modify it.</p>
<div class="NOTE">
<p>Note</p>
<p>To improve query performance, update statistics before setting a database to READ_ONLY. If additional statistics are needed after a database is set to READ_ONLY, the Database Engine creates statistics in the <code>tempdb</code> system database. For more information about statistics for a read-only database, see <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a>.</p>
</div>
</li>
<li><p>READ_WRITE</p>
<p>The database is available for read and write operations.</p>
</li>
</ul>
<p>To change this state, you must have exclusive access to the database. For more information, see the SINGLE_USER clause.</p>
<div class="NOTE">
<p>Note</p>
<p>On Azure SQL Database federated databases, <code>SET { READ_ONLY | READ_WRITE }</code> is disabled.</p>
</div>
<h4 id="db_user_access_option-">&lt;db_user_access_option&gt; ::=</h4>
<p>Controls user access to the database.</p>
<h4 id="single_user">SINGLE_USER</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>Specifies that only one user at a time can access the database. If you specify SINGLE_USER and another user connects to the database, the ALTER DATABASE statement is blocked until all users disconnect from the specified database. To override this behavior, see the WITH &lt;termination&gt; clause.</p>
<p>The database remains in SINGLE_USER mode even if the user that set the option signs out. At that point, a different user, but only one, can connect to the database.</p>
<p>Before you set the database to SINGLE_USER, verify the AUTO_UPDATE_STATISTICS_ASYNC option is set to OFF. When set to ON, the background thread used to update statistics takes a connection against the database, and you can't access the database in single-user mode. To view the status of this option, query the <code>is_auto_update_stats_async_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. If the option is set to ON, perform the following tasks:</p>
<ol>
<li><p>Set AUTO_UPDATE_STATISTICS_ASYNC to OFF.</p>
</li>
<li><p>Check for active asynchronous statistics jobs by querying the <a href="../../relational-databases/system-dynamic-management-views/sys-dm-exec-background-job-queue-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_exec_background_job_queue</a> dynamic management view.</p>
</li>
</ol>
<p>If there are active jobs, either allow the jobs to complete or manually terminate them by using <a href="../language-elements/kill-stats-job-transact-sql?view=sql-server-ver17" data-linktype="relative-path">KILL STATS JOB</a>.</p>
<h4 id="restricted_user">RESTRICTED_USER</h4>
<p>Allows for only members of the <code>db_owner</code> fixed database role and <code>dbcreator</code> and <code>sysadmin</code> fixed server roles to connect to the database. RESTRICTED_USER doesn't limit their number. Disconnect all connections to the database using the timeframe specified by the ALTER DATABASE statement's termination clause. After the database has transitioned to the RESTRICTED_USER state, connection attempts by unqualified users are refused.</p>
<h4 id="multi_user">MULTI_USER</h4>
<p>All users that have the appropriate permissions to connect to the database are allowed. You can determine this option's status by examining the <code>user_access</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>UserAccess</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="delayed_durability_option-">&lt;delayed_durability_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with  SQL Server 2014 (12.x))</p>
<p>Controls whether transactions commit fully durable or delayed durable.</p>
<ul>
<li><p>DISABLED</p>
<p>All transactions following <code>SET DISABLED</code> are fully durable. Any durability options set in an atomic block or commit statement are ignored.</p>
</li>
<li><p>ALLOWED</p>
<p>All transactions following <code>SET ALLOWED</code> are either fully durable or delayed durable, depending upon the durability option set in the atomic block or commit statement.</p>
</li>
<li><p>FORCED</p>
<p>All transactions following <code>SET FORCED</code> are delayed durable. Any durability options set in an atomic block or commit statement are ignored.</p>
</li>
</ul>
<h4 id="external_access_option-">&lt;external_access_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>Controls whether the database can be accessed by external resources, such as objects from another database.</p>
<h4 id="db_chaining--on--off-">DB_CHAINING { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Database can be the source or target of a cross-database ownership chain.</p>
</li>
<li><p>OFF</p>
<p>Database can't participate in cross-database ownership chaining.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>The instance of SQL Server recognizes this setting when the cross db ownership chaining server option is 0 (OFF). When cross db ownership chaining is 1 (ON), all user databases can participate in cross-database ownership chains, regardless of the value of this option. This option is set by using <a href="../../relational-databases/system-stored-procedures/sp-configure-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sp_configure</a>.</p>
</div>
<p>To set this option, requires <code>CONTROL SERVER</code> permission on the database.</p>
<p>The DB_CHAINING option can't be set on the <code>master</code>, <code>model</code>, and <code>tempdb</code> system databases.</p>
<p>You can determine this option's status by examining the <code>is_db_chaining_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="trustworthy--on--off-">TRUSTWORTHY { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Database modules (for example, user-defined functions or stored procedures) that use an impersonation context can access resources outside the database.</p>
</li>
<li><p>OFF</p>
<p>Database modules in an impersonation context can't access resources outside the database.</p>
<p>TRUSTWORTHY is set to OFF whenever the database is attached.</p>
</li>
</ul>
<p>By default, all system databases except the <code>msdb</code> database have TRUSTWORTHY set to OFF. The value can't be changed for the <code>model</code> and <code>tempdb</code> databases. We recommend that you never set the TRUSTWORTHY option to ON for the <code>master</code> database.</p>
<p>To set this option, requires <code>CONTROL SERVER</code> permission on the database.</p>
<p>You can determine this option's status by examining the <code>is_trustworthy_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="default_fulltext_language">DEFAULT_FULLTEXT_LANGUAGE</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Specifies the default language value for full-text indexed columns.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>This option is allowable only when CONTAINMENT has been set to PARTIAL. If CONTAINMENT is set to NONE, errors occur.</p>
</div>
<h4 id="default_language">DEFAULT_LANGUAGE</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Specifies the default language for all newly created logins. Language can be specified by providing the local ID (lcid), the language name, or the language alias. For a list of acceptable language names and aliases, see <a href="../../relational-databases/system-compatibility-views/sys-syslanguages-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.syslanguages</a>. This option is allowable only when CONTAINMENT has been set to PARTIAL. If CONTAINMENT is set to NONE, errors occur.</p>
<h4 id="nested_triggers">NESTED_TRIGGERS</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Specifies whether an AFTER trigger can cascade; that is, perform an action that initiates another trigger, which initiates another trigger, and so on. This option is allowable only when CONTAINMENT has been set to PARTIAL. If CONTAINMENT is set to NONE, errors occur.</p>
<h4 id="transform_noise_words">TRANSFORM_NOISE_WORDS</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Used to suppress an error message if noise words, or stopwords, cause a Boolean operation on a full-text query to fail. This option is allowable only when CONTAINMENT has been set to PARTIAL. If CONTAINMENT is set to NONE, errors occur.</p>
<h4 id="two_digit_year_cutoff">TWO_DIGIT_YEAR_CUTOFF</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Specifies an integer from 1753 to 9999 that represents the cutoff year for interpreting two-digit years as four-digit years. This option is allowable only when CONTAINMENT has been set to PARTIAL. If CONTAINMENT is set to NONE, errors occur.</p>
<h4 id="filestream_option-">&lt;FILESTREAM_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Controls the settings for FileTables.</p>
<h4 id="non_transacted_access---off--read_only--full-">NON_TRANSACTED_ACCESS = { OFF | READ_ONLY | FULL }</h4>
<ul>
<li><p>OFF</p>
<p>Non-transactional access to FileTable data is disabled.</p>
</li>
<li><p>READ_ONLY</p>
<p>FILESTREAM data in FileTables in this database can be read by non-transactional processes.</p>
</li>
<li><p>FULL</p>
<p>Enables full, non-transactional access to FILESTREAM data in FileTables is enabled.</p>
</li>
</ul>
<h4 id="directory_name--directory_name">DIRECTORY_NAME = <em>&lt;directory_name&gt;</em></h4>
<p>A Windows-compatible directory name. This name should be unique among all the database-level directory names in the SQL Server instance. Uniqueness comparison is case-insensitive, regardless of collation settings. This option must be set before creating a FileTable in this database.</p>
<h4 id="hadr_options-">&lt;HADR_options&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>See <a href="alter-database-transact-sql-set-hadr?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE SET HADR</a>.</p>
<h4 id="mixed_page_allocation_option-">&lt;mixed_page_allocation_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2016 (13.x))</p>
<p>Controls whether the database can create initial pages using a mixed extent for the first eight pages of a table or index.</p>
<h4 id="mixed_page_allocation--off--on-">MIXED_PAGE_ALLOCATION { OFF | ON }</h4>
<ul>
<li><p>OFF</p>
<p>The database always creates initial pages using uniform extents. OFF is the default value.</p>
</li>
<li><p>ON</p>
<p>The database can create initial pages using mixed extents.</p>
</li>
</ul>
<p>This setting is always ON for all system databases except <code>tempdb</code> where it is always OFF. The setting can't be changed for system databases.</p>
<h4 id="parameterization_option-">&lt;PARAMETERIZATION_option&gt; ::=</h4>
<p>Controls the parameterization option. For more information on parameterization, see the <a href="../../relational-databases/query-processing-architecture-guide?view=sql-server-ver17#simple-parameterization" data-linktype="relative-path">Query Processing Architecture Guide</a>.</p>
<h4 id="parameterization--simple--forced-">PARAMETERIZATION { SIMPLE | FORCED }</h4>
<ul>
<li><p>SIMPLE</p>
<p>Queries are parameterized based on the default behavior of the database.</p>
</li>
<li><p>FORCED</p>
<p>SQL Server parameterizes all queries in the database.</p>
</li>
</ul>
<p>The current setting of this option can be determined by examining the <code>is_parameterization_forced</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="query-store"> &lt;query_store_options&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2016 (13.x))</p>
<h4 id="on--off---forced-----clear--all-">ON | OFF [ ( FORCED )  ] | CLEAR [ ALL ]</h4>
<p>Controls whether the Query Store is enabled in this database, and also controls removing the contents of the Query Store. For more information, see <a href="../../relational-databases/performance/query-store-usage-scenarios?view=sql-server-ver17" data-linktype="relative-path">Query Store Usage Scenarios</a>.</p>
<ul>
<li><p>ON</p>
<p>Enables the Query Store.</p>
<p>Many new performance features of SQL Server 2022 (16.x) such as Query Store hints, CE Feedback, Degree of Parallelism (DOP) feedback, and Memory Grant feedback (MGF) persistence required Query Store to be enabled. For databases that have been restored from other SQL Server instances and for those databases that are upgraded from an in-place upgrade to SQL Server 2022 (16.x), these databases retain the previous Query Store settings. If there is concern about the overhead Query Store can introduce, administrators can leverage <a href="#query_capture_policy_option_list--" data-linktype="self-bookmark">custom capture policies</a> with <code>QUERY_CAPTURE_MODE = CUSTOM</code>. For examples of how to enable the Query Store with custom capture policy options, see the <a href="#examples" data-linktype="self-bookmark">Examples</a> section later in this article.</p>
</li>
<li><p>OFF [ ( FORCED ) ]</p>
<p>Disables the Query Store. FORCED is optional. FORCED aborts all running Query Store background tasks, and skips the synchronous flush when Query Store is turned off. Causes the Query Store to shut down as fast as possible. FORCED applies to SQL Server 2016 (13.x) SP2 CU14, SQL Server 2017 (14.x) CU21, SQL Server 2019 (15.x) CU6, and later builds.</p>
<div class="NOTE">
<p>Note</p>
<p>Query Store cannot be disabled in Azure SQL Database. Executing <code>ALTER DATABASE [database] SET QUERY_STORE = OFF</code> returns the warning <code>'QUERY_STORE=OFF' is not supported in this version of SQL Server.</code>.</p>
</div>
</li>
<li><p>CLEAR [ ALL ]</p>
<p>Removes query-related data from the Query Store. ALL is optional. ALL removes query-related data and metadata from the Query Store.</p>
</li>
</ul>
<h4 id="operation_mode--read_only--read_write-">OPERATION_MODE { READ_ONLY | READ_WRITE }</h4>
<p>Describes the operation mode of the Query Store.</p>
<h4 id="read_write">READ_WRITE</h4>
<p>The Query Store collects and persists query plan and runtime execution statistics information.</p>
<h4 id="read_only">READ_ONLY</h4>
<p>Information can be read from the Query Store, but new information isn't added. If the maximum issued space of the Query Store has been exhausted, the Query Store changes its operation mode to READ_ONLY.</p>
<h4 id="cleanup_policy">CLEANUP_POLICY</h4>
<p>Describes the data retention policy of the Query Store. STALE_QUERY_THRESHOLD_DAYS determines the number of days for which the information for a query is kept in the Query Store. STALE_QUERY_THRESHOLD_DAYS is type <strong>bigint</strong>. The default value is 30.</p>
<h4 id="data_flush_interval_seconds">DATA_FLUSH_INTERVAL_SECONDS</h4>
<p>Determines the frequency at which data written to the Query Store is persisted to disk. To optimize for performance, data collected by the Query Store is asynchronously written to the disk. The frequency at which this asynchronous transfer occurs is configured by using the DATA_FLUSH_INTERVAL_SECONDS argument. DATA_FLUSH_INTERVAL_SECONDS is type <strong>bigint</strong>. The default value is <strong>900</strong> (15 min).</p>
<h4 id="max_storage_size_mb">MAX_STORAGE_SIZE_MB</h4>
<p>Determines the space issued to the Query Store. MAX_STORAGE_SIZE_MB is type <strong>bigint</strong>. The default value is <strong>100 MB</strong> for SQL Server (SQL Server 2016 (13.x) through SQL Server 2017 (14.x)). Starting with SQL Server 2019 (15.x), the default value is <strong>1000 MB</strong>.</p>
<p><code>MAX_STORAGE_SIZE_MB</code> limit isn't strictly enforced. Storage size is checked only when Query Store writes data to disk. This interval is set by the <code>DATA_FLUSH_INTERVAL_SECONDS</code> option or the Management Studio Query Store dialog option <strong>Data Flush Interval</strong>. The interval default value is 900 seconds (or 15 minutes).</p>
<p>If the Query Store has breached the <code>MAX_STORAGE_SIZE_MB</code> limit between storage size checks, it transitions to read-only mode. If <code>SIZE_BASED_CLEANUP_MODE</code> is enabled, the cleanup mechanism to enforce the <code>MAX_STORAGE_SIZE_MB</code> limit is also triggered.</p>
<p>Once enough space has been cleared, the Query Store mode automatically switches back to read-write.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>If you think that your workload capture needs more than 10 GB of disk space, you should probably rethink and optimize your workload to reuse query plans (for example using <a href="../../relational-databases/query-processing-architecture-guide?view=sql-server-ver17#forced-parameterization" data-linktype="relative-path">forced parameterization</a>, or adjust the Query Store configurations.
Starting with SQL Server 2019 (15.x) and in Azure SQL Database, you can set <code>QUERY_CAPTURE_MODE</code> to CUSTOM for additional control over the query capture policy.</p>
</div>
<h4 id="interval_length_minutes">INTERVAL_LENGTH_MINUTES</h4>
<p>Determines the time interval at which runtime execution statistics data is aggregated into the Query Store. To optimize for space usage, the runtime execution statistics in the runtime stats store are aggregated over a fixed time window. This fixed time window is configured by using the INTERVAL_LENGTH_MINUTES argument. INTERVAL_LENGTH_MINUTES is type <strong>bigint</strong>. The default value is <strong>60</strong>.</p>
<h4 id="size_based_cleanup_mode--auto--off-">SIZE_BASED_CLEANUP_MODE { AUTO | OFF }</h4>
<p>Controls whether cleanup automatically activates when the total amount of data gets close to maximum size.</p>
<ul>
<li><p>AUTO</p>
<p>Size-based cleanup is automatically activated when size on disk reaches 90% of <strong>MAX_STORAGE_SIZE_MB</strong>. Size-based cleanup removes the least expensive and oldest queries first. It stops at approximately 80% of <strong>MAX_STORAGE_SIZE_MB</strong>. This value is the default configuration value.</p>
</li>
<li><p>OFF</p>
<p>Size-based cleanup isn't automatically activated.</p>
</li>
</ul>
<p>SIZE_BASED_CLEANUP_MODE is type <strong>nvarchar</strong>.</p>
<h4 id="query_capture_mode--all--auto--custom--none-">QUERY_CAPTURE_MODE { ALL | AUTO | CUSTOM | NONE }</h4>
<p>Designates the currently active query capture mode. Each mode defines specific query capture policies. QUERY_CAPTURE_MODE is type <strong>nvarchar</strong>.</p>
<div class="NOTE">
<p>Note</p>
<p>Cursors, queries inside Stored Procedures, and Natively compiled queries are always captured when the query capture mode is set to ALL, AUTO, or CUSTOM.</p>
</div>
<ul>
<li><p>ALL</p>
<p>Captures all queries. <strong>ALL</strong> is the default configuration value for SQL Server (SQL Server 2016 (13.x) through SQL Server 2017 (14.x)).</p>
</li>
<li><p>AUTO</p>
<p>Capture relevant queries based on execution count and resource consumption. This is the default configuration value for SQL Server (Starting with SQL Server 2019 (15.x)) and Azure SQL Database.</p>
</li>
<li><p>NONE</p>
<p>Stop capturing new queries. The Query Store continues to collect compile and runtime statistics for queries that were captured already. Use this configuration with caution since you might miss capturing important queries.</p>
</li>
<li><p>CUSTOM</p>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2019 (15.x))</p>
<p>Allows control over the <a href="#query_capture_policy_option_list--" data-linktype="self-bookmark">QUERY_CAPTURE_POLICY options</a>. Custom capture policies can help Query Store capture the most important queries in your workload. See the &lt;query_capture_policy_option_list&gt; for customizable options.</p>
</li>
</ul>
<h4 id="max_plans_per_query">MAX_PLANS_PER_QUERY</h4>
<p>Defines the maximum number of plans maintained for each query. MAX_PLANS_PER_QUERY is type <strong>int</strong>. The default value is <strong>200</strong>.</p>
<h4 id="wait_stats_capture_mode--on--off-">WAIT_STATS_CAPTURE_MODE { ON | OFF }</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2017 (14.x)))</p>
<p>Controls whether wait statistics are captured per query.</p>
<ul>
<li><p>ON</p>
<p>Wait statistics information per query is captured. This value is the default configuration value.</p>
</li>
<li><p>OFF</p>
<p>Wait statistics information per query aren't captured.</p>
</li>
</ul>
<h4 id="query_capture_policy_option_list--">&lt;query_capture_policy_option_list&gt; :: =</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2019 (15.x))</p>
<p>Controls the <a href="../../relational-databases/performance/monitoring-performance-by-using-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Query Store</a> capture policy options. Except for STALE_CAPTURE_POLICY_THRESHOLD, these options define the OR conditions that need to happen for queries to be captured in the defined Stale Capture Policy Threshold value.</p>
<p>Starting with SQL Server 2019 (15.x), the <code>QUERY_CAPTURE_MODE = AUTO</code> setting captures Query Store details when any of the following thresholds are hit:</p>
<ul>
<li>EXECUTION_COUNT = 30 executions = execution count</li>
<li>TOTAL_COMPILE_CPU_TIME_MS = 1 second = compile time in milliseconds</li>
<li>TOTAL_EXECUTION_CPU_TIME_MS = 100 ms = execution CPU time in milliseconds</li>
</ul>
<p>For example:</p>
<pre><code class="lang-sql">EXECUTION_COUNT = 30,
TOTAL_COMPILE_CPU_TIME_MS = 1000,
TOTAL_EXECUTION_CPU_TIME_MS = 100
</code></pre>
<p>You can customize these options with <code>QUERY_CAPTURE_MODE = CUSTOM</code>:</p>
<ul>
<li><p>STALE_CAPTURE_POLICY_THRESHOLD = <em>integer</em> { DAYS | HOURS }</p>
<p>Defines the evaluation interval period to determine if a query should be captured. The default is 1 day, and it can be set from 1 hour to seven days.</p>
</li>
<li><p>EXECUTION_COUNT = <em>integer</em></p>
<p>Defines the number of times a query is executed over the evaluation period. The default is 30, which means that for the default Stale Capture Policy Threshold, a query must execute at least 30 times in one day to be persisted in the Query Store. EXECUTION_COUNT is type <strong>int</strong>.</p>
</li>
<li><p>TOTAL_COMPILE_CPU_TIME_MS = <em>integer</em></p>
<p>Defines total elapsed compile CPU time used by a query over the evaluation period. The default is 1000, which means that for the default Stale Capture Policy Threshold, a query must have a total of at least one second of CPU time spent during query compilation in one day to be persisted in the Query Store. TOTAL_COMPILE_CPU_TIME_MS is type <strong>int</strong>.</p>
</li>
<li><p>TOTAL_EXECUTION_CPU_TIME_MS = <em>integer</em></p>
<p>Defines total elapsed execution CPU time used by a query over the evaluation period. The default is 100 which means that for the default Stale Capture Policy Threshold, a query must have a total of at least 100 ms of CPU time spent during execution in one day to be persisted in the Query Store. TOTAL_EXECUTION_CPU_TIME_MS is type <strong>int</strong>.</p>
</li>
</ul>
<h4 id="recovery_option-">&lt;recovery_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>Controls database recovery options and disk I/O error checking.</p>
<ul>
<li><p>FULL</p>
<p>Provides full recovery after media failure by using transaction log backups. If a data file is damaged, media recovery can restore all committed transactions. For more information, see <a href="../../relational-databases/backup-restore/recovery-models-sql-server?view=sql-server-ver17" data-linktype="relative-path">Recovery models</a>.</p>
</li>
<li><p>BULK_LOGGED</p>
<p>Provides recovery after media failure. Combines the best performance and least amount of log-space use for certain large-scale or bulk operations. For information about what operations can be minimally logged, see <a href="../../relational-databases/logs/the-transaction-log-sql-server?view=sql-server-ver17" data-linktype="relative-path">The transaction log</a>. Under the BULK_LOGGED recovery model, logging for these operations is minimal. For more information, see <a href="../../relational-databases/backup-restore/recovery-models-sql-server?view=sql-server-ver17" data-linktype="relative-path">Recovery models</a>.</p>
</li>
<li><p>SIMPLE</p>
<p>A simple backup strategy that uses minimal log space is provided. Log space can be automatically reused when it's no longer required for server failure recovery. For more information, see <a href="../../relational-databases/backup-restore/recovery-models-sql-server?view=sql-server-ver17" data-linktype="relative-path">Recovery models</a>.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>The simple recovery model is easier to manage than the other two models but at the expense of greater data loss exposure if a data file is damaged. All changes since the most recent database or differential database backup are lost and must be manually reentered.</p>
</div>
</li>
</ul>
<p>The default recovery model is determined by the recovery model of the <code>model</code> system database. For more information about selecting the appropriate recovery model, see <a href="../../relational-databases/backup-restore/recovery-models-sql-server?view=sql-server-ver17" data-linktype="relative-path">Recovery models</a>.</p>
<p>You can determine this option's status by examining the <code>recovery_model</code> and <code>recovery_model_desc</code> columns in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>Recovery</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="torn_page_detection--on--off-">TORN_PAGE_DETECTION { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Incomplete pages can be detected by the Database Engine.</p>
</li>
<li><p>OFF</p>
<p>Incomplete pages can't be detected by the Database Engine.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>The syntax structure TORN_PAGE_DETECTION ON | OFF will be removed in a future version of SQL Server. Avoid using this syntax structure in new development work, and plan to modify applications that currently use the syntax structure. Use the PAGE_VERIFY option instead.</p>
</div>
<h4 id="page_verify"> PAGE_VERIFY { CHECKSUM | TORN_PAGE_DETECTION | NONE }</h4>
<p>Discovers damaged database pages caused by disk I/O path errors. Disk I/O path errors can be the cause of database corruption problems. These errors are most often caused by power failures or disk hardware failures that occur at the time the page is written to disk.</p>
<ul>
<li><p>CHECKSUM</p>
<p>Calculates a checksum over the contents of the whole page and stores the value in the page header when a page is written to disk. When the page is read from disk, the checksum is recomputed and compared to the checksum value stored in the page header. If the values don't match, error message 824 (indicating a checksum failure) is reported to both the SQL Server error log and the Windows event log. A checksum failure indicates an I/O path problem. To determine the root cause requires investigation of the hardware, firmware drivers, BIOS, filter drivers (such as virus software), and other I/O path components.</p>
</li>
<li><p>TORN_PAGE_DETECTION</p>
<p>Saves a specific 2-bit pattern for each 512-byte sector in the 8-kilobyte (KB) database page and stored in the database page header when the page is written to disk. When the page is read from disk, the torn bits stored in the page header are compared to the actual page sector information.</p>
<p>Unmatched values indicate that only part of the page was written to disk. In this situation, error message 824 (indicating a torn page error) is reported to both the SQL Server error log and the Windows event log. Torn pages are typically detected by database recovery if it's truly an incomplete write of a page. However, other I/O path failures can cause a torn page at any time.</p>
</li>
<li><p>NONE</p>
<p>Database page writes don't generate a CHECKSUM or TORN_PAGE_DETECTION value. SQL Server doesn't verify a checksum or torn page during a read even if a CHECKSUM or TORN_PAGE_DETECTION value is present in the page header.</p>
</li>
</ul>
<p>Consider the following important points when you use the PAGE_VERIFY option:</p>
<ul>
<li><p>The default is <strong>CHECKSUM</strong>.</p>
</li>
<li><p>When a user or system database is upgraded to SQL Server 2005 (9.x) or a later version, the PAGE_VERIFY value (NONE or TORN_PAGE_DETECTION) isn't changed. We recommend that you change to CHECKSUM.</p>
<div class="NOTE">
<p>Note</p>
<p>In earlier versions of SQL Server, the PAGE_VERIFY database option is set to NONE for the <code>tempdb</code> database and can't be modified. Starting with SQL Server 2008 (10.0.x), the default value for the <code>tempdb</code> database is CHECKSUM for new installations of SQL Server. When upgrading an installation SQL Server, the default value remains NONE. The option can be modified. We recommend that you use CHECKSUM for the <code>tempdb</code> database.</p>
</div>
</li>
<li><p>TORN_PAGE_DETECTION might use fewer resources, but provides a minimal subset of the CHECKSUM protection.</p>
</li>
<li><p>PAGE_VERIFY can be set without taking the database offline, locking the database, or otherwise impeding concurrency on that database.</p>
</li>
<li><p>CHECKSUM is mutually exclusive to TORN_PAGE_DETECTION. Both options can't be enabled at the same time.</p>
</li>
</ul>
<p>When a torn page or checksum failure is detected, you can recover by restoring the data or potentially rebuilding the index if the failure is limited only to index pages. If you encounter a checksum failure, to determine the type of database page or pages affected, run DBCC CHECKDB. For more information about restore options, see <a href="restore-statements-arguments-transact-sql?view=sql-server-ver17" data-linktype="relative-path">RESTORE Arguments</a>. Although restoring the data resolves the data corruption problem, the root cause (for example, disk hardware failure) should be diagnosed and corrected as soon as possible to prevent continuing errors.</p>
<p>SQL Server retries any read that fails with a checksum, torn page, or other I/O error four times. If the read is successful in any one of the retry attempts, a message is written to the error log. The command that triggered the read continues. The command fails with error message 824 if the retry attempts fail.</p>
<p>For more information about error messages 823, 824 and 825, see:</p>
<ul>
<li><a href="../../relational-databases/errors-events/mssqlserver-823-database-engine-error?view=sql-server-ver17" data-linktype="relative-path">Troubleshoot MSSQLSERVER error 823</a></li>
<li><a href="../../relational-databases/errors-events/mssqlserver-824-database-engine-error?view=sql-server-ver17" data-linktype="relative-path">Troubleshoot MSSQLSERVER error 824</a></li>
<li><a href="../../relational-databases/errors-events/mssqlserver-825-database-engine-error?view=sql-server-ver17" data-linktype="relative-path">Troubleshoot MSSQLSERVER error 825 (read retry)</a>.</li>
</ul>
<p>The current setting of this option can be determined by examining the <code>page_verify_option</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>IsTornPageDetectionEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="remote_data_archive_option-">&lt;remote_data_archive_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2016 (13.x))</p>
<p>Enables or disables Stretch Database for the database. For more info, see <a href="/en-us/previous-versions/sql/sql-server/stretch-database/stretch-database" data-linktype="absolute-path">Stretch Database</a>.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>Stretch Database is deprecated in SQL Server 2022 (16.x) and Azure SQL Database. This feature will be removed in a future version of the Database Engine. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</p>
</div>
<h4 id="remote_data_archive---on--server--server_name--credential--db_scoped_credential_name--federated_service_account--on--off----off">REMOTE_DATA_ARCHIVE = { ON ( SERVER = &lt;server_name&gt;, { CREDENTIAL = &lt;db_scoped_credential_name&gt; | FEDERATED_SERVICE_ACCOUNT = ON | OFF } ) | OFF</h4>
<ul>
<li><p>ON</p>
<p>Enables Stretch Database for the database. For more info, including additional prerequisites, see <a href="/en-us/previous-versions/sql/sql-server/stretch-database/enable-stretch-database-for-a-database" data-linktype="absolute-path">Enable Stretch Database for a database</a>.</p>
<p>Requires <code>db_owner</code> permission to enable Stretch Database for a table. Requires <code>db_owner</code> and <code>CONTROL DATABASE</code> permissions to enable Stretch Database for a database.</p>
<ul>
<li><p>SERVER = &lt;server_name&gt;</p>
<p>Specifies the address of the Azure server. Include the <code>.database.windows.net</code> portion of the name. For example, <code>MyStretchDatabaseServer.database.windows.net</code>.</p>
</li>
<li><p>CREDENTIAL = &lt;db_scoped_credential_name&gt;</p>
<p>Specifies the database scoped credential that the instance of SQL Server uses to connect to the Azure server. Make sure the credential exists before you run this command. For more info, see <a href="create-database-scoped-credential-transact-sql?view=sql-server-ver17" data-linktype="relative-path">CREATE DATABASE SCOPED CREDENTIAL</a>.</p>
</li>
<li><p>FEDERATED_SERVICE_ACCOUNT = { ON | OFF }</p>
<p>You can use a federated service account for the on-premises SQL Server to communicate with the remote Azure server when the following conditions are all true.</p>
<ul>
<li>The service account under which the instance of SQL Server is running is a domain account.</li>
<li>The domain account belongs to a domain whose Active Directory is federated with Microsoft Entra ID.</li>
<li>The remote Azure server is configured to support Microsoft Entra authentication.</li>
<li>The service account under which the instance of SQL Server is running must be configured as a <code>dbmanager</code> or <code>sysadmin</code> account on the remote Azure server.</li>
</ul>
<p>If you specify that the federated service account is ON, you can't also specify the CREDENTIAL argument. Provide the CREDENTIAL argument if you specify OFF.</p>
</li>
</ul>
</li>
<li><p>OFF</p>
<p>Disables Stretch Database for the database. For more info, see <a href="/en-us/previous-versions/sql/sql-server/stretch-database/disable-stretch-database-and-bring-back-remote-data" data-linktype="absolute-path">Disable Stretch Database and bring back remote data</a>.</p>
<p>You can only disable Stretch Database for a database after the database no longer contains any tables that are enabled for Stretch Database. After you disable Stretch Database, data migration stops. Also, query results no longer include results from remote tables.</p>
<p>Disabling Stretch Database doesn't remove the remote database. To delete the remote database, drop it by using the Azure portal.</p>
</li>
</ul>
<h4 id="persistent_log_buffer">PERSISTENT_LOG_BUFFER</h4>
<p><strong>Applies to</strong>: SQL Server 2017 (14.x) and later.</p>
<p>When this option is specified, the transaction log buffer is created on a volume that is located on a disk device backed by Storage Class Memory (NVDIMM-N nonvolatile storage), also known as a persistent log buffer. For more information, see <a href="/en-us/archive/blogs/sqlserverstorageengine/transaction-commit-latency-acceleration-using-storage-class-memory-in-windows-server-2016sql-server-2016-sp1" data-linktype="absolute-path">Transaction Commit latency acceleration using Storage Class Memory</a> and <a href="../../relational-databases/databases/add-persisted-log-buffer?view=sql-server-ver17" data-linktype="relative-path">Add persistent log buffer to a database</a>.</p>
<h4 id="service_broker_option-">&lt;service_broker_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server</p>
<p>Controls the following Service Broker options: enables or disables message delivery, sets a new Service Broker identifier, or sets conversation priorities to ON or OFF.</p>
<h4 id="enable_broker">ENABLE_BROKER</h4>
<p>Specifies that Service Broker is enabled for the specified database. Message delivery is started, and the <code>is_broker_enabled</code> flag is set to true in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. The database keeps the existing Service Broker identifier. Service broker can't be enabled while the database is the principal in a database mirroring configuration.</p>
<div class="NOTE">
<p>Note</p>
<p>ENABLE_BROKER requires an exclusive database lock. If other sessions have locked resources in the database, ENABLE_BROKER waits until the other sessions release their locks. To enable Service Broker in a user database, ensure that no other sessions are using the database before you run the <code>ALTER DATABASE SET ENABLE_BROKER</code> statement, such as by putting the database in single user mode. To enable Service Broker in the <code>msdb</code> database, first stop SQL Server Agent so that Service Broker can obtain the necessary lock.</p>
</div>
<h4 id="disable_broker">DISABLE_BROKER</h4>
<p>Specifies that Service Broker is disabled for the specified database. Message delivery is stopped, and the <code>is_broker_enabled</code> flag is set to false in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. The database keeps the existing Service Broker identifier.</p>
<h4 id="new_broker">NEW_BROKER</h4>
<p>Specifies that the database should receive a new broker identifier. The database acts as a new service broker. As such, all existing conversations in the database are immediately removed without producing end dialog messages. Any route that references the old Service Broker identifier must be re-created with the new identifier.</p>
<h4 id="error_broker_conversations">ERROR_BROKER_CONVERSATIONS</h4>
<p>Specifies that Service Broker message delivery is enabled. This setting preserves the existing Service Broker identifier for the database. Service Broker ends all conversations in the database with an error. This setting enables applications to run regular cleanup for existing conversations.</p>
<h4 id="honor_broker_priority--on--off-">HONOR_BROKER_PRIORITY { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Send operations take into consideration the priority levels that are assigned to conversations. Messages from conversations that have high priority levels are sent before messages from conversations that are assigned low-priority levels.</p>
</li>
<li><p>OFF</p>
<p>Send operations run as if all conversations have the default priority level.</p>
</li>
</ul>
<p>Changes to the HONOR_BROKER_PRIORITY option take effect immediately for new dialogs or dialogs that have no messages waiting to be sent. Dialogs with messages to be sent when ALTER DATABASE is run don't pick up the new setting until some of the messages for the dialog are sent. The amount of time before all dialogs start using the new setting can vary considerably.</p>
<p>The current setting of this property is reported in the <code>is_broker_priority_honored</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="snapshot_option-">&lt;snapshot_option&gt; ::=</h4>
<p>Calculates the transaction isolation level.</p>
<h4 id="allow_snapshot_isolation--on--off-">ALLOW_SNAPSHOT_ISOLATION { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables Snapshot option at the database level. When it's enabled, DML statements start generating row versions even when no transaction uses Snapshot Isolation. Once this option is enabled, transactions can specify the SNAPSHOT transaction isolation level. When a transaction runs at the SNAPSHOT isolation level, all statements see a snapshot of data as it exists at the start of the transaction. If a transaction running at the SNAPSHOT isolation level accesses data in multiple databases, either ALLOW_SNAPSHOT_ISOLATION must be set to ON in all the databases, or each statement in the transaction must use locking hints on any reference in a FROM clause to a table in a database where ALLOW_SNAPSHOT_ISOLATION is OFF.</p>
</li>
<li><p>OFF</p>
<p>Turns off the Snapshot option at the database level. Transactions can't specify the SNAPSHOT transaction isolation level.</p>
</li>
</ul>
<p>When you set ALLOW_SNAPSHOT_ISOLATION to a new state (from ON to OFF, or from OFF to ON), ALTER DATABASE doesn't return control to the caller until all existing transactions in the database are committed. If the database is already in the state specified in the ALTER DATABASE statement, control is returned to the caller immediately. If the ALTER DATABASE statement doesn't return quickly, use <a href="../../relational-databases/system-dynamic-management-views/sys-dm-tran-active-snapshot-database-transactions-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_tran_active_snapshot_database_transactions</a> to determine whether there are long-running transactions. If the ALTER DATABASE statement is canceled, the database remains in the state it was in when ALTER DATABASE was started. The <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view indicates the state of snapshot-isolation transactions in the database. If <code>snapshot_isolation_state_desc</code> = IN_TRANSITION_TO_ON, the command <code>ALTER DATABASE ... ALLOW_SNAPSHOT_ISOLATION OFF</code> pauses six seconds and retries the operation.</p>
<p>You can't change the state of ALLOW_SNAPSHOT_ISOLATION if the database is OFFLINE.</p>
<p>If you set ALLOW_SNAPSHOT_ISOLATION in a READ_ONLY database, the setting is kept if the database is later set to READ_WRITE.</p>
<p>You can change the ALLOW_SNAPSHOT_ISOLATION settings for the <code>master</code>, <code>model</code>, <code>msdb</code>, and <code>tempdb</code> databases. The setting is kept every time the instance of the Database Engine is stopped and restarted if you change the setting for <code>tempdb</code>. If you change the setting for <code>model</code>, that setting becomes the default for any new databases that are created, except for <code>tempdb</code>.</p>
<p>The option is ON by default for the <code>master</code> and <code>msdb</code> databases.</p>
<p>The current setting of this option can be determined by examining the <code>snapshot_isolation_state</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="read_committed_snapshot--on--off-">READ_COMMITTED_SNAPSHOT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables Read-Committed Snapshot option at the database level. When it's enabled, DML statements start generating row versions even when no transaction uses Snapshot Isolation. Once this option is enabled, the transactions specifying the read committed isolation level use row versioning instead of locking. All statements see a snapshot of data as it exists at the start of the statement when a transaction runs at the READ COMMITTED isolation level.</p>
</li>
<li><p>OFF</p>
<p>Turns off Read-Committed Snapshot option at the database level. Transactions specifying the READ COMMITTED isolation level use locking.</p>
</li>
</ul>
<p>To set READ_COMMITTED_SNAPSHOT ON or OFF, there must be no active connections to the database except for the connection running the ALTER DATABASE command. However, the database doesn't have to be in single-user mode. You can't change the state of this option when the database is OFFLINE.</p>
<p>If you set READ_COMMITTED_SNAPSHOT in a READ_ONLY database, the setting is kept when the database is later set to READ_WRITE.</p>
<p>READ_COMMITTED_SNAPSHOT can't be turned ON for the <code>master</code>, <code>tempdb</code>, or <code>msdb</code> system databases. If you change the setting for <code>model</code>, that setting becomes the default for any new databases created, except for <code>tempdb</code>.</p>
<p>The current setting of this option can be determined by examining the <code>is_read_committed_snapshot_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<div class="WARNING">
<p>Warning</p>
<p>When a table is created with <strong>DURABILITY = SCHEMA_ONLY</strong>, and <strong>READ_COMMITTED_SNAPSHOT</strong> is subsequently changed using <strong>ALTER DATABASE</strong>, data in the table is lost.</p>
</div>
<h4 id="memory_optimized_elevate_to_snapshot--on--off-">MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT { ON | OFF }</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2014 (12.x))</p>
<ul>
<li><p>ON</p>
<p>When the transaction isolation level is set to any isolation level lower than SNAPSHOT, all interpreted Transact-SQL operations on memory-optimized tables are run under SNAPSHOT isolation. Examples of isolation levels lower than snapshot are READ COMMITTED or READ UNCOMMITTED. These operations run whether the transaction isolation level is set explicitly at the session level, or the default is used implicitly.</p>
</li>
<li><p>OFF</p>
<p>Doesn't elevate the transaction isolation level for interpreted Transact-SQL operations on memory-optimized tables.</p>
</li>
</ul>
<p>You can't change the state of MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT if the database is OFFLINE.</p>
<p>The default option is OFF.</p>
<p>The current setting of this option can be determined by examining the <code>is_memory_optimized_elevate_to_snapshot_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="sql_option-">&lt;sql_option&gt; ::=</h4>
<p>Controls the ANSI compliance options at the database level.</p>
<h4 id="ansi_null_default--on--off-">ANSI_NULL_DEFAULT { ON | OFF }</h4>
<p>Determines the default value, NULL or NOT NULL, of a column or <a href="../../relational-databases/clr-integration-database-objects-user-defined-types/clr-user-defined-types?view=sql-server-ver17" data-linktype="relative-path">CLR user-defined type</a> for which the nullability isn't explicitly defined in CREATE TABLE or ALTER TABLE statements. Columns that are defined with constraints follow constraint rules whatever this setting might be.</p>
<ul>
<li><p>ON</p>
<p>The default value for an undefined column is NULL.</p>
</li>
<li><p>OFF</p>
<p>The default value for an undefined column is NOT NULL.</p>
</li>
</ul>
<p>Connection-level settings that are set by using the SET statement override the default database-level setting for ANSI_NULL_DEFAULT. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_NULL_DEFAULT to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-null-dflt-on-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_NULL_DFLT_ON</a>.</p>
<p>For ANSI compatibility, setting the database option ANSI_NULL_DEFAULT to ON changes the database default to NULL.</p>
<p>You can determine this option's status by examining the <code>is_ansi_null_default_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiNullDefault</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_nulls--on--off-">ANSI_NULLS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>All comparisons to a null value evaluate to UNKNOWN.</p>
</li>
<li><p>OFF</p>
<p>Comparisons of non-Unicode values to a null value evaluate to TRUE if both values are NULL.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>In a future version of SQL Server, ANSI_NULLS will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for ANSI_NULLS. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_NULLS to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-nulls-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_NULLS</a>.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>SET ANSI_NULLS also must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine this option's status by examining the <code>is_ansi_nulls_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiNullsEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_padding--on--off-">ANSI_PADDING { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Strings are padded to the same length before conversion. Also padded to the same length before inserting to a <strong>varchar</strong> or <strong>nvarchar</strong> data type.</p>
</li>
<li><p>OFF</p>
<p>Inserts trailing blanks in character values into <strong>varchar</strong> or <strong>nvarchar</strong> columns. Also leaves trailing zeros in binary values that are inserted into <strong>varbinary</strong> columns. Values aren't padded to the length of the column.</p>
<p>When OFF is specified, this setting affects only the definition of new columns.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>In a future version of SQL Server, ANSI_PADDING will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature. We recommend that you always set ANSI_PADDING to ON. ANSI_PADDING must be ON when you create or manipulate indexes on computed columns or indexed views.</p>
</div>
<p><strong>char(<em>n</em>)</strong> and <strong>binary(<em>n</em>)</strong> columns that allow for nulls are padded to the column length when ANSI_PADDING is set to ON. Trailing blanks and zeros are trimmed when ANSI_PADDING is OFF. <strong>char(<em>n</em>)</strong> and <strong>binary(<em>n</em>)</strong> columns that don't allow nulls are always padded to the length of the column.</p>
<p>Connection-level settings that are set by using the SET statement override the default database-level setting for ANSI_PADDING. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_PADDING to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-padding-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_PADDING</a>.</p>
<p>You can determine this option's status by examining the <code>is_ansi_padding_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiPaddingEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_warnings--on--off-">ANSI_WARNINGS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Errors or warnings are issued when conditions such as divide-by-zero occur. Errors and warnings are also issued when null values appear in aggregate functions.</p>
</li>
<li><p>OFF</p>
<p>No warnings are raised and null values are returned when conditions such as divide-by-zero occur.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>SET ANSI_WARNINGS must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for ANSI_WARNINGS. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_WARNINGS to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-warnings-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_WARNINGS</a>.</p>
<p>You can determine this option's status by examining the <code>is_ansi_warnings_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiWarningsEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="arithabort--on--off-">ARITHABORT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>A query is ended when an overflow or divide-by-zero error occurs during query execution.</p>
</li>
<li><p>OFF</p>
<p>A warning message is displayed when one of these errors occurs. The query, batch, or transaction continues to process as if no error occurred even if a warning is displayed.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>SET ARITHABORT must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine this option's status by examining the <code>is_arithabort_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsArithmeticAbortEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="compatibility_level---170--160--150--140--130--120--110--100-">COMPATIBILITY_LEVEL = { 170 | 160 | 150 | 140 | 130 | 120 | 110 | 100 }</h4>
<p>For more information, see <a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a>.</p>
<h4 id="concat_null_yields_null--on--off-">CONCAT_NULL_YIELDS_NULL { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The result of a concatenation operation is NULL when either operand is NULL. For example, concatenating the character string "This is" and NULL returns the NULL value instead of the "This is" value.</p>
</li>
<li><p>OFF</p>
<p>The null value is treated as an empty character string.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>CONCAT_NULL_YIELDS_NULL must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
<p>In upcoming versions of SQL Server, CONCAT_NULL_YIELDS_NULL will always be ON, and any applications that explicitly set the option to OFF will trigger an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for CONCAT_NULL_YIELDS_NULL. By default, ODBC and OLE DB clients issue a connection-level SET statement setting CONCAT_NULL_YIELDS_NULL to ON for the session when connecting to an instance of SQL Server. For more information, see <a href="set-concat-null-yields-null-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET CONCAT_NULL_YIELDS_NULL</a>.</p>
<p>You can determine this option's status by examining the <code>is_concat_null_yields_null_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsNullConcat</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="numeric_roundabort--on--off-">NUMERIC_ROUNDABORT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>An error is generated when loss of precision occurs in an expression.</p>
</li>
<li><p>OFF</p>
<p>Loss of precision doesn't generate an error message, and the result is rounded to the precision of the column or variable storing the result.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>NUMERIC_ROUNDABORT must be set to OFF when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
</li>
</ul>
<p>You can determine the status of this option in the <code>is_numeric_roundabort_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsNumericRoundAbortEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="quoted_identifier--on--off-">QUOTED_IDENTIFIER { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Double quotation marks can be used to enclose delimited identifiers.</p>
<p>All strings delimited by double quotation marks are interpreted as object identifiers. Quoted identifiers don't have to follow the Transact-SQL rules for identifiers. They can be keywords and can include characters that aren't allowed in Transact-SQL identifiers. If a double quotation mark (<code>"</code>) is part of the identifier, it can be represented by two double quotation marks (<code>""</code>).</p>
</li>
<li><p>OFF</p>
<p>Identifiers can't be in quotation marks and must follow all Transact-SQL rules for identifiers. Literals can be delimited by either single or double quotation marks.</p>
</li>
</ul>
<p>SQL Server also allows for identifiers to be delimited by square brackets (<code>[</code> and <code>]</code>). Bracketed identifiers can always be used, whatever the QUOTED_IDENTIFIER setting is. For more information, see <a href="../../relational-databases/databases/database-identifiers?view=sql-server-ver17" data-linktype="relative-path">Database identifiers</a>.</p>
<p>When a table is created, the QUOTED IDENTIFIER option is always stored as ON in the metadata of the table. The option is stored even if the option is set to OFF when the table is created.</p>
<p>Connection-level settings that are set by using the SET statement override the default database setting for QUOTED_IDENTIFIER. ODBC and OLE DB clients issue a connection-level SET statement setting QUOTED_IDENTIFIER to ON, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-quoted-identifier-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET QUOTED_IDENTIFIER</a>.</p>
<p>You can determine this option's status by examining the <code>is_quoted_identifier_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsQuotedIdentifiersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="recursive_triggers--on--off-">RECURSIVE_TRIGGERS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Recursive firing of AFTER triggers is allowed.</p>
</li>
<li><p>OFF</p>
<p>You can determine this option's status by examining the <code>is_recursive_triggers_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsRecursiveTriggersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>Only direct recursion is prevented when RECURSIVE_TRIGGERS is set to OFF. To disable indirect recursion, you must also set the nested triggers server option to 0.</p>
</div>
<p>You can determine this option's status by examining the <code>is_recursive_triggers_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>IsRecursiveTriggersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="suspend_for_snapshot_backup-">&lt;suspend_for_snapshot_backup&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2022 (16.x))</p>
<p>Suspends databases for snapshot backup. Can define a group of one or more databases. Can designate copy only mode.</p>
<h4 id="set-suspend_for_snapshot_backup---on--off-">SET SUSPEND_FOR_SNAPSHOT_BACKUP = { ON | <strong>OFF</strong> }</h4>
<p>Suspends, or un-suspends databases. Default OFF.</p>
<h4 id="mode--copy_only">MODE = COPY_ONLY</h4>
<p>Optional. Uses COPY_ONLY mode.</p>
<h4 id="target_recovery_time_option-">&lt;target_recovery_time_option&gt; ::=</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2012 (11.x))</p>
<p>Specifies the frequency of indirect checkpoints on a per-database basis. Starting with SQL Server 2016 (13.x) the default value for new databases is <strong>1 minute</strong>, which indicates the database uses indirect checkpoints. For older versions the default is 0, which indicates that the database uses automatic checkpoints, whose frequency depends on the recovery interval setting of the server instance. Microsoft recommends 1 minute for most systems.</p>
<h4 id="target_recovery_time--target_recovery_time--seconds--minutes-">TARGET_RECOVERY_TIME = <em>target_recovery_time</em> { SECONDS | MINUTES }</h4>
<ul>
<li><p><em>target_recovery_time</em></p>
<p>Specifies the maximum bound on the time to recover the specified database in the event of a crash. <em>target_recovery_time</em> is type <strong>int</strong>.</p>
</li>
<li><p>SECONDS</p>
<p>Indicates that <em>target_recovery_time</em> is expressed as the number of seconds.</p>
</li>
<li><p>MINUTES</p>
<p>Indicates that <em>target_recovery_time</em> is expressed as the number of minutes.</p>
</li>
</ul>
<p>For more information about indirect checkpoints, see <a href="../../relational-databases/logs/database-checkpoints-sql-server?view=sql-server-ver17" data-linktype="relative-path">Database checkpoints</a>.</p>
<h4 id="optimized_locking--on--off-">OPTIMIZED_LOCKING { ON | OFF }</h4>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2025 (17.x))</p>
<p>Enables <a href="../../relational-databases/performance/optimized-locking?view=sql-server-ver17" data-linktype="relative-path">optimized locking</a>. Optimized locking is set to OFF by default.</p>
<p>To set OPTIMIZED_LOCKING ON or OFF, there must be no active connections to the database except for the connection running the ALTER DATABASE command. However, the database doesn't have to be in single-user mode. You can't change the state of this option unless the database is ONLINE.</p>
<h4 id="with-termination-">WITH &lt;termination&gt; ::=</h4>
<p>Specifies when to roll back incomplete transactions when the database is transitioned from one state to another. If the termination clause is omitted, the ALTER DATABASE statement waits indefinitely if there's any lock on the database. Only one termination clause can be specified, and it follows the SET clauses.</p>
<div class="NOTE">
<p>Note</p>
<p>Not all database options use the WITH &lt;termination&gt; clause. For more information, see the table under <a href="#SettingOptions" data-linktype="self-bookmark">Setting options</a> of the "Remarks" section of this article.</p>
</div>
<ul>
<li><p>ROLLBACK AFTER <em>integer</em> [SECONDS] | ROLLBACK IMMEDIATE</p>
<p>Specifies whether to roll back after the specified number of seconds or immediately.</p>
</li>
<li><p>NO_WAIT</p>
<p>Specifies that the request fails if the requested database state or option change can't complete immediately. Completing immediately means not waiting for transactions to commit or roll back on their own.</p>
</li>
</ul>
<h2 id="SettingOptions"> Set options</h2>
<p>To retrieve current settings for database options, use the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a></p>
<p>After you set a database option, the new setting takes effect immediately.</p>
<p>You can change the default values for any one of the database options for all newly created databases. To do so, change the appropriate database option in the <code>model</code> database.</p>
<p>Not all database options use the WITH &lt;termination&gt; clause or can be specified in combination with other options. The following table lists these options and their option and termination status.</p>
<table>
<thead>
<tr>
<th>Options category</th>
<th>Can be specified with other options</th>
<th>Can use the WITH &lt;termination&gt; clause</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;db_state_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;db_user_access_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;db_update_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;delayed_durability_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;external_access_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;cursor_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;auto_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;sql_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;recovery_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;target_recovery_time_option&gt;</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;database_mirroring_option&gt;</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>ALLOW_SNAPSHOT_ISOLATION</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>READ_COMMITTED_SNAPSHOT</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;service_broker_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>DATE_CORRELATION_OPTIMIZATION</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;parameterization_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;change_tracking_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;db_encryption_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;accelerated_database_recovery&gt;</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;optimized_locking&gt;</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The plan cache for the instance of SQL Server is cleared by setting one of the following options:</p>
<section class="row">
<div class="column">
<p>OFFLINE</p>
</div>
<div class="column">
<p>ONLINE</p>
</div>
<div class="column">
<p>MODIFY_NAME</p>
</div>
</section>
<section class="row">
<div class="column">
<p>COLLATE</p>
</div>
<div class="column">
<p>READ_ONLY</p>
</div>
<div class="column">
<p>READ_WRITE</p>
</div>
</section>
<section class="row">
<div class="column">
<p>MODIFY FILEGROUP DEFAULT</p>
</div>
<div class="column">
<p>MODIFY FILEGROUP READ_WRITE</p>
</div>
<div class="column">
<p>MODIFY FILEGROUP READ_ONLY</p>
</div>
</section>
<p>The plan cache is also flushed in the following scenarios.</p>
<ul>
<li>A database has the AUTO_CLOSE database option set to ON. When no user connection references or uses the database, the background task tries to close and shut down the database automatically.</li>
<li>You run several queries against a database that has default options. Then, the database is dropped.</li>
<li>A database snapshot for a source database is dropped.</li>
<li>You successfully rebuild the transaction log for a database.</li>
<li>You restore a database backup.</li>
<li>You detach a database.</li>
</ul>
<p>Clearing the plan cache causes a recompilation of all subsequent execution plans and can cause a sudden, temporary decrease in query performance. For each cleared cache store in the plan cache, the SQL Server error log contains the following informational message: <code>SQL Server has encountered %d occurrence(s) of cachestore flush for the '%s' cachestore (part of plan cache) due to some database maintenance or reconfigure operations</code>. This message is logged every five minutes as long as the cache is flushed within that time interval.</p>
<h2 id="examples">Examples</h2>
<h3 id="a-set-options-on-a-database">A. Set options on a database</h3>
<p>The following example sets the recovery model and data page verification options for the <code>AdventureWorks2025</code> sample database.</p>
<pre><code class="lang-sql">USE master;
GO
ALTER DATABASE [database_name]
SET RECOVERY FULL PAGE_VERIFY CHECKSUM;
GO
</code></pre>
<h3 id="b-set-the-database-to-read_only">B. Set the database to READ_ONLY</h3>
<p>Changing the state of a database or file group to READ_ONLY or READ_WRITE requires exclusive access to the database. The following example sets the database to <code>SINGLE_USER</code> mode to obtain exclusive access. The example then sets the state of the <code>AdventureWorks2025</code> database to <code>READ_ONLY</code> and returns access to the database to all users.</p>
<div class="NOTE">
<p>Note</p>
<p>This example uses the termination option <code>WITH ROLLBACK IMMEDIATE</code> in the first <code>ALTER DATABASE</code> statement. All incomplete transactions are rolled back, and any other connections to the <code>AdventureWorks2025</code> database are immediately disconnected.</p>
</div>
<pre><code class="lang-sql">USE master;
GO
ALTER DATABASE [database_name]
SET SINGLE_USER
WITH ROLLBACK IMMEDIATE;
GO
ALTER DATABASE [database_name]
SET READ_ONLY
GO
ALTER DATABASE [database_name]
SET MULTI_USER;
GO
</code></pre>
<h3 id="c-enable-snapshot-isolation-on-a-database">C. Enable snapshot isolation on a database</h3>
<p>The following example enables the snapshot isolation framework option for the <code>AdventureWorks2025</code> database.</p>
<pre><code class="lang-sql">USE [database_name];
USE master;
GO
ALTER DATABASE [database_name]
SET ALLOW_SNAPSHOT_ISOLATION ON;
GO
-- Check the state of the snapshot_isolation_framework
-- in the database.
SELECT name, snapshot_isolation_state,
    snapshot_isolation_state_desc AS description
FROM sys.databases
WHERE name = N'[database_name]';
GO
</code></pre>
<p>The result set shows that the snapshot isolation framework is enabled.</p>
<table>
<thead>
<tr>
<th>name</th>
<th>snapshot_isolation_state</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>[database_name]</td>
<td>1</td>
<td>ON</td>
</tr>
</tbody>
</table>
<h3 id="d-enable-modify-or-disable-change-tracking">D. Enable, modify, or disable change tracking</h3>
<p>The following example enables change tracking for the <code>AdventureWorks2025</code> database and sets the retention period to <code>2</code> days.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET CHANGE_TRACKING = ON
(AUTO_CLEANUP = ON, CHANGE_RETENTION = 2 DAYS);
</code></pre>
<p>The following example shows how to change the retention period to <code>3</code> days.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET CHANGE_TRACKING (CHANGE_RETENTION = 3 DAYS);
</code></pre>
<p>The following example shows how to disable change tracking for the <code>AdventureWorks2025</code> database.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET CHANGE_TRACKING = OFF;
</code></pre>
<h3 id="e-enable-the-query-store">E. Enable the Query Store</h3>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2016 (13.x))</p>
<p>The following example enables the Query Store and configures its parameters.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      QUERY_CAPTURE_MODE = AUTO,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60
    );
</code></pre>
<h3 id="f-enable-the-query-store-with-wait-statistics">F. Enable the Query Store with wait statistics</h3>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2017 (14.x))</p>
<p>The following example enables the Query Store and configures its parameters.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60,
      SIZE_BASED_CLEANUP_MODE = AUTO,
      MAX_PLANS_PER_QUERY = 200,
      WAIT_STATS_CAPTURE_MODE = ON,
    );
</code></pre>
<h3 id="g-enable-the-query-store-with-custom-capture-policy-options">G. Enable the Query Store with custom capture policy options</h3>
<p><strong>Applies to</strong>: SQL Server (Starting with SQL Server 2019 (15.x))</p>
<p>The following example enables the Query Store and configures its parameters.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60,
      SIZE_BASED_CLEANUP_MODE = AUTO,
      MAX_PLANS_PER_QUERY = 200,
      WAIT_STATS_CAPTURE_MODE = ON,
      QUERY_CAPTURE_MODE = CUSTOM,
      QUERY_CAPTURE_POLICY = (
        STALE_CAPTURE_POLICY_THRESHOLD = 24 HOURS,
        EXECUTION_COUNT = 30,
        TOTAL_COMPILE_CPU_TIME_MS = 1000,
        TOTAL_EXECUTION_CPU_TIME_MS = 100
      )
    );
</code></pre>
<h2 id="related-content">Related content</h2>
<ul>
<li><a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a></li>
<li><a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX (Transact-SQL)</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-data-spaces-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.data_spaces</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-database-automatic-tuning-options-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.database_automatic_tuning_options</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-database-automatic-tuning-mode-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.database_automatic_tuning_mode</a></li>
<li><a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a></li>
<li><a href="alter-database-transact-sql-database-mirroring?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE Database Mirroring</a></li>
<li><a href="alter-database-transact-sql-set-hadr?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE SET HADR</a></li>
<li><a href="create-database-transact-sql?view=sql-server-ver17" data-linktype="relative-path">CREATE DATABASE</a></li>
<li><a href="../../relational-databases/track-changes/enable-and-disable-change-tracking-sql-server?view=sql-server-ver17" data-linktype="relative-path">Enable and Disable Change Tracking (SQL Server)</a></li>
<li><a href="drop-database-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DROP DATABASE (Transact-SQL)</a></li>
<li><a href="set-transaction-isolation-level-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET TRANSACTION ISOLATION LEVEL (Transact-SQL)</a></li>
<li><a href="../../relational-databases/system-stored-procedures/sp-configure-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sp_configure</a></li>
<li><a href="../../relational-databases/performance/best-practice-with-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Best practices for monitoring workloads with Query Store</a></li>
</ul>
</div>
<div data-moniker="azuresqldb-current">
<section class="row">
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=sql-server-ver15&amp;preserve-view=true" data-linktype="relative-path">SQL Server</a></p>
</div>
<div class="column">
<p><em><strong>* SQL Database *</strong></em> &nbsp;</p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-mi-current&amp;preserve-view=true" data-linktype="relative-path">SQL Managed Instance</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azure-sqldw-latest&amp;preserve-view=true" data-linktype="relative-path">Azure Synapse<br>Analytics</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=fabric&amp;preserve-view=true" data-linktype="relative-path">Microsoft Fabric Data Warehouse</a></p>
</div>
</section>
<p>&nbsp;</p>
<h2 id="sql-database">SQL Database</h2>
<p>Compatibility levels are <code>SET</code> options but are described in <a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a>.</p>
<div class="NOTE">
<p>Note</p>
<p>Many database set options can be configured for the current session by using <a href="set-statements-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET Statements</a> and are often configured by applications when they connect. Session-level set options override the <code>ALTER DATABASE SET</code> values. The database options described in the following sections are values that can be set for sessions that don't explicitly provide other set option values.</p>
</div>
<h2 id="syntax-1">Syntax</h2>
<pre><code class="lang-syntaxsql">ALTER DATABASE { database_name | Current }
SET
{
    &lt;option_spec&gt; [ ,...n ] [ WITH &lt;termination&gt; ]
}
;

{ [ FOR SECONDARY ] SET &lt;set_options&gt; }

&lt;option_spec&gt; ::=
{
    &lt;auto_option&gt;
  | &lt;automatic_tuning_option&gt;
  | &lt;change_tracking_option&gt;
  | &lt;cursor_option&gt;
  | &lt;db_encryption_option&gt;
  | &lt;db_update_option&gt;
  | &lt;db_user_access_option&gt;
  | &lt;delayed_durability_option&gt;
  | &lt;parameterization_option&gt;
  | &lt;query_store_options&gt;
  | &lt;snapshot_option&gt;
  | &lt;sql_option&gt;
  | &lt;target_recovery_time_option&gt;
  | &lt;termination&gt;
  | &lt;temporal_history_retention&gt;
}
;

&lt;auto_option&gt; ::=
{
    AUTO_CREATE_STATISTICS { OFF | ON [ ( INCREMENTAL = { ON | OFF } ) ] }
  | AUTO_SHRINK { ON | OFF }
  | AUTO_UPDATE_STATISTICS { ON | OFF }
  | AUTO_UPDATE_STATISTICS_ASYNC { ON | OFF }
}

&lt;automatic_tuning_option&gt; ::=
{
    AUTOMATIC_TUNING = { AUTO | INHERIT | CUSTOM }
  | AUTOMATIC_TUNING ( CREATE_INDEX = { DEFAULT | ON | OFF } )
  | AUTOMATIC_TUNING ( DROP_INDEX = { DEFAULT | ON | OFF } )
  | AUTOMATIC_TUNING ( FORCE_LAST_GOOD_PLAN = { DEFAULT | ON | OFF } )
}

&lt;change_tracking_option&gt; ::=
{
    CHANGE_TRACKING
    {
        = OFF
      | = ON [ ( &lt;change_tracking_option_list &gt; [,...n] ) ]
      | ( &lt;change_tracking_option_list&gt; [,...n] )
    }
}

&lt;change_tracking_option_list&gt; ::=
   {
       AUTO_CLEANUP = { ON | OFF }
     | CHANGE_RETENTION = retention_period { DAYS | HOURS | MINUTES }
   }

&lt;cursor_option&gt; ::=
{
    CURSOR_CLOSE_ON_COMMIT { ON | OFF }
}

&lt;db_encryption_option&gt; ::=
  ENCRYPTION { ON | OFF }

&lt;db_update_option&gt; ::=
  { READ_ONLY | READ_WRITE }

&lt;db_user_access_option&gt; ::=
  { RESTRICTED_USER | MULTI_USER }

&lt;delayed_durability_option&gt; ::= DELAYED_DURABILITY = { DISABLED | ALLOWED | FORCED }

&lt;parameterization_option&gt; ::=
  PARAMETERIZATION { SIMPLE | FORCED }

&lt;query_store_options&gt; ::=
{
  QUERY_STORE
  {
      = OFF
    | = ON [ ( &lt;query_store_option_list&gt; [,... n] ) ]
    | ( &lt; query_store_option_list&gt; [,... n] )
    | CLEAR [ ALL ]
  }
}

&lt;query_store_option_list&gt; ::=
{
  OPERATION_MODE = { READ_WRITE | READ_ONLY }
  | CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = number )
  | DATA_FLUSH_INTERVAL_SECONDS = number
  | MAX_STORAGE_SIZE_MB = number
  | INTERVAL_LENGTH_MINUTES = number
  | SIZE_BASED_CLEANUP_MODE = { AUTO | OFF }
  | QUERY_CAPTURE_MODE = { ALL | AUTO | CUSTOM | NONE }
  | MAX_PLANS_PER_QUERY = number
  | WAIT_STATS_CAPTURE_MODE = { ON | OFF }
  | QUERY_CAPTURE_POLICY = ( &lt;query_capture_policy_option_list&gt; [,...n] )
}

&lt;query_capture_policy_option_list&gt; :: =
{
    STALE_CAPTURE_POLICY_THRESHOLD = number { DAYS | HOURS }
    | EXECUTION_COUNT = number
    | TOTAL_COMPILE_CPU_TIME_MS = number
    | TOTAL_EXECUTION_CPU_TIME_MS = number
}

&lt;snapshot_option&gt; ::=
{
    ALLOW_SNAPSHOT_ISOLATION { ON | OFF }
  | READ_COMMITTED_SNAPSHOT { ON | OFF }
  | MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT { ON | OFF }
}
&lt;sql_option&gt; ::=
{
    ANSI_NULL_DEFAULT { ON | OFF }
  | ANSI_NULLS { ON | OFF }
  | ANSI_PADDING { ON | OFF }
  | ANSI_WARNINGS { ON | OFF }
  | ARITHABORT { ON | OFF }
  | COMPATIBILITY_LEVEL = { 160 | 150 | 140 | 130 | 120 | 110 | 100 }
  | CONCAT_NULL_YIELDS_NULL { ON | OFF }
  | NUMERIC_ROUNDABORT { ON | OFF }
  | QUOTED_IDENTIFIER { ON | OFF }
  | RECURSIVE_TRIGGERS { ON | OFF }
}

&lt;termination&gt;::=
{
    ROLLBACK AFTER integer [ SECONDS ]
  | ROLLBACK IMMEDIATE
  | NO_WAIT
}

&lt;temporal_history_retention&gt;::=TEMPORAL_HISTORY_RETENTION { ON | OFF }
</code></pre>
<h2 id="arguments-1">Arguments</h2>
<h4 id="database_name-1"><em>database_name</em></h4>
<p>The name of the database to be modified.</p>
<ul>
<li><p>CURRENT</p>
<p><code>CURRENT</code> runs the action in the current database. <code>CURRENT</code> isn't supported for all options in all contexts. If <code>CURRENT</code> fails, provide the database name.</p>
</li>
</ul>
<h4 id="auto_option--1">&lt;auto_option&gt; ::=</h4>
<p>Controls automatic options.</p>
<h4 id="for-secondary-1">FOR SECONDARY</h4>
<p>Specifies the settings for secondary replicas. All secondary replicas must have the identical values. Similar to <code>FOR SECONDARY</code> for <a href="alter-database-scoped-configuration-transact-sql?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)</a>.</p>
<p>For use with the Query Store (<code>QUERY_STORE</code>) and Automatic Tuning (<code>AUTOMATIC_TUNING</code>) only.</p>
<p>Before SQL Server Management Studio (SSMS) version 21, the <code>FOR SECONDARY</code> syntax is valid but not recognized by IntelliSense.</p>
<h4 id="auto_create_statistics"> AUTO_CREATE_STATISTICS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Query Optimizer creates statistics on single columns in query predicates, as necessary, to improve query plans and query performance. These single-column statistics are created when Query Optimizer compiles queries. The single-column statistics are created only on columns that aren't already the first column of an existing statistics object.</p>
<p>The default is ON. We recommend that you use the default setting for most databases.</p>
</li>
<li><p>OFF</p>
<p>Query Optimizer doesn't create statistics on single columns in query predicates when it's compiling queries. Setting this option to OFF can cause suboptimal query plans and degraded query performance.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_create_stats_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoCreateStatistics</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>For more information, see the "Statistics options" section in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17#statistics-options" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="incremental--on--off-1">INCREMENTAL = ON | OFF</h4>
<p>Set AUTO_CREATE_STATISTICS to ON, and set INCREMENTAL to ON. This setting creates automatically created stats as incremental whenever incremental stats are supported. The default value is OFF. For more information, see <a href="create-statistics-transact-sql?view=sql-server-ver17" data-linktype="relative-path">CREATE STATISTICS</a>.</p>
<h4 id="auto_shrink"> AUTO_SHRINK { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The database files are candidates for periodic shrinking. Unless you have a specific requirement, don't set the AUTO_SHRINK database option to ON. For more information, see <a href="../../relational-databases/databases/shrink-a-database?view=sql-server-ver17" data-linktype="relative-path">Shrink a database</a>.</p>
</li>
</ul>
<p>Both data file and log files can be automatically shrunk. AUTO_SHRINK reduces the size of the transaction log only if you set the database to SIMPLE recovery model or if you back up the log. When set to OFF, the database files aren't automatically shrunk during periodic checks for unused space.</p>
<p>The AUTO_SHRINK option causes files to be shrunk when more than 25 percent of the file contains unused space. The option causes the file to shrink to one of two sizes. It shrinks to whichever is larger:</p>
<ul>
<li>The size where 25 percent of the file is unused space</li>
<li>The size of the file when it was created</li>
</ul>
<p>You can't shrink a read-only database.</p>
<ul>
<li><p>OFF</p>
<p>The database files aren't automatically shrunk during periodic checks for unused space.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_shrink_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoShrink</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<div class="NOTE">
<p>Note</p>
<p>The AUTO_SHRINK option isn't available in a contained database.</p>
</div>
<h4 id="auto_update_statistics"> AUTO_UPDATE_STATISTICS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Specifies that Query Optimizer updates statistics when they're used by a query and when they might be out-of-date. Statistics become out-of-date after insert, update, delete, or merge operations change the data distribution in the table or indexed view. Query Optimizer determines when statistics might be out-of-date by counting the number of data modifications since the last statistics update and comparing the number of modifications to a threshold. The threshold is based on the number of rows in the table or indexed view.</p>
<p>Query Optimizer checks for out-of-date statistics before it compiles a query and runs a cached query plan. Query Optimizer uses the columns, tables, and indexed views in the query predicate to determine which statistics might be out-of-date. Query Optimizer determines this information before it compiles a query. Before running a cached query plan, the Database Engine verifies that the query plan references up-to-date statistics.</p>
<p>The AUTO_UPDATE_STATISTICS option applies to statistics created for indexes, single-columns in query predicates, and statistics that are created by using the CREATE STATISTICS statement. This option also applies to filtered statistics.</p>
<p>The default is ON. We recommend that you use the default setting for most databases.</p>
<p>Use the AUTO_UPDATE_STATISTICS_ASYNC option to specify whether the statistics are updated synchronously or asynchronously.</p>
</li>
<li><p>OFF</p>
<p>Specifies that Query Optimizer doesn't update statistics when they're used by a query. Query Optimizer also doesn't update statistics when they might be out-of-date. Setting this option to OFF can cause suboptimal query plans and degraded query performance.</p>
<p>You can determine this option's status by examining the <code>is_auto_update_stats_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoUpdateStatistics</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>For more information, see the "Statistics options" section in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17#statistics-options" data-linktype="relative-path">Statistics</a>.</p>
</li>
</ul>
<h4 id="auto_update_statistics_async"> AUTO_UPDATE_STATISTICS_ASYNC { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Specifies that statistics updates for the AUTO_UPDATE_STATISTICS option are asynchronous. Query Optimizer doesn't wait for statistics updates to complete before it compiles queries.</p>
<p>Setting this option to ON has no effect unless AUTO_UPDATE_STATISTICS is set to ON.</p>
<p>By default, the AUTO_UPDATE_STATISTICS_ASYNC option is set to OFF, and Query Optimizer updates statistics synchronously.</p>
</li>
<li><p>OFF</p>
<p>Specifies that statistics updates for the AUTO_UPDATE_STATISTICS option are synchronous. Query Optimizer waits for statistics updates to complete before it compiles queries.</p>
<p>Setting this option to OFF has no effect unless AUTO_UPDATE_STATISTICS is set to ON.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_update_stats_async_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<p>For more information that describes when to use synchronous or asynchronous statistics updates, see the "Statistics options" section in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17#statistics-options" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="auto_tuning"> &lt;automatic_tuning_option&gt; ::=</h4>
<p>Controls automatic options for <a href="../../relational-databases/automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a>. You can view the options for the following settings in the Azure portal or via T-SQL in the view <code>sys.database_automatic_tuning_options</code>.</p>
<h4 id="automatic_tuning---auto--inherit--custom-">AUTOMATIC_TUNING = { AUTO | INHERIT | CUSTOM }</h4>
<ul>
<li><p>AUTO</p>
<p>Setting the Automatic tuning value to AUTO applies Azure configuration defaults for Automatic tuning. In the Azure portal, this reflects the option to "Inherit from: Azure defaults".</p>
</li>
<li><p>INHERIT</p>
<p>Using the INHERIT value inherits the default configuration from the parent server. In the Azure portal, this reflects the option to "Inherit from: Server". This is especially useful if you would like to customize Automatic tuning configuration on a parent server, and have all the databases on such server INHERIT these custom settings. In order for the inheritance to work, the three individual tuning options FORCE_LAST_GOOD_PLAN, CREATE_INDEX, and DROP_INDEX need to be set to DEFAULT on databases.</p>
</li>
<li><p>CUSTOM</p>
<p>Using the CUSTOM value, you need to custom-configure each of the Automatic Tuning options available on databases. In the Azure portal, this reflects the option to "Inherit from: Don't inherit".</p>
</li>
</ul>
<h4 id="create_index---default--on--off-">CREATE_INDEX = { DEFAULT | ON | OFF }</h4>
<p>Enables or disables automatic index management <code>CREATE_INDEX</code> option of <a href="../../relational-databases/automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a>. You can view the status for this option in the Azure portal or via T-SQL in the view <code>sys.database_automatic_tuning_options</code>.</p>
<ul>
<li><p>DEFAULT</p>
<p>Inherits default settings from the server. In this case, options of enabling or disabling individual Automatic tuning features are defined at the server level.</p>
</li>
<li><p>ON</p>
<p>When enabled, missing indexes are automatically generated on a database. Following the index creation, gains to the performance of the workload are verified. When such created index no longer provides benefits to the workload performance, it's automatically reverted. Indexes automatically created are flagged as a system generated indexed.</p>
</li>
<li><p>OFF</p>
<p>Doesn't automatically generate missing indexes on the database.</p>
</li>
</ul>
<h4 id="drop_index---default--on--off-">DROP_INDEX = { DEFAULT | ON | OFF }</h4>
<p>Enables or disables automatic index management <code>DROP_INDEX</code> option of <a href="../../relational-databases/automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a>. You can view the status for this option in the Azure portal or via T-SQL in the view <code>sys.database_automatic_tuning_options</code>.</p>
<ul>
<li><p>DEFAULT</p>
<p>Inherits default settings from the server. In this case, options of enabling or disabling individual Automatic tuning features are defined at the server level.</p>
</li>
<li><p>ON</p>
<p>Automatically drops duplicate or no longer useful indexes to the performance workload.</p>
</li>
<li><p>OFF</p>
<p>Doesn't automatically drop missing indexes on the database.</p>
</li>
</ul>
<h4 id="force_last_good_plan---default--on--off--1">FORCE_LAST_GOOD_PLAN = { DEFAULT | ON | OFF }</h4>
<p>Enables or disables automatic plan correction <code>FORCE_LAST_GOOD_PLAN</code> option of <a href="../../relational-databases/automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a>. You can view the status for this option in the Azure portal or via T-SQL in the view <code>sys.database_automatic_tuning_options</code>.</p>
<ul>
<li><p>DEFAULT</p>
<p>Inherits default settings from the server. In this case, options of enabling or disabling individual Automatic tuning features are defined at the server level. This is the default value. The default value for new Azure SQL servers is ON, meaning that by default, new databases inherit the setting of ON.</p>
</li>
<li><p>ON</p>
<p>The Database Engine automatically forces the last known good plan on the Transact-SQL queries where new query plan causes performance regressions. The Database Engine continuously monitors query performance of the Transact-SQL query with the forced plan. If there are performance gains, the Database Engine keeps using last known good plan. If performance gains aren't detected, the Database Engine produces a new query plan. The statement fails if the Query Store isn't enabled, or isn't in <em>Read-Write</em> mode.</p>
</li>
<li><p>OFF</p>
<p>The Database Engine reports potential query performance regressions caused by query plan changes in <a href="../../relational-databases/system-dynamic-management-views/sys-dm-db-tuning-recommendations-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_db_tuning_recommendations</a> view. However, these recommendations aren't automatically applied. Users can monitor active recommendations and fix identified problems by applying Transact-SQL scripts that are shown in the view.</p>
</li>
</ul>
<h4 id="change_tracking_option--1">&lt;change_tracking_option&gt; ::=</h4>
<p>Controls change tracking options. You can enable change tracking, set options, change options, and disable change tracking. For examples, see the <a href="#examples" data-linktype="self-bookmark">Examples</a> section later in this article.</p>
<ul>
<li><p>ON</p>
<p>Enables change tracking for the database. When you enable change tracking, you can also set the AUTO CLEANUP and CHANGE RETENTION options.</p>
<ul>
<li><p>AUTO_CLEANUP = { ON | OFF }</p>
<ul>
<li><p>ON</p>
<p>Change tracking information is automatically removed after the specified retention period.</p>
</li>
<li><p>OFF</p>
<p>Change tracking data isn't removed from the database.</p>
</li>
</ul>
</li>
<li><p>CHANGE_RETENTION = <em>retention_period</em> { DAYS | HOURS | MINUTES }</p>
<p>Specifies the minimum period for keeping change tracking information in the database. Data is removed only when the AUTO_CLEANUP value is ON.</p>
<p><em>retention_period</em> is an integer that specifies the numerical component of the retention period.</p>
<p>The default retention period is <strong>2 days</strong>. The minimum retention period is 1 minute. The default retention type is <strong>DAYS</strong>.</p>
</li>
</ul>
</li>
<li><p>OFF</p>
<p>Disables change tracking for the database. Disable change tracking on all tables before you disable change tracking off the database.</p>
</li>
</ul>
<h4 id="cursor_option--1">&lt;cursor_option&gt; ::=</h4>
<p>Controls cursor options.</p>
<h4 id="cursor_close_on_commit--on--off--1">CURSOR_CLOSE_ON_COMMIT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Any cursors open when you commit or roll back a transaction are closed.</p>
</li>
<li><p>OFF</p>
<p>Cursors remain open when a transaction is committed; rolling back a transaction closes any cursors except those cursors defined as INSENSITIVE or STATIC.</p>
</li>
</ul>
<p>Connection-level settings that are set by using the SET statement override the default database setting for CURSOR_CLOSE_ON_COMMIT. ODBC and OLE DB clients issue a connection-level SET statement setting CURSOR_CLOSE_ON_COMMIT to OFF for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-cursor-close-on-commit-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET CURSOR_CLOSE_ON_COMMIT</a>.</p>
<p>You can determine this option's status by examining the <code>is_cursor_close_on_commit_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>IsCloseCursorsOnCommitEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function. The cursor is implicitly deallocated only at disconnect. For more information, see <a href="../language-elements/declare-cursor-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DECLARE CURSOR</a>.</p>
<h4 id="db_encryption_option--1">&lt;db_encryption_option&gt; ::=</h4>
<p>Controls the database encryption state.</p>
<h4 id="encryption--on--off-">ENCRYPTION { ON | OFF }</h4>
<p>Sets the database to be encrypted (ON) or not encrypted (OFF). For more information about database encryption, see <a href="../../relational-databases/security/encryption/transparent-data-encryption?view=sql-server-ver17" data-linktype="relative-path">Transparent data encryption (TDE)</a>, and <a href="/en-us/azure/azure-sql/database/transparent-data-encryption-tde-overview" data-linktype="absolute-path">Transparent data encryption for Azure SQL Database, Azure SQL Managed Instance, and Azure Synapse Analytics</a>.</p>
<p>When encryption is enabled at the database level, all file groups are encrypted. Any new file groups inherit the encrypted property. If any file groups in the database are set to READ ONLY, the database encryption operation fails.</p>
<p>You can see the encryption state of the database by using the <a href="../../relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_database_encryption_keys</a> dynamic management view.</p>
<h4 id="db_update_option--1">&lt;db_update_option&gt; ::=</h4>
<p>Controls whether updates are allowed on the database.</p>
<ul>
<li><p>READ_ONLY</p>
<p>Users can read data from the database but not modify it.</p>
<div class="NOTE">
<p>Note</p>
<p>To improve query performance, update statistics before setting a database to READ_ONLY. If additional statistics are needed after a database is set to READ_ONLY, the Database Engine creates statistics in <code>tempdb</code>. For more information about statistics for a read-only database, see <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a>.</p>
</div>
</li>
<li><p>READ_WRITE</p>
<p>The database is available for read and write operations.</p>
</li>
</ul>
<p>To change this state, you must have exclusive access to the database. For more information, see the SINGLE_USER clause.</p>
<div class="NOTE">
<p>Note</p>
<p>On Azure SQL Database federated databases, <code>SET { READ_ONLY | READ_WRITE }</code> is disabled.</p>
</div>
<h4 id="db_user_access_option--1">&lt;db_user_access_option&gt; ::=</h4>
<p>Controls user access to the database.</p>
<ul>
<li><p>RESTRICTED_USER</p>
<p>Allows for only members of the <code>db_owner</code> fixed database role and <code>dbcreator</code> and <code>sysadmin</code> fixed server roles to connect to the database, but doesn't limit their number. All connections to the database are disconnected in the timeframe specified by the termination clause of the ALTER DATABASE statement. After the database has transitioned to the RESTRICTED_USER state, connection attempts by unqualified users are refused. In Azure SQL Database, should be executed from within the user database. From the <code>master</code> database, you might encounter an error message <code>Msg 42008, Level 16, State 3, Line 1 ODBC error: State: 28000: Error: 18456 Message:'[Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Login failed for user '##MS_InstanceCertificate##'.'.</code></p>
</li>
<li><p>MULTI_USER</p>
<p>All users that have the appropriate permissions to connect to the database are allowed. You can determine this option's status by examining the <code>user_access</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>UserAccess</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function. In Azure SQL Database, should be executed from within the user database. From the <code>master</code> database, you might encounter an error message <code>Msg 42008, Level 16, State 3, Line 1 ODBC error: State: 28000: Error: 18456 Message:'[Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Login failed for user '##MS_InstanceCertificate##'.'.</code></p>
</li>
</ul>
<h4 id="delayed_durability_option--1">&lt;delayed_durability_option&gt; ::=</h4>
<p>Controls whether transactions commit fully durable or delayed durable.</p>
<ul>
<li><p>DISABLED</p>
<p>All transactions following <code>SET DISABLED</code> are fully durable. Any durability options set in an atomic block or commit statement are ignored.</p>
</li>
<li><p>ALLOWED</p>
<p>All transactions following <code>SET ALLOWED</code> are either fully durable or delayed durable, depending upon the durability option set in the atomic block or commit statement.</p>
</li>
<li><p>FORCED</p>
<p>All transactions following <code>SET FORCED</code> are delayed durable. Any durability options set in an atomic block or commit statement are ignored.</p>
</li>
</ul>
<h4 id="parameterization_option--1">&lt;PARAMETERIZATION_option&gt; ::=</h4>
<p>Controls the parameterization option.</p>
<h4 id="parameterization--simple--forced--1">PARAMETERIZATION { SIMPLE | FORCED }</h4>
<ul>
<li><p>SIMPLE</p>
<p>Queries are parameterized based on the default behavior of the database.</p>
</li>
<li><p>FORCED</p>
<p>SQL Server parameterizes all queries in the database.</p>
</li>
</ul>
<p>The current setting of this option can be determined by examining the <code>is_parameterization_forced</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="query-store"> &lt;query_store_options&gt; ::=</h4>
<ul>
<li><p>ON | OFF | CLEAR [ ALL ]</p>
<p>Controls whether the Query Store is enabled in this database, and also controls removing the contents of the Query Store.</p>
<ul>
<li><p>ON</p>
<p>Enables the Query Store. ON is the default value.</p>
</li>
<li><p>OFF</p>
<p>Disables the Query Store.</p>
<div class="NOTE">
<p>Note</p>
<p>Query Store cannot be disabled in Azure SQL Database single database and Elastic Pool. Executing <code>ALTER DATABASE [database] SET QUERY_STORE = OFF</code> returns the warning <code>'QUERY_STORE=OFF' is not supported in this version of SQL Server.</code>.</p>
</div>
</li>
<li><p>CLEAR</p>
<p>Remove the contents of the Query Store.</p>
</li>
</ul>
</li>
</ul>
<h4 id="operation_mode">OPERATION_MODE</h4>
<p>Describes the operation mode of the Query Store. Valid values are READ_ONLY and READ_WRITE. In READ_WRITE mode, the Query Store collects and persists query plan and runtime execution statistics information. In READ_ONLY mode, information can be read from the Query Store, but new information isn't added. If the maximum allocated space of the Query Store has been exhausted, the Query Store changes its operation mode to READ_ONLY.</p>
<h4 id="cleanup_policy-1">CLEANUP_POLICY</h4>
<p>Describes the data retention policy of the Query Store. STALE_QUERY_THRESHOLD_DAYS determines the number of days for which the information for a query is kept in the Query Store. STALE_QUERY_THRESHOLD_DAYS is type <strong>bigint</strong>. The default value is 30. For SQL Database Basic edition, default is <strong>7</strong> days.</p>
<h4 id="data_flush_interval_seconds-1">DATA_FLUSH_INTERVAL_SECONDS</h4>
<p>Determines the frequency at which data written to the Query Store is persisted to disk. To optimize for performance, data collected by the Query Store is asynchronously written to the disk. The frequency at which this asynchronous transfer occurs is configured by using the DATA_FLUSH_INTERVAL_SECONDS argument. DATA_FLUSH_INTERVAL_SECONDS is type <strong>bigint</strong>. The default value is <strong>900</strong> (15 min).</p>
<h4 id="max_storage_size_mb-1">MAX_STORAGE_SIZE_MB</h4>
<p>Determines the space allocated to the Query Store. MAX_STORAGE_SIZE_MB is type <strong>bigint</strong>.</p>
<div class="NOTE">
<p>Note</p>
<p>In Azure SQL Database, the default <code>MAX_STORAGE_SIZE_MB</code> value differs by service tier, as follows: Premium, Business Critical, and Hyperscale: <strong>1,024 MB</strong>; Standard and General Purpose: <strong>100 MB</strong>; Basic: <strong>10 MB</strong> The maximum allowed <code>MAX_STORAGE_SIZE_MB</code> value is <strong>10,240 MB</strong>.</p>
</div>
<div class="NOTE">
<p>Note</p>
<p><code>MAX_STORAGE_SIZE_MB</code> limit isn't strictly enforced. Storage size is checked only when Query Store writes data to disk. This interval is set by the <code>DATA_FLUSH_INTERVAL_SECONDS</code> option or the Management Studio Query Store dialog option <strong>Data Flush Interval</strong>. The interval default value is 900 seconds (or 15 minutes).
If the Query Store has breached the <code>MAX_STORAGE_SIZE_MB</code> limit between storage size checks, it transitions to read-only mode. If <code>SIZE_BASED_CLEANUP_MODE</code> is enabled, the cleanup mechanism to enforce the <code>MAX_STORAGE_SIZE_MB</code> limit is also triggered.
Once enough space has been cleared, the Query Store mode automatically switches back to read-write.</p>
</div>
<div class="IMPORTANT">
<p>Important</p>
<p>If you think that your workload capture needs more than 10 GB of disk space, you should probably rethink and optimize your workload to reuse query plans (for example using <a href="../../relational-databases/query-processing-architecture-guide?view=sql-server-ver17#forced-parameterization" data-linktype="relative-path">forced parameterization</a>, or adjust the Query Store configurations.
Starting with SQL Server 2019 (15.x) and in Azure SQL Database, you can set <code>QUERY_CAPTURE_MODE</code> to CUSTOM for additional control over the query capture policy.</p>
</div>
<h4 id="interval_length_minutes-1">INTERVAL_LENGTH_MINUTES</h4>
<p>Determines the time interval at which runtime execution statistics data is aggregated into the Query Store. To optimize for space usage, the runtime execution statistics in the runtime stats store are aggregated over a fixed time window. This fixed time window is configured by using the INTERVAL_LENGTH_MINUTES argument. INTERVAL_LENGTH_MINUTES is type <strong>bigint</strong>. The default value is <strong>60</strong>.</p>
<h4 id="size_based_cleanup_mode---auto--off-">SIZE_BASED_CLEANUP_MODE = { AUTO | OFF }</h4>
<p>Controls whether cleanup is automatically activated when the total amount of data gets close to maximum size.</p>
<ul>
<li><p>OFF</p>
<p>Size-based cleanup isn't automatically activated.</p>
</li>
<li><p>AUTO</p>
<p>Size-based cleanup is automatically activated when size on disk reaches 90% of <strong>max_storage_size_mb</strong>. Size-based cleanup removes the least expensive and oldest queries first. It stops at approximately 80% of <strong>max_storage_size_mb</strong>. This is the default configuration value.</p>
</li>
</ul>
<p>SIZE_BASED_CLEANUP_MODE is type <strong>nvarchar</strong>.</p>
<h4 id="query_capture_mode--all--auto--custom--none--1">QUERY_CAPTURE_MODE { ALL | AUTO | CUSTOM | NONE }</h4>
<p>Designates the currently active query capture mode. Each mode defines specific query capture policies.</p>
<div class="NOTE">
<p>Note</p>
<p>Cursors, queries inside Stored Procedures, and Natively compiled queries are always captured when the query capture mode is set to ALL, AUTO, or CUSTOM.</p>
</div>
<ul>
<li><p>ALL</p>
<p>Captures all queries.</p>
</li>
<li><p>AUTO</p>
<p>Capture relevant queries based on execution count and resource consumption. This is the default configuration value for Azure SQL Database.</p>
</li>
<li><p>NONE</p>
<p>Stop capturing new queries. The Query Store continues to collect compile and runtime statistics for queries that were captured already. Use this configuration with caution since you might miss capturing important queries.</p>
</li>
<li><p>CUSTOM</p>
<p>Allows control over the QUERY_CAPTURE_POLICY options.</p>
</li>
</ul>
<p>QUERY_CAPTURE_MODE is type <strong>nvarchar</strong>.</p>
<h4 id="max_plans_per_query-1">MAX_PLANS_PER_QUERY</h4>
<p>Defines the maximum number of plans maintained for each query. MAX_PLANS_PER_QUERY is type <strong>int</strong>. The default value is <strong>200</strong>.</p>
<h4 id="wait_stats_capture_mode--on--off--1">WAIT_STATS_CAPTURE_MODE { ON | OFF }</h4>
<p>Controls whether wait statistics are captured per query.</p>
<ul>
<li><p>ON</p>
<p>Wait statistics information per query is captured. This value is the default configuration value.</p>
</li>
<li><p>OFF</p>
<p>Wait statistics information per query aren't captured.</p>
</li>
</ul>
<h4 id="query_capture_policy_option_list---1">&lt;query_capture_policy_option_list&gt; :: =</h4>
<p>Controls the Query Store capture policy options. Except for STALE_CAPTURE_POLICY_THRESHOLD, these options define the OR conditions that need to happen for queries to be captured in the defined Stale Capture Policy Threshold value.</p>
<h4 id="stale_capture_policy_threshold--integer--days--hours-">STALE_CAPTURE_POLICY_THRESHOLD = <em>integer</em> { DAYS | HOURS }</h4>
<p>Defines the evaluation interval period to determine if a query should be captured. The default is 1 day, and it can be set from 1 hour to seven days. <em>number</em> is type <strong>int</strong>.</p>
<h4 id="execution_count--integer">EXECUTION_COUNT = <em>integer</em></h4>
<p>Defines the number of times a query is executed over the evaluation period. The default is 30, which means that for the default Stale Capture Policy Threshold, a query must execute at least 30 times in one day to be persisted in the Query Store. EXECUTION_COUNT is type <strong>int</strong>.</p>
<h4 id="total_compile_cpu_time_ms--integer">TOTAL_COMPILE_CPU_TIME_MS = <em>integer</em></h4>
<p>Defines total elapsed compile CPU time used by a query over the evaluation period. The default is 1000, which means that for the default Stale Capture Policy Threshold, a query must have a total of at least one second of CPU time spent during query compilation in one day to be persisted in the Query Store. TOTAL_COMPILE_CPU_TIME_MS is type <strong>int</strong>.</p>
<h4 id="total_execution_cpu_time_ms--integer">TOTAL_EXECUTION_CPU_TIME_MS = <em>integer</em></h4>
<p>Defines total elapsed execution CPU time used by a query over the evaluation period. The default is 100 which means that for the default Stale Capture Policy Threshold, a query must have a total of at least 100 ms of CPU time spent during execution in one day to be persisted in the Query Store. TOTAL_EXECUTION_CPU_TIME_MS is type <strong>int</strong>.</p>
<h4 id="snapshot_option--1">&lt;snapshot_option&gt; ::=</h4>
<p>Determines the transaction isolation level.</p>
<h4 id="allow_snapshot_isolation--on--off--1">ALLOW_SNAPSHOT_ISOLATION { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables Snapshot option at the database level. When it's enabled, DML statements start generating row versions even when no transaction uses Snapshot Isolation. Once this option is enabled, transactions can specify the SNAPSHOT transaction isolation level. When a transaction runs at the SNAPSHOT isolation level, all statements see a snapshot of data as it exists at the start of the transaction. If a transaction running at the SNAPSHOT isolation level accesses data in multiple databases, either ALLOW_SNAPSHOT_ISOLATION must be set to ON in all the databases, or each statement in the transaction must use locking hints on any reference in a FROM clause to a table in a database where ALLOW_SNAPSHOT_ISOLATION is OFF.</p>
</li>
<li><p>OFF</p>
<p>Turns off the Snapshot option at the database level. Transactions can't specify the SNAPSHOT transaction isolation level.</p>
</li>
</ul>
<p>When you set ALLOW_SNAPSHOT_ISOLATION to a new state (from ON to OFF, or from OFF to ON), ALTER DATABASE doesn't return control to the caller until all existing transactions in the database are committed. If the database is already in the state specified in the ALTER DATABASE statement, control is returned to the caller immediately. If the ALTER DATABASE statement doesn't return quickly, use <a href="../../relational-databases/system-dynamic-management-views/sys-dm-tran-active-snapshot-database-transactions-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_tran_active_snapshot_database_transactions</a> to determine whether there are long-running transactions. If the ALTER DATABASE statement is canceled, the database remains in the state it was in when ALTER DATABASE was started. The <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view indicates the state of snapshot-isolation transactions in the database. If <code>snapshot_isolation_state_desc = IN_TRANSITION_TO_ON</code>, the statement <code>ALTER DATABASE .... ALLOW_SNAPSHOT_ISOLATION OFF</code> pauses six seconds and retries the operation.</p>
<p>You can't change the state of ALLOW_SNAPSHOT_ISOLATION if the database is OFFLINE.</p>
<p>If you set ALLOW_SNAPSHOT_ISOLATION in a READ_ONLY database, the setting is kept if the database is later set to READ_WRITE.</p>
<p>The current setting of this option can be determined by examining the <code>snapshot_isolation_state</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="read_committed_snapshot--on--off--1">READ_COMMITTED_SNAPSHOT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables Read-Committed Snapshot option at the database level. When it's enabled, DML statements start generating row versions even when no transaction uses Snapshot Isolation. Once this option is enabled, the transactions specifying the READ COMMITTED isolation level use row versioning instead of locking. All statements see a snapshot of data as it exists at the start of the statement when a transaction runs at the READ COMMITTED isolation level.</p>
</li>
<li><p>OFF</p>
<p>Turns off Read-Committed Snapshot option at the database level. Transactions specifying the READ COMMITTED isolation level use locking.</p>
</li>
</ul>
<p>To set READ_COMMITTED_SNAPSHOT ON or OFF, there must be no active connections to the database except for the connection running the ALTER DATABASE command. However, the database doesn't have to be in single-user mode. You can't change the state of this option when the database is OFFLINE.</p>
<p>If you set READ_COMMITTED_SNAPSHOT in a READ_ONLY database, the setting is kept when the database is later set to READ_WRITE.</p>
<p>READ_COMMITTED_SNAPSHOT can't be turned ON for the <code>master</code>, <code>tempdb</code>, or <code>msdb</code> system databases. If you change the setting for <code>model</code>, that setting becomes the default for any new databases created, except for <code>tempdb</code>.</p>
<p>The current setting of this option can be determined by examining the <code>is_read_committed_snapshot_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<div class="WARNING">
<p>Warning</p>
<p>When a table is created with <code>DURABILITY = SCHEMA_ONLY</code>, and <strong>READ_COMMITTED_SNAPSHOT</strong> is subsequently changed using <code>ALTER DATABASE</code>, data in the table is lost.</p>
</div>
<div class="TIP">
<p>Tip</p>
<p>In Azure SQL Database, the <code>ALTER DATABASE</code> command to set READ_COMMITTED_SNAPSHOT ON or OFF for a database must be executed in the <code>master</code> database.</p>
</div>
<h4 id="memory_optimized_elevate_to_snapshot--on--off--1">MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>When the transaction isolation level is set to any isolation level lower than SNAPSHOT, all interpreted Transact-SQL operations on memory-optimized tables are run under SNAPSHOT isolation. Examples of isolation levels lower than snapshot are READ COMMITTED or READ UNCOMMITTED. These operations run whether the transaction isolation level is set explicitly at the session level, or the default is used implicitly.</p>
</li>
<li><p>OFF</p>
<p>Doesn't elevate the transaction isolation level for interpreted Transact-SQL operations on memory-optimized tables.</p>
</li>
</ul>
<p>You can't change the state of MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT if the database is OFFLINE.</p>
<p>The default value is OFF.</p>
<p>The current setting of this option can be determined by examining the <code>is_memory_optimized_elevate_to_snapshot_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="sql_option--1">&lt;sql_option&gt; ::=</h4>
<p>Controls the ANSI compliance options at the database level.</p>
<h4 id="ansi_null_default--on--off--1">ANSI_NULL_DEFAULT { ON | OFF }</h4>
<p>Determines the default value, NULL or NOT NULL, of a column or <a href="../../relational-databases/clr-integration-database-objects-user-defined-types/clr-user-defined-types?view=sql-server-ver17" data-linktype="relative-path">CLR user-defined type</a> for which the nullability isn't explicitly defined in CREATE TABLE or ALTER TABLE statements. Columns that are defined with constraints follow constraint rules whatever this setting might be.</p>
<ul>
<li><p>ON</p>
<p>The default value is NULL.</p>
</li>
<li><p>OFF</p>
<p>The default value is NOT NULL.</p>
</li>
</ul>
<p>Connection-level settings that are set by using the SET statement override the default database-level setting for ANSI_NULL_DEFAULT. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_NULL_DEFAULT to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-null-dflt-on-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_NULL_DFLT_ON</a>.</p>
<p>For ANSI compatibility, setting the database option ANSI_NULL_DEFAULT to ON changes the database default to NULL.</p>
<p>You can determine this option's status by examining the <code>is_ansi_null_default_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiNullDefault</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_nulls--on--off--1">ANSI_NULLS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>All comparisons to a null value evaluate to UNKNOWN.</p>
</li>
<li><p>OFF</p>
<p>Comparisons of non-Unicode values to a null value evaluate to TRUE if both values are NULL.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>In a future version of SQL Server, ANSI_NULLS will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for ANSI_NULLS. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_NULLS to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-nulls-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_NULLS</a>.</p>
<div class="NOTE">
<p>Note</p>
<p>SET ANSI_NULLS also must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine this option's status by examining the <code>is_ansi_nulls_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiNullsEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_padding--on--off--1">ANSI_PADDING { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Strings are padded to the same length before conversion. Also padded to the same length before inserting to a <strong>varchar</strong> or <strong>nvarchar</strong> data type.</p>
</li>
<li><p>OFF</p>
<p>Inserts trailing blanks in character values into <strong>varchar</strong> or <strong>nvarchar</strong> columns. Also leaves trailing zeros in binary values that are inserted into <strong>varbinary</strong> columns. Values aren't padded to the length of the column.</p>
<p>When OFF is specified, this setting affects only the definition of new columns.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>In a future version of SQL Server, ANSI_PADDING will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature. We recommend that you always set ANSI_PADDING to ON. ANSI_PADDING must be ON when you create or manipulate indexes on computed columns or indexed views.</p>
</div>
<p><strong>char(<em>n</em>)</strong> and <strong>binary(<em>n</em>)</strong> columns that allow for nulls are padded to the column length when ANSI_PADDING is set to ON. Trailing blanks and zeros are trimmed when ANSI_PADDING is OFF. <strong>char(<em>n</em>)</strong> and <strong>binary(<em>n</em>)</strong> columns that don't allow nulls are always padded to the length of the column.</p>
<p>Connection-level settings that are set by using the SET statement override the default database-level setting for ANSI_PADDING. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_PADDING to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-padding-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_PADDING</a>.</p>
<p>You can determine this option's status by examining the <code>is_ansi_padding_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiPaddingEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_warnings--on--off--1">ANSI_WARNINGS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Errors or warnings are issued when conditions such as divide-by-zero occur. Errors and warnings are also issued when null values appear in aggregate functions.</p>
</li>
<li><p>OFF</p>
<p>No warnings are raised and null values are returned when conditions such as divide-by-zero occur.</p>
</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>SET ANSI_WARNINGS must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for ANSI_WARNINGS. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_WARNINGS to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-warnings-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_WARNINGS</a>.</p>
<p>You can determine this option's status by examining the <code>is_ansi_warnings_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiWarningsEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="arithabort--on--off--1">ARITHABORT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>A query is ended when an overflow or divide-by-zero error occurs during query execution.</p>
</li>
<li><p>OFF</p>
<p>A warning message is displayed when one of these errors occurs. The query, batch, or transaction continues to process as if no error occurred even if a warning is displayed.</p>
</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>SET ARITHABORT must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine this option's status by examining the <code>is_arithabort_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsArithmeticAbortEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="compatibility_level---170--160--150--140--130--120--110--100--1">COMPATIBILITY_LEVEL = { 170 | 160 | 150 | 140 | 130 | 120 | 110 | 100 }</h4>
<p>For more information, see <a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a>.</p>
<h4 id="concat_null_yields_null--on--off--1">CONCAT_NULL_YIELDS_NULL { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The result of a concatenation operation is NULL when either operand is NULL. For example, concatenating the character string "This is" and NULL causes the value NULL, instead of the value "This is".</p>
</li>
<li><p>OFF</p>
<p>The null value is treated as an empty character string.</p>
</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>CONCAT_NULL_YIELDS_NULL must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
<p>In a future version of SQL Server, CONCAT_NULL_YIELDS_NULL will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for CONCAT_NULL_YIELDS_NULL. By default, ODBC and OLE DB clients issue a connection-level SET statement setting CONCAT_NULL_YIELDS_NULL to ON for the session when connecting to an instance of SQL Server. For more information, see <a href="set-concat-null-yields-null-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET CONCAT_NULL_YIELDS_NULL</a>.</p>
<p>You can determine this option's status by examining the <code>is_concat_null_yields_null_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsNullConcat</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="numeric_roundabort--on--off--1">NUMERIC_ROUNDABORT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>An error is generated when loss of precision occurs in an expression.</p>
</li>
<li><p>OFF</p>
<p>Loss of precision doesn't generate an error message, and the result is rounded to the precision of the column or variable storing the result.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>NUMERIC_ROUNDABORT must be set to OFF when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine the status for this option in the <code>is_numeric_roundabort_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsNumericRoundAbortEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="quoted_identifier--on--off--1">QUOTED_IDENTIFIER { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Double quotation marks can be used to enclose delimited identifiers.</p>
<p>All strings delimited by double quotation marks are interpreted as object identifiers. Quoted identifiers don't have to follow the Transact-SQL rules for identifiers. They can be keywords and can include characters that aren't allowed in Transact-SQL identifiers. If a double quotation mark (<code>"</code>) is part of the identifier, it can be represented by two double quotation marks (<code>""</code>).</p>
</li>
<li><p>OFF</p>
<p>Identifiers can't be in quotation marks and must follow all Transact-SQL rules for identifiers. Literals can be delimited by either single or double quotation marks.</p>
</li>
</ul>
<p>SQL Server also allows for identifiers to be delimited by square brackets (<code>[</code> and <code>]</code>). Bracketed identifiers can always be used, whatever the QUOTED_IDENTIFIER setting is. For more information, see <a href="../../relational-databases/databases/database-identifiers?view=sql-server-ver17" data-linktype="relative-path">Database identifiers</a>.</p>
<p>When a table is created, the QUOTED IDENTIFIER option is always stored as ON in the metadata of the table. The option is stored even if the option is set to OFF when the table is created.</p>
<p>Connection-level settings that are set by using the SET statement override the default database setting for QUOTED_IDENTIFIER. ODBC and OLE DB clients issue a connection-level SET statement setting QUOTED_IDENTIFIER to ON, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-quoted-identifier-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET QUOTED_IDENTIFIER</a>.</p>
<p>You can determine this option's status by examining the <code>is_quoted_identifier_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsQuotedIdentifiersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="recursive_triggers--on--off--1">RECURSIVE_TRIGGERS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Recursive firing of AFTER triggers is allowed.</p>
</li>
<li><p>OFF</p>
<p>You can determine this option's status by examining the <code>is_recursive_triggers_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsRecursiveTriggersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>Only direct recursion is prevented when RECURSIVE_TRIGGERS is set to OFF. To disable indirect recursion, you must also set the nested triggers server option to 0.</p>
</div>
<p>You can determine this option's status by examining the <code>is_recursive_triggers_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>IsRecursiveTriggersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="target_recovery_time_option--1">&lt;target_recovery_time_option&gt; ::=</h4>
<p>Specifies the frequency of indirect checkpoints on a per-database basis. Starting with SQL Server 2016 (13.x) the default value for new databases is <strong>1 minute</strong>, which indicates the database uses indirect checkpoints. For older versions the default is 0, which indicates that the database uses automatic checkpoints, whose frequency depends on the recovery interval setting of the server instance. Microsoft recommends 1 minute for most systems.</p>
<h4 id="target_recovery_time--target_recovery_time--seconds--minutes--1">TARGET_RECOVERY_TIME = <em>target_recovery_time</em> { SECONDS | MINUTES }</h4>
<ul>
<li><p><em>target_recovery_time</em></p>
<p>Specifies the maximum bound on the time to recover the specified database in the event of a crash. <em>target_recovery_time</em> is type <strong>int</strong>.</p>
</li>
<li><p>SECONDS</p>
<p>Indicates that <em>target_recovery_time</em> is expressed as the number of seconds.</p>
</li>
<li><p>MINUTES</p>
<p>Indicates that <em>target_recovery_time</em> is expressed as the number of minutes.</p>
</li>
</ul>
<p>For more information about indirect checkpoints, see <a href="../../relational-databases/logs/database-checkpoints-sql-server?view=sql-server-ver17" data-linktype="relative-path">Database checkpoints</a>.</p>
<h4 id="with-termination--1">WITH &lt;termination&gt; ::=</h4>
<p>Specifies when to roll back incomplete transactions when the database is transitioned from one state to another. If the termination clause is omitted, the ALTER DATABASE statement waits indefinitely if there's any lock on the database. Only one termination clause can be specified, and it follows the SET clauses.</p>
<div class="NOTE">
<p>Note</p>
<p>Not all database options use the WITH &lt;termination&gt; clause. For more information, see the table under <a href="#SettingOptions" data-linktype="self-bookmark">Setting options</a> of the "Remarks" section of this article.</p>
</div>
<ul>
<li><p>ROLLBACK AFTER <em>integer</em> [SECONDS] | ROLLBACK IMMEDIATE</p>
<p>Specifies whether to roll back after the specified number of seconds or immediately.</p>
</li>
<li><p>NO_WAIT</p>
<p>Specifies that the request fails if the requested database state or option change can't complete immediately. Completing immediately means not waiting for transactions to commit or roll back on their own.</p>
</li>
</ul>
<h4 id="temporal_history_retention--1">&lt;temporal_history_retention&gt; ::=</h4>
<ul>
<li><p>TEMPORAL_HISTORY_RETENTION { ON | OFF }</p>
<p>ON by default but also automatically set to OFF after point in time restore operation. For more information including how to enable this setting, see <a href="../../relational-databases/tables/manage-retention-of-historical-data-in-system-versioned-temporal-tables?view=sql-server-ver17#how-to-configure-retention-policy" data-linktype="relative-path">How to configure retention policy</a>.</p>
<ul>
<li><p>ON</p>
<p>Default. Enables temporal table retention policy. For more information, see <a href="../../relational-databases/tables/manage-retention-of-historical-data-in-system-versioned-temporal-tables?view=sql-server-ver17" data-linktype="relative-path">Manage retention of historical data in system-versioned temporal tables</a>.</p>
</li>
<li><p>OFF</p>
<p>Don't perform temporal historical retention policy.</p>
</li>
</ul>
</li>
</ul>
<h2 id="SettingOptions"> Set options</h2>
<p>To retrieve current settings for database options, use the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a></p>
<p>After you set a database option, the new setting takes effect immediately.</p>
<p>You can change the default values for any one of the database options for all newly created databases. To do so, change the appropriate database option in the <code>model</code> database.</p>
<p>Not all database options use the WITH &lt;termination&gt; clause or can be specified in combination with other options. The following table lists these options and their option and termination status.</p>
<table>
<thead>
<tr>
<th>Options category</th>
<th>Can be specified with other options</th>
<th>Can use the WITH &lt;termination&gt; clause</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;auto_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;change_tracking_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;cursor_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;db_encryption_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;db_update_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;db_user_access_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;delayed_durability_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;parameterization_option&gt;</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>ALLOW_SNAPSHOT_ISOLATION</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>READ_COMMITTED_SNAPSHOT</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>DATE_CORRELATION_OPTIMIZATION</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>&lt;sql_option&gt;</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>&lt;target_recovery_time_option&gt;</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="examples-1">Examples</h2>
<h3 id="a-set-the-database-to-read_only">A. Set the database to READ_ONLY</h3>
<p>Changing the state of a database or file group to READ_ONLY or READ_WRITE requires exclusive access to the database and might take a few seconds to complete. The following example sets the database to <code>RESTRICTED_USER</code> mode to limit access. The example then sets the state of the <code>AdventureWorks2025</code> database to <code>READ_ONLY</code> and returns access to the database to all users.</p>
<pre><code class="lang-sql">--Connect to [database_name];
GO
ALTER DATABASE [database_name]
SET RESTRICTED_USER;
GO
ALTER DATABASE [database_name]
SET READ_ONLY
--`SET READ_ONLY` command might take a few seconds to complete.
GO
ALTER DATABASE [database_name]
SET MULTI_USER;
GO
</code></pre>
<p>To set the database back to read-write mode:</p>
<pre><code class="lang-sql">--Connect to [database_name];
GO
ALTER DATABASE [database_name]
SET READ_WRITE
GO
</code></pre>
<p>To verify:</p>
<pre><code class="lang-sql">SELECT [name], user_access_desc, is_read_only FROM sys.databases
WHERE [name] = 'database_name'
GO
</code></pre>
<h3 id="b-enable-snapshot-isolation-on-a-database">B. Enable snapshot isolation on a database</h3>
<p>The following example enables the snapshot isolation framework option for the <code>AdventureWorks2025</code> database.</p>
<pre><code class="lang-sql">--Connect to [database_name]
GO
ALTER DATABASE [database_name]
SET ALLOW_SNAPSHOT_ISOLATION ON;
GO
</code></pre>
<p>Verify the state of the <code>snapshot_isolation_framework</code> in the database.</p>
<pre><code class="lang-sql">--Connect to [database_name]
SELECT name, snapshot_isolation_state,
    snapshot_isolation_state_desc AS description
FROM sys.databases
WHERE name = N'database_name';
GO
</code></pre>
<p>The result set shows that the snapshot isolation framework is enabled.</p>
<table>
<thead>
<tr>
<th>name</th>
<th>snapshot_isolation_state</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>[database_name]</td>
<td>1</td>
<td>ON</td>
</tr>
</tbody>
</table>
<h3 id="c-enable-modify-or-disable-change-tracking">C. Enable, modify, or disable change tracking</h3>
<p>The following example enables change tracking for the <code>AdventureWorks2025</code> database and sets the retention period to <code>2</code> days.</p>
<pre><code class="lang-sql">--Connect to [database_name]
ALTER DATABASE [database_name]
SET CHANGE_TRACKING = ON
(AUTO_CLEANUP = ON, CHANGE_RETENTION = 2 DAYS);
</code></pre>
<p>The following example shows how to change the retention period to 3 days.</p>
<pre><code class="lang-sql">--Connect to [database_name]
ALTER DATABASE [database_name]
SET CHANGE_TRACKING (CHANGE_RETENTION = 3 DAYS);
</code></pre>
<p>The following example shows how to disable change tracking for the <code>AdventureWorks2025</code> database.</p>
<pre><code class="lang-sql">--Connect to [database_name]
ALTER DATABASE [database_name]
SET CHANGE_TRACKING = OFF;
</code></pre>
<h3 id="d-enable-the-query-store">D. Enable the Query Store</h3>
<p>The following example enables the Query Store and configures Query Store parameters.</p>
<pre><code class="lang-sql">--Connect to [database_name]
ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      QUERY_CAPTURE_MODE = AUTO,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60
    );
</code></pre>
<h3 id="e-enable-the-query-store-with-wait-statistics">E. Enable the Query Store with wait statistics</h3>
<p>The following example enables the Query Store and configures its parameters.</p>
<pre><code class="lang-sql">--Connect to [database_name]
ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60,
      SIZE_BASED_CLEANUP_MODE = AUTO,
      MAX_PLANS_PER_QUERY = 200,
      WAIT_STATS_CAPTURE_MODE = ON
    );
</code></pre>
<h3 id="f-enable-the-query-store-with-custom-capture-policy-options">F. Enable the Query Store with custom capture policy options</h3>
<p>The following example enables the Query Store and configures its parameters.</p>
<pre><code class="lang-sql">--Connect to [database_name]
ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60,
      SIZE_BASED_CLEANUP_MODE = AUTO,
      MAX_PLANS_PER_QUERY = 200,
      WAIT_STATS_CAPTURE_MODE = ON,
      QUERY_CAPTURE_MODE = CUSTOM,
      QUERY_CAPTURE_POLICY = (
        STALE_CAPTURE_POLICY_THRESHOLD = 24 HOURS,
        EXECUTION_COUNT = 30,
        TOTAL_COMPILE_CPU_TIME_MS = 1000,
        TOTAL_EXECUTION_CPU_TIME_MS = 100
      )
    );
</code></pre>
<h2 id="related-content-1">Related content</h2>
<ul>
<li><a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a></li>
<li><a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX (Transact-SQL)</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-data-spaces-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.data_spaces</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-database-automatic-tuning-options-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.database_automatic_tuning_options</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-database-automatic-tuning-mode-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.database_automatic_tuning_mode</a></li>
<li><a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a></li>
<li><a href="alter-database-transact-sql-database-mirroring?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE Database Mirroring</a></li>
<li><a href="create-database-transact-sql?view=sql-server-ver17" data-linktype="relative-path">CREATE DATABASE</a></li>
<li><a href="../../relational-databases/track-changes/enable-and-disable-change-tracking-sql-server?view=sql-server-ver17" data-linktype="relative-path">Enable and Disable Change Tracking (SQL Server)</a></li>
<li><a href="drop-database-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DROP DATABASE (Transact-SQL)</a></li>
<li><a href="set-transaction-isolation-level-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET TRANSACTION ISOLATION LEVEL (Transact-SQL)</a></li>
<li><a href="../../relational-databases/system-stored-procedures/sp-configure-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sp_configure</a></li>
<li><a href="../../relational-databases/performance/best-practice-with-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Best practices for monitoring workloads with Query Store</a></li>
<li><a href="../../relational-databases/performance/query-store-hints?view=sql-server-ver17" data-linktype="relative-path">Query Store hints</a></li>
</ul>
</div>
<div data-moniker="azuresqldb-mi-current">
<section class="row">
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=sql-server-ver15&amp;preserve-view=true" data-linktype="relative-path">SQL Server</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-current&amp;preserve-view=true" data-linktype="relative-path">SQL Database</a></p>
</div>
<div class="column">
<p><em><strong>* SQL Managed Instance *</strong></em> &nbsp;</p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azure-sqldw-latest&amp;preserve-view=true" data-linktype="relative-path">Azure Synapse<br>Analytics</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=fabric&amp;preserve-view=true" data-linktype="relative-path">Microsoft Fabric Data Warehouse</a></p>
</div>
</section>
<p>&nbsp;</p>
<h2 id="azure-sql-managed-instance">Azure SQL Managed Instance</h2>
<p>Compatibility levels are <code>SET</code> options but are described in <a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a>.</p>
<div class="NOTE">
<p>Note</p>
<p>Many database set options can be configured for the current session by using <a href="set-statements-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET Statements</a> and are often configured by applications when they connect. Session-level set options override the <code>ALTER DATABASE SET</code> values. The database options described in the following sections are values that can be set for sessions that don't explicitly provide other set option values.</p>
</div>
<h2 id="syntax-2">Syntax</h2>
<pre><code class="lang-syntaxsql">ALTER DATABASE { database_name | Current }
SET
{
    &lt;optionspec&gt; [ ,...n ]
}
;

{ [ FOR SECONDARY ] SET &lt;set_options&gt; }

&lt;optionspec&gt; ::=
{
    &lt;auto_option&gt;
  | &lt;change_tracking_option&gt;
  | &lt;cursor_option&gt;
  | &lt;db_encryption_option&gt;
  | &lt;delayed_durability_option&gt;
  | &lt;parameterization_option&gt;
  | &lt;query_store_options&gt;
  | &lt;snapshot_option&gt;
  | &lt;sql_option&gt;
  | &lt;target_recovery_time_option&gt;
  | &lt;termination&gt;
  | &lt;temporal_history_retention&gt;
}
;
&lt;auto_option&gt; ::=
{
    AUTO_CREATE_STATISTICS { OFF | ON [ ( INCREMENTAL = { ON | OFF } ) ] }
  | AUTO_SHRINK { ON | OFF }
  | AUTO_UPDATE_STATISTICS { ON | OFF }
  | AUTO_UPDATE_STATISTICS_ASYNC { ON | OFF }
}

&lt;automatic_tuning_option&gt; ::=
{
    AUTOMATIC_TUNING ( FORCE_LAST_GOOD_PLAN = { DEFAULT | ON | OFF } )
}

&lt;change_tracking_option&gt; ::=
{
    CHANGE_TRACKING
    {
       = OFF
     | = ON [ ( &lt;change_tracking_option_list &gt; [,...n] ) ]
     | ( &lt;change_tracking_option_list&gt; [,...n] )
    }
}

&lt;change_tracking_option_list&gt; ::=
   {
       AUTO_CLEANUP = { ON | OFF }
     | CHANGE_RETENTION = retention_period { DAYS | HOURS | MINUTES }
   }

&lt;cursor_option&gt; ::=
{
    CURSOR_CLOSE_ON_COMMIT { ON | OFF }
}

&lt;db_encryption_option&gt; ::=
  ENCRYPTION { ON | OFF }

&lt;delayed_durability_option&gt; ::=DELAYED_DURABILITY = { DISABLED | ALLOWED | FORCED }

&lt;parameterization_option&gt; ::=
  PARAMETERIZATION { SIMPLE | FORCED }

&lt;query_store_options&gt; ::=
{
  QUERY_STORE
  {
    = OFF
    | = ON [ ( &lt;query_store_option_list&gt; [,... n] ) ]
    | ( &lt; query_store_option_list&gt; [,... n] )
    | CLEAR [ ALL ]
  }
}

&lt;query_store_option_list&gt; ::=
{
  OPERATION_MODE = { READ_WRITE | READ_ONLY }
  | CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = number )
  | DATA_FLUSH_INTERVAL_SECONDS = number
  | MAX_STORAGE_SIZE_MB = number
  | INTERVAL_LENGTH_MINUTES = number
  | SIZE_BASED_CLEANUP_MODE = { AUTO | OFF }
  | QUERY_CAPTURE_MODE = { ALL | AUTO | CUSTOM | NONE }
  | MAX_PLANS_PER_QUERY = number
  | WAIT_STATS_CAPTURE_MODE = { ON | OFF }
  | QUERY_CAPTURE_POLICY = ( &lt;query_capture_policy_option_list&gt; [,...n] )
}

&lt;query_capture_policy_option_list&gt; :: =
{
    STALE_CAPTURE_POLICY_THRESHOLD = number { DAYS | HOURS }
    | EXECUTION_COUNT = number
    | TOTAL_COMPILE_CPU_TIME_MS = number
    | TOTAL_EXECUTION_CPU_TIME_MS = number
}

&lt;snapshot_option&gt; ::=
{
    ALLOW_SNAPSHOT_ISOLATION { ON | OFF }
  | READ_COMMITTED_SNAPSHOT { ON | OFF }
  | MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT { ON | OFF }
}
&lt;sql_option&gt; ::=
{
    ANSI_NULL_DEFAULT { ON | OFF }
  | ANSI_NULLS { ON | OFF }
  | ANSI_PADDING { ON | OFF }
  | ANSI_WARNINGS { ON | OFF }
  | ARITHABORT { ON | OFF }
  | COMPATIBILITY_LEVEL = { 170 | 160 | 150 | 140 | 130 | 120 | 110 | 100 }
  | CONCAT_NULL_YIELDS_NULL { ON | OFF }
  | NUMERIC_ROUNDABORT { ON | OFF }
  | QUOTED_IDENTIFIER { ON | OFF }
  | RECURSIVE_TRIGGERS { ON | OFF }
}

&lt;temporal_history_retention&gt;::= TEMPORAL_HISTORY_RETENTION { ON | OFF }
</code></pre>
<h2 id="arguments-2">Arguments</h2>
<h4 id="database_name-2"><em>database_name</em></h4>
<p>The name of the database to be modified.</p>
<h4 id="current-1">CURRENT</h4>
<p><code>CURRENT</code> runs the action in the current database. <code>CURRENT</code> isn't supported for all options in all contexts. If <code>CURRENT</code> fails, provide the database name.</p>
<h4 id="for-secondary-2">FOR SECONDARY</h4>
<p>Specifies the settings for secondary replicas. All secondary replicas must have the identical values. Similar to <code>FOR SECONDARY</code> for <a href="alter-database-scoped-configuration-transact-sql?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)</a>.</p>
<p>For use with the Query Store (<code>QUERY_STORE</code>) and Automatic Tuning (<code>AUTOMATIC_TUNING</code>) only.</p>
<p>Before SQL Server Management Studio (SSMS) version 21, the <code>FOR SECONDARY</code> syntax is valid but not recognized by IntelliSense.</p>
<h4 id="auto_option--2">&lt;auto_option&gt; ::=</h4>
<p>Controls automatic options.</p>
<h4 id="auto_create_statistics"> AUTO_CREATE_STATISTICS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Query Optimizer creates statistics on single columns in query predicates, as necessary, to improve query plans and query performance. These single-column statistics are created when Query Optimizer compiles queries. The single-column statistics are created only on columns that aren't already the first column of an existing statistics object.</p>
<p>The default is ON. We recommend that you use the default setting for most databases.</p>
</li>
<li><p>OFF</p>
<p>Query Optimizer doesn't create statistics on single columns in query predicates when it's compiling queries. Setting this option to OFF can cause suboptimal query plans and degraded query performance.</p>
<p>You can determine this option's status by examining the <code>is_auto_create_stats_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoCreateStatistics</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>For more information, see the "Statistics options" section in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17#statistics-options" data-linktype="relative-path">Statistics</a>.</p>
</li>
</ul>
<h4 id="incremental--on--off-2">INCREMENTAL = ON | OFF</h4>
<p>Set AUTO_CREATE_STATISTICS to ON, and set INCREMENTAL to ON. This setting creates automatically created stats as incremental whenever incremental stats are supported. The default value is OFF. For more information, see <a href="create-statistics-transact-sql?view=sql-server-ver17" data-linktype="relative-path">CREATE STATISTICS</a>.</p>
<h4 id="auto_shrink"> AUTO_SHRINK { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The database files are candidates for periodic shrinking. Unless you have a specific requirement, don't set the AUTO_SHRINK database option to ON. For more information, see <a href="../../relational-databases/databases/shrink-a-database?view=sql-server-ver17" data-linktype="relative-path">Shrink a database</a>.</p>
<p>Both data file and log files can be automatically shrunk. AUTO_SHRINK reduces the size of the transaction log only if you set the database to SIMPLE recovery model or if you back up the log. When set to OFF, the database files aren't automatically shrunk during periodic checks for unused space.</p>
<p>The AUTO_SHRINK option causes files to be shrunk when more than 25 percent of the file contains unused space. The option causes the file to shrink to one of two sizes. It shrinks to whichever is larger:</p>
<ul>
<li>The size where 25 percent of the file is unused space</li>
<li>The size of the file when it was created</li>
</ul>
<p>You can't shrink a read-only database.</p>
</li>
<li><p>OFF</p>
<p>The database files aren't automatically shrunk during periodic checks for unused space.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_shrink_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoShrink</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<div class="NOTE">
<p>Note</p>
<p>The AUTO_SHRINK option isn't available in a Contained Database.</p>
</div>
<h4 id="auto_update_statistics"> AUTO_UPDATE_STATISTICS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Specifies that Query Optimizer updates statistics when they're used by a query and when they might be out-of-date. Statistics become out-of-date after insert, update, delete, or merge operations change the data distribution in the table or indexed view. Query Optimizer determines when statistics might be out-of-date by counting the number of data modifications since the last statistics update and comparing the number of modifications to a threshold. The threshold is based on the number of rows in the table or indexed view.</p>
<p>Query Optimizer checks for out-of-date statistics before it compiles a query and runs a cached query plan. Query Optimizer uses the columns, tables, and indexed views in the query predicate to determine which statistics might be out-of-date. Query Optimizer determines this information before it compiles a query. Before running a cached query plan, the Database Engine verifies that the query plan references up-to-date statistics.</p>
<p>The AUTO_UPDATE_STATISTICS option applies to statistics created for indexes, single-columns in query predicates, and statistics that are created by using the CREATE STATISTICS statement. This option also applies to filtered statistics.</p>
<p>The default is ON. We recommend that you use the default setting for most databases.</p>
<p>Use the AUTO_UPDATE_STATISTICS_ASYNC option to specify whether the statistics are updated synchronously or asynchronously.</p>
</li>
<li><p>OFF</p>
<p>Specifies that Query Optimizer doesn't update statistics when they're used by a query. Query Optimizer also doesn't update statistics when they might be out-of-date. Setting this option to OFF can cause suboptimal query plans and degraded query performance.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_update_stats_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoUpdateStatistics</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>For more information, see the section "Using the database-wide statistics options" in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="auto_update_statistics_async"> AUTO_UPDATE_STATISTICS_ASYNC { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Specifies that statistics updates for the AUTO_UPDATE_STATISTICS option are asynchronous. Query Optimizer doesn't wait for statistics updates to complete before it compiles queries.</p>
<p>Setting this option to ON has no effect unless AUTO_UPDATE_STATISTICS is set to ON.</p>
<p>By default, the AUTO_UPDATE_STATISTICS_ASYNC option is set to OFF, and Query Optimizer updates statistics synchronously.</p>
</li>
<li><p>OFF</p>
<p>Specifies that statistics updates for the AUTO_UPDATE_STATISTICS option are synchronous. Query Optimizer waits for statistics updates to complete before it compiles queries.</p>
<p>Setting this option to OFF has no effect unless AUTO_UPDATE_STATISTICS is set to ON.</p>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_auto_update_stats_async_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<p>For more information that describes when to use synchronous or asynchronous statistics updates, see the section "Using the database-wide statistics options" in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="auto_tuning"> &lt;automatic_tuning_option&gt; ::=</h4>
<p>Controls automatic options for <a href="../../relational-databases/automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a>.</p>
<h4 id="force_last_good_plan---default--on--off--2">FORCE_LAST_GOOD_PLAN = { DEFAULT | ON | OFF }</h4>
<p>Enables or disables <code>FORCE_LAST_GOOD_PLAN</code> <a href="../../relational-databases/automatic-tuning/automatic-tuning?view=sql-server-ver17" data-linktype="relative-path">Automatic tuning</a> option.</p>
<ul>
<li><p>DEFAULT</p>
<p>The default value for Azure SQL Managed Instance is ON.</p>
</li>
<li><p>ON</p>
<p>The Database Engine automatically forces the last known good plan on the Transact-SQL queries where new query plan causes performance regressions. The Database Engine continuously monitors query performance of the Transact-SQL query with the forced plan. If there are performance gains, the Database Engine keeps using last known good plan. If performance gains aren't detected, the Database Engine produces a new query plan. The statement fails if the Query Store isn't enabled, or isn't in <em>Read-Write</em> mode. This is the default value.</p>
</li>
<li><p>OFF</p>
<p>The Database Engine reports potential query performance regressions caused by query plan changes in <a href="../../relational-databases/system-dynamic-management-views/sys-dm-db-tuning-recommendations-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_db_tuning_recommendations</a> view. However, these recommendations aren't automatically applied. Users can monitor active recommendations and fix identified problems by applying Transact-SQL scripts that are shown in the view.</p>
</li>
</ul>
<h4 id="change_tracking_option--2">&lt;change_tracking_option&gt; ::=</h4>
<p>Controls change tracking options. You can enable change tracking, set options, change options, and disable change tracking. For examples, see the <a href="#examples" data-linktype="self-bookmark">Examples</a> section later in this article.</p>
<ul>
<li><p>ON</p>
<p>Enables change tracking for the database. When you enable change tracking, you can also set the AUTO CLEANUP and CHANGE RETENTION options.</p>
</li>
</ul>
<h4 id="auto_cleanup---on--off-">AUTO_CLEANUP = { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Change tracking information is automatically removed after the specified retention period.</p>
</li>
<li><p>OFF</p>
<p>Change tracking data isn't removed from the database.</p>
</li>
</ul>
<h4 id="change_retention--retention_period--days--hours--minutes-">CHANGE_RETENTION = <em>retention_period</em> { DAYS | HOURS | MINUTES }</h4>
<p>Specifies the minimum period for keeping change tracking information in the database. Data is removed only when the AUTO_CLEANUP value is ON.</p>
<p><em>retention_period</em> is an integer that specifies the numerical component of the retention period.</p>
<p>The default retention period is <strong>2 days</strong>. The minimum retention period is 1 minute. The default retention type is <strong>DAYS</strong>.</p>
<ul>
<li><p>OFF</p>
<p>Disables change tracking for the database. Disable change tracking on all tables before you disable change tracking off the database.</p>
</li>
</ul>
<h4 id="cursor_option--2">&lt;cursor_option&gt; ::=</h4>
<p>Controls cursor options.</p>
<h4 id="cursor_close_on_commit--on--off--2">CURSOR_CLOSE_ON_COMMIT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Any cursors open when you commit or roll back a transaction are closed.</p>
</li>
<li><p>OFF</p>
<p>Cursors remain open when a transaction is committed; rolling back a transaction closes any cursors except those defined as INSENSITIVE or STATIC.</p>
</li>
</ul>
<p>Connection-level settings that are set by using the SET statement override the default database setting for CURSOR_CLOSE_ON_COMMIT. ODBC and OLE DB clients issue a connection-level SET statement setting CURSOR_CLOSE_ON_COMMIT to OFF for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-cursor-close-on-commit-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET CURSOR_CLOSE_ON_COMMIT</a>.</p>
<p>You can determine this option's status by examining the <code>is_cursor_close_on_commit_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the IsCloseCursorsOnCommitEnabled property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function. The cursor is implicitly deallocated only at disconnect. For more information, see <a href="../language-elements/declare-cursor-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DECLARE CURSOR</a>.</p>
<h4 id="db_encryption_option--2">&lt;db_encryption_option&gt; ::=</h4>
<p>Controls the database encryption state.</p>
<h4 id="encryption--on--off--1">ENCRYPTION { ON | OFF }</h4>
<p>Sets the database to be encrypted (ON) or not encrypted (OFF). For more information about database encryption, see <a href="../../relational-databases/security/encryption/transparent-data-encryption?view=sql-server-ver17" data-linktype="relative-path">Transparent data encryption (TDE)</a>, and <a href="/en-us/azure/azure-sql/database/transparent-data-encryption-tde-overview" data-linktype="absolute-path">Transparent data encryption for Azure SQL Database, Azure SQL Managed Instance, and Azure Synapse Analytics</a>.</p>
<p>When encryption is enabled at the database level, all file groups are encrypted. Any new file groups inherit the encrypted property. If any file groups in the database are set to READ ONLY, the database encryption operation fails.</p>
<p>You can see the encryption state of the database by using the <a href="../../relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_database_encryption_keys</a> dynamic management view.</p>
<h4 id="delayed_durability_option--2">&lt;delayed_durability_option&gt; ::=</h4>
<p>Controls whether transactions commit fully durable or delayed durable.</p>
<ul>
<li><p>DISABLED</p>
<p>All transactions following <code>SET DISABLED</code> are fully durable. Any durability options set in an atomic block or commit statement are ignored.</p>
</li>
<li><p>ALLOWED</p>
<p>All transactions following <code>SET ALLOWED</code> are either fully durable or delayed durable, depending upon the durability option set in the atomic block or commit statement.</p>
</li>
<li><p>FORCED</p>
<p>All transactions following <code>SET FORCED</code> are delayed durable. Any durability options set in an atomic block or commit statement are ignored.</p>
</li>
</ul>
<h4 id="parameterization_option--2">&lt;PARAMETERIZATION_option&gt; ::=</h4>
<p>Controls the parameterization option.</p>
<h4 id="parameterization--simple--forced--2">PARAMETERIZATION { SIMPLE | FORCED }</h4>
<ul>
<li><p>SIMPLE</p>
<p>Queries are parameterized based on the default behavior of the database.</p>
</li>
<li><p>FORCED</p>
</li>
</ul>
<p>SQL Server parameterizes all queries in the database.</p>
<p>The current setting of this option can be determined by examining the <code>is_parameterization_forced</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="query-store"> &lt;query_store_options&gt; ::=</h4>
<ul>
<li><p>ON | OFF | CLEAR [ ALL ]</p>
<p>Controls whether the Query Store is enabled in this database, and also controls removing the contents of the Query Store.</p>
<ul>
<li><p>ON</p>
<p>Enables the Query Store.</p>
</li>
<li><p>OFF</p>
<p>Disables the Query Store. This is the default value.</p>
</li>
<li><p>CLEAR</p>
<p>Remove the contents of the Query Store.</p>
</li>
</ul>
</li>
</ul>
<h4 id="operation_mode-1">OPERATION_MODE</h4>
<p>Describes the operation mode of the Query Store. Valid values are READ_ONLY and READ_WRITE. In READ_WRITE mode, the Query Store collects and persists query plan and runtime execution statistics information. In READ_ONLY mode, information can be read from the Query Store, but new information isn't added. If the maximum allocated space of the Query Store has been exhausted, the Query Store changes its operation mode to READ_ONLY.</p>
<h4 id="cleanup_policy-2">CLEANUP_POLICY</h4>
<p>Describes the data retention policy of the Query Store. STALE_QUERY_THRESHOLD_DAYS determines the number of days for which the information for a query is kept in the Query Store. STALE_QUERY_THRESHOLD_DAYS is type <strong>bigint</strong>. The default value is 30. For SQL Database Basic edition, default is <strong>7</strong> days.</p>
<h4 id="data_flush_interval_seconds-2">DATA_FLUSH_INTERVAL_SECONDS</h4>
<p>Determines the frequency at which data written to the Query Store is persisted to disk. To optimize for performance, data collected by the Query Store is asynchronously written to the disk. The frequency at which this asynchronous transfer occurs is configured by using the DATA_FLUSH_INTERVAL_SECONDS argument. DATA_FLUSH_INTERVAL_SECONDS is type <strong>bigint</strong>. The default value is <strong>900</strong> (15 min).</p>
<h4 id="max_storage_size_mb-2">MAX_STORAGE_SIZE_MB</h4>
<p>Determines the space allocated to the Query Store. MAX_STORAGE_SIZE_MB is type <strong>bigint</strong>. The default value is <strong>100 MB</strong>.</p>
<p><code>MAX_STORAGE_SIZE_MB</code> limit isn't strictly enforced. Storage size is checked only when Query Store writes data to disk. This interval is set by the <code>DATA_FLUSH_INTERVAL_SECONDS</code> option or the Management Studio Query Store dialog option <strong>Data Flush Interval</strong>. The interval default value is 900 seconds (or 15 minutes).</p>
<p>If the Query Store has breached the <code>MAX_STORAGE_SIZE_MB</code> limit between storage size checks, it transitions to read-only mode. If <code>SIZE_BASED_CLEANUP_MODE</code> is enabled, the cleanup mechanism to enforce the <code>MAX_STORAGE_SIZE_MB</code> limit is also triggered.</p>
<p>Once enough space has been cleared, the Query Store mode automatically switches back to read-write.</p>
<div class="IMPORTANT">
<p>Important</p>
<ul>
<li>If you think that your workload capture needs more than 10 GB of disk space, you should probably rethink and optimize your workload to reuse query plans (for example using <a href="../../relational-databases/query-processing-architecture-guide?view=sql-server-ver17#forced-parameterization" data-linktype="relative-path">forced parameterization</a>, or adjust the Query Store configurations.</li>
<li>Starting with SQL Server 2019 (15.x) and in Azure SQL Database, you can set <code>QUERY_CAPTURE_MODE</code> to CUSTOM for additional control over the query capture policy.</li>
<li><code>MAX_STORAGE_SIZE_MB</code> setting limit is 10,240 MB on Azure SQL Managed Instance.</li>
</ul>
</div>
<h4 id="interval_length_minutes-2">INTERVAL_LENGTH_MINUTES</h4>
<p>Determines the time interval at which runtime execution statistics data is aggregated into the Query Store. To optimize for space usage, the runtime execution statistics in the runtime stats store are aggregated over a fixed time window. This fixed time window is configured by using the INTERVAL_LENGTH_MINUTES argument. INTERVAL_LENGTH_MINUTES is type <strong>bigint</strong>. The default value is <strong>60</strong>.</p>
<h4 id="size_based_cleanup_mode---auto--off--1">SIZE_BASED_CLEANUP_MODE = { AUTO | OFF }</h4>
<p>Controls whether cleanup is automatically activated when the total amount of data gets close to maximum size.</p>
<ul>
<li><p>OFF</p>
<p>Size-based cleanup aren't automatically activated.</p>
</li>
<li><p>AUTO</p>
<p>Size-based cleanup is automatically activated when size on disk reaches 90% of <strong>max_storage_size_mb</strong>. Size-based cleanup removes the least expensive and oldest queries first. It stops at approximately 80% of <strong>max_storage_size_mb</strong>. This is the default configuration value.</p>
</li>
</ul>
<p>SIZE_BASED_CLEANUP_MODE is type <strong>nvarchar</strong>.</p>
<h4 id="query_capture_mode--all--auto--custom--none--2">QUERY_CAPTURE_MODE { ALL | AUTO | CUSTOM | NONE }</h4>
<p>Designates the currently active query capture mode.</p>
<ul>
<li><p>ALL</p>
<p>All queries are captured.</p>
</li>
<li><p>AUTO</p>
<p>Capture relevant queries based on execution count and resource consumption. This is the default configuration value for Azure SQL Database.</p>
</li>
<li><p>NONE</p>
<p>Stop capturing new queries. The Query Store continues to collect compile and runtime statistics for queries that were captured already. Use this configuration with caution since you might miss capturing important queries.</p>
</li>
</ul>
<p>QUERY_CAPTURE_MODE is type <strong>nvarchar</strong>.</p>
<h4 id="max_plans_per_query-2">MAX_PLANS_PER_QUERY</h4>
<p>An integer representing the maximum number of plans maintained for each query. MAX_PLANS_PER_QUERY is type <strong>int</strong>. The default value is <strong>200</strong>.</p>
<h4 id="wait_stats_capture_mode--on--off--2">WAIT_STATS_CAPTURE_MODE { ON | OFF }</h4>
<p>Controls whether wait statistics are captured per query.</p>
<ul>
<li><p>ON</p>
<p>Wait statistics information per query is captured. This value is the default configuration value.</p>
</li>
<li><p>OFF</p>
<p>Wait statistics information per query aren't captured.</p>
</li>
</ul>
<h4 id="query_capture_policy_option_list---2">&lt;query_capture_policy_option_list&gt; :: =</h4>
<p>Controls the Query Store capture policy options. Except for STALE_CAPTURE_POLICY_THRESHOLD, these options define the OR conditions that need to happen for queries to be captured in the defined Stale Capture Policy Threshold value.</p>
<h4 id="stale_capture_policy_threshold--integer--days--hours--1">STALE_CAPTURE_POLICY_THRESHOLD = <em>integer</em> { DAYS | HOURS }</h4>
<p>Defines the evaluation interval period to determine if a query should be captured. The default is 1 day, and it can be set from 1 hour to seven days.</p>
<h4 id="execution_count--integer-1">EXECUTION_COUNT = <em>integer</em></h4>
<p>Defines the number of times a query is executed over the evaluation period. The default is 30, which means that for the default Stale Capture Policy Threshold, a query must execute at least 30 times in one day to be persisted in the Query Store. EXECUTION_COUNT is type <strong>int</strong>.</p>
<h4 id="total_compile_cpu_time_ms--integer-1">TOTAL_COMPILE_CPU_TIME_MS = <em>integer</em></h4>
<p>Defines total elapsed compile CPU time used by a query over the evaluation period. The default is 1000, which means that for the default Stale Capture Policy Threshold, a query must have a total of at least one second of CPU time spent during query compilation in one day to be persisted in the Query Store. TOTAL_COMPILE_CPU_TIME_MS is type <strong>int</strong>.</p>
<h4 id="total_execution_cpu_time_ms--integer-1">TOTAL_EXECUTION_CPU_TIME_MS = <em>integer</em></h4>
<p>Defines total elapsed execution CPU time used by a query over the evaluation period. The default is 100, which means that for the default Stale Capture Policy Threshold, a query must have a total of at least 100 ms of CPU time spent during execution in one day to be persisted in the Query Store. TOTAL_EXECUTION_CPU_TIME_MS is type <strong>int</strong>.</p>
<h4 id="snapshot_option--2">&lt;snapshot_option&gt; ::=</h4>
<p>Determines the transaction isolation level.</p>
<h4 id="allow_snapshot_isolation--on--off--2">ALLOW_SNAPSHOT_ISOLATION { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables the Snapshot option at the database level. When it's enabled, DML statements start generating row versions even when no transaction uses Snapshot Isolation. After this option is enabled, transactions can specify the SNAPSHOT transaction isolation level. When a transaction runs at the SNAPSHOT isolation level, all statements see a snapshot of data as it exists at the start of the transaction. If a transaction running at the SNAPSHOT isolation level accesses data in multiple databases, either ALLOW_SNAPSHOT_ISOLATION must be set to ON in all the databases, or each statement in the transaction must use locking hints on any reference in a FROM clause to a table in a database where ALLOW_SNAPSHOT_ISOLATION is OFF.</p>
</li>
<li><p>OFF</p>
<p>Turns off the Snapshot option at the database level. Transactions can't specify the SNAPSHOT transaction isolation level.</p>
</li>
</ul>
<p>When you set ALLOW_SNAPSHOT_ISOLATION to a new state (from ON to OFF, or from OFF to ON), ALTER DATABASE doesn't return control to the caller until all existing transactions in the database are committed. If the database is already in the state specified in the ALTER DATABASE statement, control is returned to the caller immediately. If the ALTER DATABASE statement doesn't return quickly, use <a href="../../relational-databases/system-dynamic-management-views/sys-dm-tran-active-snapshot-database-transactions-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.dm_tran_active_snapshot_database_transactions</a> to determine whether there are long-running transactions. If the ALTER DATABASE statement is canceled, the database remains in the state it was in when ALTER DATABASE was started. The <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view indicates the state of snapshot-isolation transactions in the database. If <code>snapshot_isolation_state_desc = IN_TRANSITION_TO_ON</code>, the statement <code>ALTER DATABASE ... ALLOW_SNAPSHOT_ISOLATION OFF</code> pauses six seconds and retries the operation.</p>
<p>You can't change the state of ALLOW_SNAPSHOT_ISOLATION if the database is OFFLINE.</p>
<p>You can change the ALLOW_SNAPSHOT_ISOLATION settings for the <code>master</code>, <code>model</code>, <code>msdb</code>, and <code>tempdb</code> databases. The setting is kept every time the instance of the Database Engine is stopped and restarted if you change the setting for <code>tempdb</code>. If you change the setting for the <code>model</code> system database, that setting becomes the default for any new databases that are created, except for <code>tempdb</code>.</p>
<p>The option is ON, by default, for the <code>master</code> and <code>msdb</code> databases.</p>
<p>The current setting of this option can be determined by examining the <code>snapshot_isolation_state</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="read_committed_snapshot--on--off--2">READ_COMMITTED_SNAPSHOT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables the Read-Committed Snapshot option at the database level. When it's enabled, DML statements start generating row versions even when no transaction uses Snapshot Isolation. After this option is enabled, the transactions specifying the READ COMMITTED isolation level use row versioning instead of locking. All statements see a snapshot of data as it exists at the start of the statement when a transaction runs at the READ COMMITTED isolation level.</p>
</li>
<li><p>OFF</p>
<p>Turns off the Read-Committed Snapshot option at the database level. Transactions specifying the READ COMMITTED isolation level use locking.</p>
</li>
</ul>
<p>To set READ_COMMITTED_SNAPSHOT to ON or OFF, there must be no active connections to the database except for the connection running the ALTER DATABASE command. However, the database doesn't have to be in single-user mode. You can't change the state of this option when the database is OFFLINE.</p>
<p>READ_COMMITTED_SNAPSHOT can't be turned ON for the <code>master</code>, <code>tempdb</code>, or <code>msdb</code> system databases. If you change the setting for the <code>model</code> system database, that setting becomes the default for any new databases created, except for <code>tempdb</code>.</p>
<p>The current setting of this option can be determined by examining the <code>is_read_committed_snapshot_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<div class="WARNING">
<p>Warning</p>
<p>When a table is created with <strong>DURABILITY = SCHEMA_ONLY</strong>, and <strong>READ_COMMITTED_SNAPSHOT</strong> is subsequently changed using <strong>ALTER DATABASE</strong>, data in the table is lost.</p>
</div>
<h4 id="memory_optimized_elevate_to_snapshot--on--off--2">MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>When the transaction isolation level is set to any isolation level lower than SNAPSHOT, all interpreted Transact-SQL operations on memory-optimized tables are run under SNAPSHOT isolation. Examples of isolation levels lower than snapshot are READ COMMITTED or READ UNCOMMITTED. These operations run whether the transaction isolation level is set explicitly at the session level, or the default is used implicitly.</p>
</li>
<li><p>OFF</p>
<p>Doesn't elevate the transaction isolation level for interpreted Transact-SQL operations on memory-optimized tables.</p>
</li>
</ul>
<p>You can't change the state of MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT if the database is OFFLINE.</p>
<p>The default value is OFF.</p>
<p>The current setting of this option can be determined by examining the <code>is_memory_optimized_elevate_to_snapshot_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view.</p>
<h4 id="sql_option--2">&lt;sql_option&gt; ::=</h4>
<p>Controls the ANSI compliance options at the database level.</p>
<h4 id="ansi_null_default--on--off--2">ANSI_NULL_DEFAULT { ON | OFF }</h4>
<p>Determines the default value, NULL or NOT NULL, of a column or <a href="../../relational-databases/clr-integration-database-objects-user-defined-types/clr-user-defined-types?view=sql-server-ver17" data-linktype="relative-path">CLR user-defined type</a> for which the nullability isn't explicitly defined in CREATE TABLE or ALTER TABLE statements. Columns that are defined with constraints follow constraint rules whatever this setting might be.</p>
<ul>
<li><p>ON</p>
<p>The default value is NULL.</p>
</li>
<li><p>OFF</p>
<p>The default value is NOT NULL.</p>
</li>
</ul>
<p>Connection-level settings that are set by using the SET statement override the default database-level setting for ANSI_NULL_DEFAULT. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_NULL_DEFAULT to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-null-dflt-on-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_NULL_DFLT_ON</a>.</p>
<p>For ANSI compatibility, setting the database option ANSI_NULL_DEFAULT to ON changes the database default to NULL.</p>
<p>You can determine this option's status by examining the <code>is_ansi_null_default_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiNullDefault</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_nulls--on--off--2">ANSI_NULLS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>All comparisons to a null value evaluate to UNKNOWN.</p>
</li>
<li><p>OFF</p>
<p>Comparisons of non-Unicode values to a null value evaluate to TRUE if both values are NULL.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>In a future version of SQL Server, ANSI_NULLS will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for ANSI_NULLS. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_NULLS to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-nulls-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_NULLS</a>.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>SET ANSI_NULLS also must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine this option's status by examining the <code>is_ansi_nulls_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiNullsEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_padding--on--off--2">ANSI_PADDING { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Strings are padded to the same length before conversion. Also padded to the same length before inserting to a <strong>varchar</strong> or <strong>nvarchar</strong> data type.</p>
</li>
<li><p>OFF</p>
<p>Inserts trailing blanks in character values into <strong>varchar</strong> or <strong>nvarchar</strong> columns. Also leaves trailing zeros in binary values that are inserted into <strong>varbinary</strong> columns. Values aren't padded to the length of the column.</p>
<p>When OFF is specified, this setting affects only the definition of new columns.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>In a future version of SQL Server, ANSI_PADDING will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature. We recommend that you always set ANSI_PADDING to ON. ANSI_PADDING must be ON when you create or manipulate indexes on computed columns or indexed views.</p>
</div>
<p><strong>char(<em>n</em>)</strong> and <strong>binary(<em>n</em>)</strong> columns that allow for nulls are padded to the column length when ANSI_PADDING is set to ON. Trailing blanks and zeros are trimmed when ANSI_PADDING is OFF. <strong>char(<em>n</em>)</strong> and <strong>binary(<em>n</em>)</strong> columns that don't allow nulls are always padded to the length of the column.</p>
<p>Connection-level settings that are set by using the SET statement override the default database-level setting for ANSI_PADDING. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_PADDING to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-padding-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_PADDING</a>.</p>
<p>You can determine this option's status by examining the <code>is_ansi_padding_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiPaddingEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="ansi_warnings--on--off--2">ANSI_WARNINGS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Errors or warnings are issued when conditions such as divide-by-zero occur. Errors and warnings are also issued when null values appear in aggregate functions.</p>
</li>
<li><p>OFF</p>
<p>No warnings are raised and null values are returned when conditions such as divide-by-zero occur.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>SET ANSI_WARNINGS must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for ANSI_WARNINGS. ODBC and OLE DB clients issue a connection-level SET statement setting ANSI_WARNINGS to ON for the session, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-ansi-warnings-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET ANSI_WARNINGS</a>.</p>
<p>You can determine this option's status by examining the <code>is_ansi_warnings_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAnsiWarningsEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="arithabort--on--off--2">ARITHABORT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>A query is ended when an overflow or divide-by-zero error occurs during query execution.</p>
</li>
<li><p>OFF</p>
<p>A warning message is displayed when one of these errors occurs. The query, batch, or transaction continues to process as if no error occurred even if a warning is displayed.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p><code>SET ARITHABORT</code> must be enabled (ON) when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine this option's status by examining the <code>is_arithabort_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsArithmeticAbortEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="compatibility_level---170--160--150--140--130--120--110--100--2">COMPATIBILITY_LEVEL = { 170 | 160 | 150 | 140 | 130 | 120 | 110 | 100 }</h4>
<p>For more information, see <a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a>.</p>
<h4 id="concat_null_yields_null--on--off--2">CONCAT_NULL_YIELDS_NULL { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>The result of a concatenation operation is NULL when either operand is NULL. For example, concatenating the character string "This is" and NULL causes the value NULL, instead of the value "This is".</p>
</li>
<li><p>OFF</p>
<p>The null value is treated as an empty character string.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>CONCAT_NULL_YIELDS_NULL must be set to ON when you create or make changes to indexes on computed columns or indexed views.</p>
<p>In a future version of SQL Server, CONCAT_NULL_YIELDS_NULL will always be ON and any applications that explicitly set the option to OFF will produce an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</p>
</div>
<p>Connection-level settings that are set by using the SET statement override the default database setting for CONCAT_NULL_YIELDS_NULL. By default, ODBC and OLE DB clients issue a connection-level SET statement setting CONCAT_NULL_YIELDS_NULL to ON for the session when connecting to an instance of SQL Server. For more information, see <a href="set-concat-null-yields-null-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET CONCAT_NULL_YIELDS_NULL</a>.</p>
<p>You can determine this option's status by examining the <code>is_concat_null_yields_null_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsNullConcat</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="numeric_roundabort--on--off--2">NUMERIC_ROUNDABORT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>An error is generated when loss of precision occurs in an expression.</p>
</li>
<li><p>OFF</p>
<p>Loss of precision doesn't generate an error message, and the result is rounded to the precision of the column or variable storing the result.</p>
</li>
</ul>
<div class="IMPORTANT">
<p>Important</p>
<p>NUMERIC_ROUNDABORT must be set to OFF when you create or make changes to indexes on computed columns or indexed views.</p>
</div>
<p>You can determine the status of this option in the <code>is_numeric_roundabort_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsNumericRoundAbortEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="quoted_identifier--on--off--2">QUOTED_IDENTIFIER { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Double quotation marks can be used to enclose delimited identifiers.</p>
<p>All strings delimited by double quotation marks are interpreted as object identifiers. Quoted identifiers don't have to follow the Transact-SQL rules for identifiers. They can be keywords and can include characters that aren't allowed in Transact-SQL identifiers. If a double quotation mark (<code>"</code>) is part of the identifier, it can be represented by two double quotation marks (<code>""</code>).</p>
</li>
<li><p>OFF</p>
<p>Identifiers can't be in quotation marks and must follow all Transact-SQL rules for identifiers. Literals can be delimited by either single or double quotation marks.</p>
</li>
</ul>
<p>SQL Server also allows for identifiers to be delimited by square brackets (<code>[</code> and <code>]</code>). Bracketed identifiers can always be used, whatever the QUOTED_IDENTIFIER setting is. For more information, see <a href="../../relational-databases/databases/database-identifiers?view=sql-server-ver17" data-linktype="relative-path">Database identifiers</a>.</p>
<p>When a table is created, the QUOTED IDENTIFIER option is always stored as ON in the metadata of the table. The option is stored even if the option is set to OFF when the table is created.</p>
<p>Connection-level settings that are set by using the SET statement override the default database setting for QUOTED_IDENTIFIER. ODBC and OLE DB clients issue a connection-level SET statement setting QUOTED_IDENTIFIER to ON, by default. The clients run the statement when you connect to an instance of SQL Server. For more information, see <a href="set-quoted-identifier-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET QUOTED_IDENTIFIER</a>.</p>
<p>You can determine this option's status by examining the <code>is_quoted_identifier_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsQuotedIdentifiersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="recursive_triggers--on--off--2">RECURSIVE_TRIGGERS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Recursive firing of AFTER triggers is allowed.</p>
</li>
<li><p>OFF</p>
<p>You can determine this option's status by examining the <code>is_recursive_triggers_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsRecursiveTriggersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<div class="NOTE">
<p>Note</p>
<p>Only direct recursion is prevented when RECURSIVE_TRIGGERS is set to OFF. To disable indirect recursion, you must also set the nested triggers server option to 0.</p>
</div>
</li>
</ul>
<p>You can determine this option's status by examining the <code>is_recursive_triggers_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or the <code>IsRecursiveTriggersEnabled</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<h4 id="target_recovery_time_option--2">&lt;target_recovery_time_option&gt; ::=</h4>
<p><strong>target_recovery_time_option</strong> isn't supported on Azure SQL Managed Instance.</p>
<p>Specifies the frequency of indirect checkpoints on a per-database basis. Starting with SQL Server 2016 (13.x) the default value for new databases is <strong>1 minute</strong>, which indicates database uses indirect checkpoints. For older versions the default is 0, which indicates that the database uses automatic checkpoints, whose frequency depends on the recovery interval setting of the server instance. Microsoft recommends 1 minute for most systems.</p>
<h4 id="with-termination--2">WITH &lt;termination&gt; ::=</h4>
<p>Specifies when to roll back incomplete transactions when the database is transitioned from one state to another. If the termination clause is omitted, the ALTER DATABASE statement waits indefinitely if there's any lock on the database. Only one termination clause can be specified, and it follows the SET clauses.</p>
<div class="NOTE">
<p>Note</p>
<p>Not all database options use the WITH &lt;termination&gt; clause. For more information, see the table under <a href="#SettingOptions" data-linktype="self-bookmark">Setting options</a> of the "Remarks" section of this article.</p>
</div>
<ul>
<li><p>ROLLBACK AFTER <em>integer</em> [SECONDS] | ROLLBACK IMMEDIATE</p>
<p>Specifies whether to roll back after the specified number of seconds or immediately.</p>
</li>
<li><p>NO_WAIT</p>
<p>Specifies that the request fails if the requested database state or option change can't complete immediately. Completing immediately means not waiting for transactions to commit or roll back on their own.</p>
</li>
</ul>
<h4 id="temporal_history_retention--2">&lt;temporal_history_retention&gt; ::=</h4>
<ul>
<li><p>TEMPORAL_HISTORY_RETENTION { ON | OFF }</p>
<p>ON by default but also automatically set to OFF after point in time restore operation. For more information including how to enable this setting, see <a href="../../relational-databases/tables/manage-retention-of-historical-data-in-system-versioned-temporal-tables?view=sql-server-ver17#how-to-configure-retention-policy" data-linktype="relative-path">How to configure retention policy</a>.</p>
<ul>
<li><p>ON</p>
<p>Default. Enables temporal table retention policy. For more information, see <a href="../../relational-databases/tables/manage-retention-of-historical-data-in-system-versioned-temporal-tables?view=sql-server-ver17" data-linktype="relative-path">Manage retention of historical data in system-versioned temporal tables</a>.</p>
</li>
<li><p>OFF</p>
<p>Don't perform temporal historical retention policy.</p>
</li>
</ul>
</li>
</ul>
<h2 id="SettingOptions"> Set options</h2>
<p>To retrieve current settings for database options, use the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view or <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a></p>
<p>After you set a database option, the new setting takes effect immediately.</p>
<p>You can change the default values for any one of the database options for all newly created databases. To do so, change the appropriate database option in the <code>model</code> system database.</p>
<h2 id="examples-2">Examples</h2>
<h3 id="a-enable-snapshot-isolation-on-a-database">A. Enable snapshot isolation on a database</h3>
<p>The following example enables the snapshot isolation framework option for the <code>AdventureWorks2025</code> database.</p>
<pre><code class="lang-sql">USE master;
GO
ALTER DATABASE [database_name]
SET ALLOW_SNAPSHOT_ISOLATION ON;
GO
-- Check the state of the snapshot_isolation_framework
-- in the database.
SELECT name, snapshot_isolation_state,
    snapshot_isolation_state_desc AS description
FROM sys.databases
WHERE name = N'[database_name]';
GO
</code></pre>
<p>The result set shows that the snapshot isolation framework is enabled.</p>
<table>
<thead>
<tr>
<th>name</th>
<th>snapshot_isolation_state</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>[database_name]</td>
<td>1</td>
<td>ON</td>
</tr>
</tbody>
</table>
<h3 id="b-enable-modify-or-disable-change-tracking">B. Enable, modify, or disable change tracking</h3>
<p>The following example enables change tracking for the <code>AdventureWorks2025</code> database and sets the retention period to <code>2</code> days.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET CHANGE_TRACKING = ON
(AUTO_CLEANUP = ON, CHANGE_RETENTION = 2 DAYS);
</code></pre>
<p>The following example shows how to change the retention period to <code>3</code> days.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET CHANGE_TRACKING (CHANGE_RETENTION = 3 DAYS);
</code></pre>
<p>The following example shows how to disable change tracking for the <code>AdventureWorks2025</code> database.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET CHANGE_TRACKING = OFF;
</code></pre>
<h3 id="c-enable-the-query-store">C. Enable the Query Store</h3>
<p>The following example enables the Query Store and configures Query Store parameters.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      QUERY_CAPTURE_MODE = AUTO,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60
    );
</code></pre>
<h3 id="d-enable-the-query-store-with-wait-statistics">D. Enable the Query Store with wait statistics</h3>
<p>The following example enables the Query Store and configures its parameters.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60,
      SIZE_BASED_CLEANUP_MODE = AUTO,
      MAX_PLANS_PER_QUERY = 200,
      WAIT_STATS_CAPTURE_MODE = ON
    );
</code></pre>
<h3 id="e-enable-the-query-store-with-custom-capture-policy-options">E. Enable the Query Store with custom capture policy options</h3>
<p>The following example enables the Query Store and configures its parameters.</p>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET QUERY_STORE = ON
    (
      OPERATION_MODE = READ_WRITE,
      CLEANUP_POLICY = ( STALE_QUERY_THRESHOLD_DAYS = 90 ),
      DATA_FLUSH_INTERVAL_SECONDS = 900,
      MAX_STORAGE_SIZE_MB = 1024,
      INTERVAL_LENGTH_MINUTES = 60,
      SIZE_BASED_CLEANUP_MODE = AUTO,
      MAX_PLANS_PER_QUERY = 200,
      WAIT_STATS_CAPTURE_MODE = ON,
      QUERY_CAPTURE_MODE = CUSTOM,
      QUERY_CAPTURE_POLICY = (
        STALE_CAPTURE_POLICY_THRESHOLD = 24 HOURS,
        EXECUTION_COUNT = 30,
        TOTAL_COMPILE_CPU_TIME_MS = 1000,
        TOTAL_EXECUTION_CPU_TIME_MS = 100
      )
    );
</code></pre>
<h2 id="related-content-2">Related content</h2>
<ul>
<li><a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a></li>
<li><a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX (Transact-SQL)</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-data-spaces-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.data_spaces</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-database-automatic-tuning-options-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.database_automatic_tuning_options</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-database-automatic-tuning-mode-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.database_automatic_tuning_mode</a></li>
<li><a href="alter-database-transact-sql-compatibility-level?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE compatibility level</a></li>
<li><a href="alter-database-transact-sql-database-mirroring?view=sql-server-ver17" data-linktype="relative-path">ALTER DATABASE Database Mirroring</a></li>
<li><a href="create-database-transact-sql?view=azuresqldb-mi-current&amp;preserve-view=true" data-linktype="relative-path">CREATE DATABASE</a></li>
<li><a href="../../relational-databases/track-changes/enable-and-disable-change-tracking-sql-server?view=sql-server-ver17" data-linktype="relative-path">Enable and Disable Change Tracking (SQL Server)</a></li>
<li><a href="drop-database-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DROP DATABASE (Transact-SQL)</a></li>
<li><a href="set-transaction-isolation-level-transact-sql?view=sql-server-ver17" data-linktype="relative-path">SET TRANSACTION ISOLATION LEVEL (Transact-SQL)</a></li>
<li><a href="../../relational-databases/system-stored-procedures/sp-configure-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sp_configure</a></li>
<li><a href="../../relational-databases/performance/best-practice-with-the-query-store?view=sql-server-ver17" data-linktype="relative-path">Best practices for monitoring workloads with Query Store</a></li>
</ul>
</div>
<div data-moniker="azure-sqldw-latest">
<section class="row">
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=sql-server-ver15&amp;preserve-view=true" data-linktype="relative-path">SQL Server</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-current&amp;preserve-view=true" data-linktype="relative-path">SQL Database</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-mi-current&amp;preserve-view=true" data-linktype="relative-path">SQL Managed Instance</a></p>
</div>
<div class="column">
<p><em><strong>* Azure Synapse<br>Analytics *</strong></em> &nbsp;</p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=fabric&amp;preserve-view=true" data-linktype="relative-path">Microsoft Fabric Data Warehouse</a></p>
</div>
</section>
<p>&nbsp;</p>
<h2 id="azure-synapse-analytics">Azure Synapse Analytics</h2>
<h2 id="syntax-3">Syntax</h2>
<pre><code class="lang-syntaxsql">ALTER DATABASE { database_name }
SET
{
    &lt;optionspec&gt; [ ,...n ]
}
;

&lt;option_spec&gt;::=
{
    &lt;auto_option&gt;
  | &lt;db_encryption_option&gt;
  | &lt;query_store_options&gt;
  | &lt;result_set_caching&gt;
  | &lt;snapshot_option&gt;
}
;

&lt;auto_option&gt; ::=
{
    AUTO_CREATE_STATISTICS { OFF | ON }
}

&lt;db_encryption_option&gt; ::=
{
    ENCRYPTION { ON | OFF }
}

&lt;query_store_option&gt; ::=
{
    QUERY_STORE { OFF | ON }
}

&lt;result_set_caching_option&gt; ::=
{
    RESULT_SET_CACHING { ON | OFF }
}

&lt;snapshot_option&gt; ::=
{
    READ_COMMITTED_SNAPSHOT { ON | OFF }
}
</code></pre>
<h2 id="arguments-3">Arguments</h2>
<h4 id="database_name-3"><em>database_name</em></h4>
<p>The name of the database to be modified.</p>
<h4 id="auto_option--3">&lt;auto_option&gt; ::=</h4>
<p>Controls automatic options.</p>
<h4 id="auto_create_statistics--on--off-">AUTO_CREATE_STATISTICS { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Query Optimizer creates statistics on single columns in query predicates, as necessary, to improve query plans and query performance. These single-column statistics are created when Query Optimizer compiles queries. The single-column statistics are created only on columns that aren't already the first column of an existing statistics object.</p>
<p>The default is ON. We recommend that you use the default setting for most databases.</p>
</li>
<li><p>OFF</p>
<p>Query Optimizer doesn't create statistics on single columns in query predicates when it's compiling queries. Setting this option to OFF can cause suboptimal query plans and degraded query performance.</p>
</li>
</ul>
<p>This command must be run while connected to the user database.</p>
<p>You can determine this option's status by examining the <code>is_auto_create_stats_on</code> column in the <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a> catalog view. You can also determine the status by examining the <code>IsAutoCreateStatistics</code> property of the <a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX</a> function.</p>
<p>For more information, see the section "Using the database-wide statistics options" in <a href="../../relational-databases/statistics/statistics?view=sql-server-ver17" data-linktype="relative-path">Statistics</a>.</p>
<h4 id="db_encryption_option--3">&lt;db_encryption_option&gt; ::=</h4>
<p>Controls the database encryption state.</p>
<h4 id="encryption--on--off--2">ENCRYPTION { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Sets the database to be encrypted.</p>
</li>
<li><p>OFF</p>
<p>Sets the database to not be encrypted.</p>
</li>
</ul>
<p>For more information about database encryption, see <a href="../../relational-databases/security/encryption/transparent-data-encryption?view=sql-server-ver17" data-linktype="relative-path">Transparent data encryption (TDE)</a>, and <a href="/en-us/azure/azure-sql/database/transparent-data-encryption-tde-overview" data-linktype="absolute-path">Transparent data encryption for Azure SQL Database, Azure SQL Managed Instance, and Azure Synapse Analytics</a>.</p>
<p>When encryption is enabled at the database level, all file groups are encrypted. Any new file groups inherit the encrypted property. If any file groups in the database are set to READ ONLY, the database encryption operation fails.</p>
<p>You can see the encryption state of the database and the state of the encryption scan by using the <code>sys.dm_database_encryption_keys</code> dynamic management view.</p>
<h4 id="query_store_option-">&lt;query_store_option&gt; ::=</h4>
<p>Controls whether the Query Store is enabled in this data warehouse.</p>
<h4 id="query_store--on--off-">QUERY_STORE { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables the Query Store.</p>
</li>
<li><p>OFF</p>
<p>Disables the Query Store. OFF is the default value.</p>
</li>
</ul>
<div class="NOTE">
<p>Note</p>
<p>For Azure Synapse Analytics, you must execute <code>ALTER DATABASE SET QUERY_STORE</code> from the user database. Executing the statement from another data warehouse instance isn't supported.</p>
</div>
<div class="NOTE">
<p>Note</p>
<p>For Azure Synapse Analytics, the Query Store can be enabled as on other platforms but additional configuration options aren't supported.</p>
</div>
<h4 id="result_set_caching_option-">&lt;result_set_caching_option&gt; ::=</h4>
<p><strong>Applies to</strong>: Azure Synapse Analytics</p>
<p>Controls whether query result is cached in the database.</p>
<h4 id="result_set_caching--on--off-">RESULT_SET_CACHING { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Specifies that query result sets returned from this database are cached in the database.</p>
</li>
<li><p>OFF</p>
<p>Specifies that query result sets returned from this database aren't cached in the database.</p>
</li>
</ul>
<p>This command must be run while connected to the <code>master</code> database. Change to this database setting takes effect immediately. Storage costs are incurred by caching query result sets. After disabling result caching for a database, the previously persisted result cache is immediately deleted from Azure Synapse storage.</p>
<p>Run this command to check a database's result set caching configuration. If result set caching is turned ON, <code>is_result_set_caching_on</code> returns 1.</p>
<pre><code class="lang-sql">SELECT name, is_result_set_caching_on FROM sys.databases
WHERE name = &lt;'Your_Database_Name'&gt;
</code></pre>
<p>Run this command to check if a query was executed using cached result. The <code>result_cache_hit</code> column returns 1 for cache hit, 0 for cache miss, and negative values for reasons why result set caching wasn't used. Check <a href="../../relational-databases/system-dynamic-management-views/sys-dm-pdw-exec-requests-transact-sql?view=aps-pdw-2016-au7&amp;preserve-view=true" data-linktype="relative-path">sys.dm_pdw_exec_requests</a> for details.</p>
<pre><code class="lang-sql">SELECT request_id, command, result_cache_hit FROM sys.dm_pdw_exec_requests
WHERE request_id = &lt;'Your_Query_Request_ID'&gt;
</code></pre>
<div class="NOTE">
<p>Note</p>
<p>Result set caching should not be used in conjunction with <a href="../functions/decryptbykey-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DECRYPTBYKEY</a>. If this cryptographic function must be used, ensure you have result set caching disabled (either at <a href="set-result-set-caching-transact-sql?view=sql-server-ver17" data-linktype="relative-path">session-level</a> or <a href="alter-database-transact-sql-set-options?view=sql-server-ver17" data-linktype="relative-path">database-level</a>) at the time of execution.</p>
</div>
<div class="IMPORTANT">
<p>Important</p>
<p>The operations to create result set cache and retrieve data from the cache happen on the control node of a data warehouse instance. When result set caching is turned ON, running queries that return large result set (for example, &gt;1 million rows) can cause high CPU usage on the control node and slow down the overall query response on the instance. Those queries are commonly used during data exploration or ETL operations. To avoid stressing the control node and cause performance issue, users should turn OFF result set caching on the database before running those types of queries.</p>
</div>
<p>For details on performance tuning with result set caching, check <a href="/en-us/azure/sql-data-warehouse/performance-tuning-result-set-caching" data-linktype="absolute-path">Performance tuning guidance</a>.</p>
<h5 id="permissions">Permissions</h5>
<p>To set the RESULT_SET_CACHING option, a user needs server-level principal login (the one created by the provisioning process) or be a member of the <code>dbmanager</code> database role.</p>
<h4 id="snapshot_option--3">&lt;snapshot_option&gt; ::=</h4>
<p><strong>Applies to</strong>: Azure Synapse Analytics</p>
<p>Controls the transaction isolation level of a database.</p>
<h4 id="read_committed_snapshot--on--off--3">READ_COMMITTED_SNAPSHOT { ON | OFF }</h4>
<ul>
<li><p>ON</p>
<p>Enables the READ_COMMITTED_SNAPSHOT option at the database level.</p>
</li>
<li><p>OFF</p>
<p>Turn off the READ_COMMITTED_SNAPSHOT option at the database level.</p>
</li>
</ul>
<p>This command must be run while connected to the <code>master</code> database. Turning READ_COMMITTED_SNAPSHOT ON or OFF for a user database kills all open connections to this database. You should make this change during a database maintenance window or wait until there's no active connection to the database except for the connection running the ALTER DATABASE command. The database doesn't have to be in single-user mode. Changing READ_COMMITTED_SNAPSHOT setting at session level isn't supported. To verify this setting for a database, check the <code>is_read_committed_snapshot_on</code> column in <code>sys.databases</code>.</p>
<p>In a database with READ_COMMITTED_SNAPSHOT enabled, queries can experience slower performance due to the scan of versions if multiple data versions are present. Long-open transactions can also cause an increase in the size of the database. This issue occurs if there are data changes by these transactions that block version cleanup.</p>
<h5 id="permissions-1">Permissions</h5>
<p>To set the READ_COMMITTED_SNAPSHOT option, a user needs ALTER permission on the database.</p>
<h2 id="examples-3">Examples</h2>
<h3 id="check-statistics-setting-for-a-database">Check statistics setting for a database</h3>
<pre><code class="lang-sql">SELECT name, is_auto_create_stats_on FROM sys.databases
</code></pre>
<h3 id="enable-query-store-for-a-database">Enable Query Store for a database</h3>
<pre><code class="lang-sql">ALTER DATABASE [database_name]
SET QUERY_STORE = ON;
</code></pre>
<h3 id="enable-result-set-caching-for-a-database">Enable result set caching for a database</h3>
<pre><code class="lang-sql">-- Run this command when connecting to the MASTER database

ALTER DATABASE [database_name]
SET RESULT_SET_CACHING ON;
</code></pre>
<h3 id="check-result-set-caching-setting-for-a-database">Check result set caching setting for a database</h3>
<pre><code class="lang-sql">SELECT name, is_result_set_caching_on
FROM sys.databases;
</code></pre>
<h3 id="enable-the-read_committed_snapshot-option-for-a-database">Enable the Read_Committed_Snapshot option for a database</h3>
<p>Run this command when connecting to the <code>master</code> database.</p>
<pre><code class="lang-sql">ALTER DATABASE MyDatabase
SET READ_COMMITTED_SNAPSHOT ON;
</code></pre>
<h2 id="related-content-3">Related content</h2>
<ul>
<li><a href="../functions/databasepropertyex-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DATABASEPROPERTYEX (Transact-SQL)</a></li>
<li><a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=sql-server-ver17" data-linktype="relative-path">sys.databases</a></li>
<li><a href="/en-us/azure/sql-data-warehouse/sql-data-warehouse-reference-tsql-language-elements" data-linktype="absolute-path">Azure Synapse Analytics language elements</a></li>
<li><a href="drop-database-transact-sql?view=sql-server-ver17" data-linktype="relative-path">DROP DATABASE (Transact-SQL)</a></li>
<li><a href="/en-us/azure/sql-data-warehouse/sql-data-warehouse-best-practices#maintain-statistics" data-linktype="absolute-path">Best practices for Azure Synapse Analytics</a></li>
<li><a href="/en-us/azure/sql-data-warehouse/sql-data-warehouse-tables-overview#statistics" data-linktype="absolute-path">Designing tables in Azure Synapse Analytics</a></li>
</ul>
</div>
<div data-moniker="fabric">
<section class="row">
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=sql-server-ver15&amp;preserve-view=true" data-linktype="relative-path">SQL Server</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-current&amp;preserve-view=true" data-linktype="relative-path">SQL Database</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azuresqldb-mi-current&amp;preserve-view=true" data-linktype="relative-path">SQL Managed Instance</a></p>
</div>
<div class="column">
<p><a href="alter-database-transact-sql-set-options?view=azure-sqldw-latest&amp;preserve-view=true" data-linktype="relative-path">Azure Synapse<br>Analytics</a></p>
</div>
<div class="column">
<p><em><strong>Microsoft Fabric Data Warehouse</strong></em></p>
</div>
</section>
<p>&nbsp;</p>
<h2 id="microsoft-fabric-data-warehouse">Microsoft Fabric Data Warehouse</h2>
<p>Use <code>ALTER DATABASE ... SET</code> to manage a Microsoft Fabric Warehouse in Microsoft Fabric.</p>
<h2 id="syntax-4">Syntax</h2>
<pre><code class="lang-syntaxsql">-- Microsoft Fabric Data Warehouse

ALTER DATABASE { warehouse_name | CURRENT }
SET
{
    &lt;option_spec&gt; [ ,...n ] 
}

&lt;option_spec&gt; ::=
{
    &lt;data_lake_log_publishing&gt;
  | &lt;vorder&gt;
  | &lt;timestamp&gt;
  | &lt;result_set_caching&gt;
  | &lt;proactive_statistics_refresh&gt;
}
;

&lt;data_lake_log_publishing&gt; ::=
{
    DATA_LAKE_LOG_PUBLISHING { PAUSED | AUTO }
}

&lt;vorder&gt; ::=
{
    VORDER = OFF
}

&lt;timestamp&gt; ::=
{
    TIMESTAMP = {CURRENT_TIMESTAMP | 'YYYY-MM-DDTHH:MM:SS.SS' }  
}

&lt;result_set_caching&gt; ::=
{    
    RESULT_SET_CACHING { ON | OFF } 
}

&lt;proactive_statistics_refresh&gt; ::=
{    
    PROACTIVE_STATISTICS_REFRESH = { ON | OFF } 
}
</code></pre>
<h2 id="arguments-4">Arguments</h2>
<h4 id="data_lake_log_publishing">DATA_LAKE_LOG_PUBLISHING</h4>
<p>Pauses or resumes Delta Lake log publishing. For more information, see <a href="/en-us/fabric/data-warehouse/query-delta-lake-logs#pausing-delta-lake-log-publishing" data-linktype="absolute-path">Delta Lake log publishing</a>.</p>
<h4 id="vorder">VORDER</h4>
<p>Can disable V-Order behavior. For more information, see <a href="/en-us/fabric/data-warehouse/disable-v-order" data-linktype="absolute-path">disabling V-Order behavior</a> in a warehouse.</p>
<h4 id="timestamp">TIMESTAMP</h4>
<p>Updates the timestamp for an existing warehouse snapshot in Fabric Data Warehouse. The timestamp must be provided in UTC time zone. For more information, see <a href="/en-us/fabric/data-warehouse/warehouse-snapshot" data-linktype="absolute-path">Warehouse snapshots</a>.</p>
<h4 id="result_set_caching">RESULT_SET_CACHING</h4>
<p>Enables or disables result set caching for the target item. The default setting of this feature is <code>ON</code>. For more information, see <a href="/en-us/fabric/data-warehouse/result-set-caching" data-linktype="absolute-path">Result set caching</a>.</p>
<h4 id="proactive_statistics_refresh">PROACTIVE_STATISTICS_REFRESH</h4>
<p><strong>Applies to</strong>: Microsoft Fabric Warehouse in Microsoft Fabric.</p>
<p>Enables or disables proactive statistics refresh for the target item. The default is <code>ON</code>. You should use the default setting for most items. For more information, see <a href="/en-us/fabric/data-warehouse/statistics" data-linktype="absolute-path">Statistics</a>.</p>
<h2 id="permissions-2">Permissions</h2>
<p>The user needs to be a member of the Admin, Member, or Contributor roles in the Fabric workspace.</p>
<h2 id="examples-4">Examples</h2>
<h3 id="a-pausing-the-publishing-of-delta-lake-logs">A. Pausing the publishing of Delta Lake Logs</h3>
<p>The following T-SQL command pauses Delta Lake Log publishing in the current warehouse context.</p>
<pre><code class="lang-sql">ALTER DATABASE CURRENT SET DATA_LAKE_LOG_PUBLISHING = PAUSED;
</code></pre>
<p>To check the current status of Delta Lake Log publishing on all warehouses, of your workspace, use the following T-SQL code to query <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=fabric&amp;preserve-view=true" data-linktype="relative-path">sys.databases</a> in a new query window:</p>
<pre><code class="lang-sql">SELECT [name], [DATA_LAKE_LOG_PUBLISHING_DESC] FROM sys.databases;
</code></pre>
<p><a id="set-and-check-result-set-caching-preview"></a></p>
<h3 id="b-set-and-check-result-set-caching">B. Set and check result set caching</h3>
<p>The following T-SQL command will enable the item <code>MyDataWarehouse</code> to begin creating and applying result set cache to applicable <code>SELECT</code> queries. For more information, see <a href="/en-us/fabric/data-warehouse/result-set-caching" data-linktype="absolute-path">Result set caching</a>.</p>
<pre><code class="lang-sql">ALTER DATABASE [MyDataWarehouse] SET RESULT_SET_CACHING ON;
</code></pre>
<p>The column <code>is_result_set_caching_on</code> from <a href="../../relational-databases/system-catalog-views/sys-databases-transact-sql?view=fabric&amp;preserve-view=true" data-linktype="relative-path">sys.databases</a> can then be checked to confirm that result set caching has been enabled.</p>
<pre><code class="lang-sql">SELECT [name], [is_result_set_caching_on] FROM sys.databases;
</code></pre>
<h2 id="related-content-4">Related content</h2>
<ul>
<li><a href="/en-us/fabric/data-warehouse/data-warehousing" data-linktype="absolute-path">What is data warehousing in Microsoft Fabric?</a></li>
<li><a href="/en-us/fabric/data-warehouse/query-delta-lake-logs" data-linktype="absolute-path">Delta Lake logs in Warehouse in Microsoft Fabric</a></li>
<li><a href="/en-us/fabric/data-warehouse/v-order" data-linktype="absolute-path">Understand V-Order for Microsoft Fabric Warehouse</a></li>
</ul>
</div>
</div>
					
		<div
			id="ms--inline-notifications"
			class="margin-block-xs"
			data-bi-name="inline-notification"
		></div>
	 
		<div
			id="assertive-live-region"
			role="alert"
			aria-live="assertive"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
		<div
			id="polite-live-region"
			role="status"
			aria-live="polite"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
	
					
		<!-- feedback section -->
		<section
			id="site-user-feedback-footer"
			class="font-size-sm margin-top-md display-none-print display-none-desktop"
			data-test-id="site-user-feedback-footer"
			data-bi-name="site-feedback-section"
		>
			<hr class="hr" />
			<h2 id="ms--feedback" class="title is-3">Feedback</h2>
			<div class="display-flex flex-wrap-wrap align-items-center">
				<p class="font-weight-semibold margin-xxs margin-left-none">
					Was this page helpful?
				</p>
				<div class="buttons">
					<button
						class="thumb-rating-button like button button-primary button-sm"
						data-test-id="footer-rating-yes"
						data-binary-rating-response="rating-yes"
						type="button"
						title="This article is helpful"
						data-bi-name="button-rating-yes"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-like"></span>
						</span>
						<span>Yes</span>
					</button>
					<button
						class="thumb-rating-button dislike button button-primary button-sm"
						id="standard-rating-no-button"
						hidden
						data-test-id="footer-rating-no"
						data-binary-rating-response="rating-no"
						type="button"
						title="This article is not helpful"
						data-bi-name="button-rating-no"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</button>
					<details
						class="popover popover-top"
						id="mobile-help-popover"
						data-test-id="footer-feedback-popover"
					>
						<summary
							class="thumb-rating-button dislike button button-primary button-sm"
							data-test-id="details-footer-rating-no"
							data-binary-rating-response="rating-no"
							title="This article is not helpful"
							data-bi-name="button-rating-no"
							aria-pressed="false"
							data-bi-an="feedback-unhelpful-popover"
						>
							<span class="icon" aria-hidden="true">
								<span class="docon docon-dislike"></span>
							</span>
							<span>No</span>
						</summary>
						<div
							class="popover-content width-200 width-300-tablet"
							role="dialog"
							aria-labelledby="popover-heading"
							aria-describedby="popover-description"
						>
							<p id="popover-heading" class="font-size-lg margin-bottom-xxs font-weight-semibold">
								Need help with this topic?
							</p>
							<p id="popover-description" class="font-size-sm margin-bottom-xs">
								Want to try using Ask Learn to clarify or guide you through this topic?
							</p>
							
		<div class="buttons flex-direction-row flex-wrap justify-content-center gap-xxs">
			<div>
		<button
			class="button button-sm border inner-focus display-none margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-test-id="ask-learn-assistant-modal-entry-mobile-feedback"
			data-ask-learn-modal-entry-feedback
			data-bi-an=feedback-unhelpful-popover
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-inline-flex display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-modal-entry-tablet-feedback"
			data-ask-learn-modal-entry-feedback
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-flyout-entry-feedback"
			data-ask-learn-flyout-entry-show-only
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	</div>
			<button
				type="button"
				class="button button-sm margin-right-xxs"
				data-help-option="suggest-fix"
				data-bi-name="feedback-suggest"
				data-bi-an="feedback-unhelpful-popover"
				data-test-id="suggest-fix"
			>
				<span class="icon" aria-hidden="true">
					<span class="docon docon-feedback"></span>
				</span>
				<span> Suggest a fix? </span>
			</button>
		</div>
	
						</div>
					</details>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
				</div>
				
		<div id="ms--additional-resources-mobile" class="display-none-print">
			<hr class="hr" hidden />
			<h2 id="ms--additional-resources-mobile-heading" class="title is-3" hidden>
				Additional resources
			</h2>
			 
		<section
			id="right-rail-training-mobile"
			class=""
			data-bi-name="learning-resource-card"
			hidden
		></section>
	 
		<section
			id="right-rail-events-mobile"
			class=""
			data-bi-name="events-card"
			hidden
		></section>
	 
		<section
			id="right-rail-qna-mobile"
			class="margin-top-xxs"
			data-bi-name="qna-link-card"
			hidden
		></section>
	
		</div>
	 
		<div
			id="article-metadata-footer"
			data-bi-name="article-metadata-footer"
			data-test-id="article-metadata-footer"
			class="page-metadata-container"
		>
			<hr class="hr" />
			<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
				<li class="visibility-hidden-visual-diff">
			<span class="badge badge-sm text-wrap-pretty">
				<span>Last updated on <local-time format="twoDigitNumeric"
		datetime="2026-02-09T08:00:00.000Z"
		data-article-date-source="calculated"
		class="is-invisible"
	>
		2026-02-09
	</local-time></span>
			</span>
		</li>
			</ul>
		</div>
	
			</div>
			
		<div
			id="action-panel"
			role="region"
			aria-label="Action Panel"
			class="action-panel"
			tabindex="-1"
		></div>
	
		
				</main>
				<aside
					id="layout-body-aside"
					class="layout-body-aside "
					data-bi-name="aside"
			  >
					
		<div
			id="ms--additional-resources"
			class="right-container padding-sm display-none display-block-desktop height-full"
			data-bi-name="pageactions"
			role="complementary"
			aria-label="Additional resources"
		>
			<div id="affixed-right-container" data-bi-name="right-column">
				
		<nav
			id="side-doc-outline"
			class="doc-outline border-bottom padding-bottom-xs margin-bottom-xs"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h3>In this article</h3>
		</nav>
	
				<!-- Feedback -->
				
		<section
			id="ms--site-user-feedback-right-rail"
			class="font-size-sm display-none-print"
			data-test-id="site-user-feedback-right-rail"
			data-bi-name="site-feedback-right-rail"
		>
			<p class="font-weight-semibold margin-bottom-xs">Was this page helpful?</p>
			<div class="buttons">
				<button
					class="thumb-rating-button like button button-primary button-sm"
					data-test-id="right-rail-rating-yes"
					data-binary-rating-response="rating-yes"
					type="button"
					title="This article is helpful"
					data-bi-name="button-rating-yes"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-like"></span>
					</span>
					<span>Yes</span>
				</button>
				<button
					class="thumb-rating-button dislike button button-primary button-sm"
					id="right-rail-no-button"
					hidden
					data-test-id="right-rail-rating-no"
					data-binary-rating-response="rating-no"
					type="button"
					title="This article is not helpful"
					data-bi-name="button-rating-no"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-dislike"></span>
					</span>
					<span>No</span>
				</button>
				<details class="popover popover-right" id="help-popover" data-test-id="feedback-popover">
					<summary
						tabindex="0"
						class="thumb-rating-button dislike button button-primary button-sm"
						data-test-id="details-right-rail-rating-no"
						data-binary-rating-response="rating-no"
						title="This article is not helpful"
						data-bi-name="button-rating-no"
						aria-pressed="false"
						data-bi-an="feedback-unhelpful-popover"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</summary>
					<div
						class="popover-content width-200 width-300-tablet"
						role="dialog"
						aria-labelledby="popover-heading"
						aria-describedby="popover-description"
					>
						<p
							id="popover-heading-right-rail"
							class="font-size-lg margin-bottom-xxs font-weight-semibold"
						>
							Need help with this topic?
						</p>
						<p id="popover-description-right-rail" class="font-size-sm margin-bottom-xs">
							Want to try using Ask Learn to clarify or guide you through this topic?
						</p>
						
		<div class="buttons flex-direction-row flex-wrap justify-content-center gap-xxs">
			<div>
		<button
			class="button button-sm border inner-focus display-none margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-test-id="ask-learn-assistant-modal-entry-mobile-feedback"
			data-ask-learn-modal-entry-feedback
			data-bi-an=feedback-unhelpful-popover
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-inline-flex display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-modal-entry-tablet-feedback"
			data-ask-learn-modal-entry-feedback
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs border-color-ask-learn margin-right-xxs"
			data-bi-name="ask-learn-assistant-entry-troubleshoot"
			data-bi-an=feedback-unhelpful-popover
			data-test-id="ask-learn-assistant-flyout-entry-feedback"
			data-ask-learn-flyout-entry-show-only
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	</div>
			<button
				type="button"
				class="button button-sm margin-right-xxs"
				data-help-option="suggest-fix"
				data-bi-name="feedback-suggest"
				data-bi-an="feedback-unhelpful-popover"
				data-test-id="suggest-fix"
			>
				<span class="icon" aria-hidden="true">
					<span class="docon docon-feedback"></span>
				</span>
				<span> Suggest a fix? </span>
			</button>
		</div>
	
					</div>
				</details>
			</div>
		</section>
	
			</div>
		</div>
	
			  </aside> <section
					id="layout-body-flyout"
					class="layout-body-flyout "
					data-bi-name="flyout"
			  >
					 <div
	class="height-full border-left background-color-body-medium"
	id="ask-learn-flyout"
></div>
			  </section> <div class="layout-body-footer " data-bi-name="layout-footer">
		<footer
			id="footer"
			data-test-id="footer"
			data-bi-name="footer"
			class="footer-layout has-padding has-default-focus border-top  uhf-container"
			role="contentinfo"
		>
			<div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop">
				
		<a
			data-mscc-ic="false"
			href="#"
			data-bi-name="select-locale"
			class="locale-selector-link flex-shrink-0 button button-sm button-clear external-link-indicator"
			id=""
			title=""
			><span class="icon" aria-hidden="true"
				><span class="docon docon-world"></span></span
			><span class="local-selector-link-text">en-us</span></a
		>
	 <div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
		
		<a
			data-mscc-ic="false"
			href="https://aka.ms/yourcaliforniaprivacychoices"
			data-bi-name="your-privacy-choices"
			class="button button-sm button-clear flex-shrink-0 external-link-indicator"
			id=""
			title=""
			>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			viewBox="0 0 30 14"
			xml:space="preserve"
			height="16"
			width="43"
			aria-hidden="true"
			focusable="false"
		>
			<path
				d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"
			></path>
			<path
				d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"
			></path>
			<path
				d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z"
				style="fill:#fff"
			></path>
			<path
				d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z"
				style="fill:#06f"
			></path>
		</svg>
	
			<span>Your Privacy Choices</span></a
		>
	
	</div>
				<div class="flex-shrink-0">
		<div class="dropdown has-caret-up">
			<button
				data-test-id="theme-selector-button"
				class="dropdown-trigger button button-clear button-sm inner-focus theme-dropdown-trigger"
				aria-controls="{{ themeMenuId }}"
				aria-expanded="false"
				title="Theme"
				data-bi-name="theme"
			>
				<span class="icon">
					<span class="docon docon-sun" aria-hidden="true"></span>
				</span>
				<span>Theme</span>
				<span class="icon expanded-indicator" aria-hidden="true">
					<span class="docon docon-chevron-down-light"></span>
				</span>
			</button>
			<div class="dropdown-menu" id="{{ themeMenuId }}" role="menu">
				<ul class="theme-selector padding-xxs" data-test-id="theme-dropdown-menu">
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="light"
						>
							<span class="theme-light margin-right-xxs">
								<span
									class="theme-selector-icon border display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Light </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="dark"
						>
							<span class="theme-dark margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Dark </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="high-contrast"
						>
							<span class="theme-high-contrast margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> High contrast </span>
						</button>
					</li>
				</ul>
			</div>
		</div>
	</div>
			</div>
			<ul class="links" data-bi-name="footerlinks">
				<li class="manage-cookies-holder" hidden=""></li>
				<li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/principles-for-ai-generated-content"
			data-bi-name="aiDisclaimer"
			class=" external-link-indicator"
			id=""
			title=""
			>AI Disclaimer</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/previous-versions/"
			data-bi-name="archivelink"
			class=" external-link-indicator"
			id=""
			title=""
			>Previous Versions</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog"
			data-bi-name="bloglink"
			class=" external-link-indicator"
			id=""
			title=""
			>Blog</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/contribute"
			data-bi-name="contributorGuide"
			class=" external-link-indicator"
			id=""
			title=""
			>Contribute</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://go.microsoft.com/fwlink/?LinkId=521839"
			data-bi-name="privacy"
			class=" external-link-indicator"
			id=""
			title=""
			>Privacy</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/legal/termsofuse"
			data-bi-name="termsofuse"
			class=" external-link-indicator"
			id=""
			title=""
			>Terms of Use</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/"
			data-bi-name="trademarks"
			class=" external-link-indicator"
			id=""
			title=""
			>Trademarks</a
		>
	
	</li>
				<li>&copy; Microsoft 2026</li>
			</ul>
		</footer>
	</footer>
			</body>
		</html>